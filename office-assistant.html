<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>VƒÉnPh√≤ngTr√≠ - Tr·ª£ l√Ω AI VƒÉn ph√≤ng</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }
        .typing-animation {
            animation: typing 1.5s infinite;
        }
        @keyframes typing {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        .message-bubble {
            max-width: 85%;
            word-wrap: break-word;
        }
        .scroll-container {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .scroll-container::-webkit-scrollbar {
            display: none;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #messages {
            max-height: 60vh;
            min-height: 200px;
            overflow-y: auto !important;
            scrollbar-width: thin;
            scrollbar-color: #60a5fa #e5e7eb;
        }
        #messages::-webkit-scrollbar {
            width: 8px;
            background: #e5e7eb;
        }
        #messages::-webkit-scrollbar-thumb {
            background: #60a5fa;
            border-radius: 4px;
        }
        .suggestion-chip {
            transition: all 0.3s ease;
        }
        .suggestion-chip:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <!-- Main App -->
    <div class="h-full flex flex-col">
        <!-- Header -->
        <div class="bg-white shadow-sm p-4 text-center">
            <div class="flex items-center justify-center space-x-3">
                <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-3 rounded-full">
                    <i data-lucide="clipboard-list" class="w-6 h-6 text-white"></i>
                </div>
                <div>
                    <h2 class="text-gray-800 font-bold text-xl">VƒÉnPh√≤ngTr√≠</h2>
                    <p class="text-gray-500 text-sm">Tr·ª£ l√Ω AI VƒÉn ph√≤ng th√¥ng minh</p>
                </div>
            </div>
        </div>

        <!-- Chat Interface -->
        <div class="flex-1 flex flex-col bg-white">
            <!-- Messages -->
            <div id="messages" class="flex-1 overflow-y-auto p-4 space-y-4 scroll-container">
                <!-- Messages will be added here -->
            </div>

            <!-- Input -->
            <div class="p-4 bg-white border-t">
                <div class="flex space-x-3">
                    <input
                        type="text"
                        id="messageInput"
                        placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..."
                        class="flex-1 px-4 py-3 border border-gray-200 rounded-full bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-800"
                        onkeypress="handleKeyPress(event)"
                    />
                    <button
                        onclick="sendMessage()"
                        id="sendButton"
                        class="px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full hover:from-blue-600 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl"
                    >
                        <i data-lucide="send" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        let isTyping = false;
        let userProfile = {
            name: 'B·∫°n',
            avatar: 'https://cdn.icon-icons.com/icons2/1378/PNG/512/avatardefault_92824.png'
        };

        // Office-specific AI responses
        const officeResponses = {
            greeting: [
                "Ch√†o b·∫°n! T√¥i l√† VƒÉnPh√≤ngTr√≠, tr·ª£ l√Ω AI chuy√™n v·ªÅ c√¥ng vi·ªác vƒÉn ph√≤ng ƒë√¢y! üìã\n\nT√¥i c√≥ th·ªÉ gi√∫p b·∫°n v·ªõi:\n‚Ä¢ So·∫°n th·∫£o vƒÉn b·∫£n, email chuy√™n nghi·ªáp\n‚Ä¢ L·∫≠p k·∫ø ho·∫°ch c√¥ng vi·ªác hi·ªáu qu·∫£\n‚Ä¢ T·∫°o b√°o c√°o, th·ªëng k√™ chi ti·∫øt\n‚Ä¢ Qu·∫£n l√Ω l·ªãch bi·ªÉu, cu·ªôc h·ªçp\n‚Ä¢ C√¥ng c·ª• vƒÉn ph√≤ng h·ªØu √≠ch\n\nB·∫°n c·∫ßn t√¥i h·ªó tr·ª£ g√¨ h√¥m nay?",
                "Xin ch√†o! T√¥i VƒÉnPh√≤ngTr√≠ ƒë√¢y! S·∫µn s√†ng h·ªó tr·ª£ b·∫°n trong m·ªçi c√¥ng vi·ªác vƒÉn ph√≤ng. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ so·∫°n th·∫£o vƒÉn b·∫£n, qu·∫£n l√Ω th·ªùi gian, ho·∫∑c b·∫•t k·ª≥ v·∫•n ƒë·ªÅ n√†o kh√°c nh√©!"
            ],
            askDetail: "ƒê·ªÉ t√¥i c√≥ th·ªÉ h·ªó tr·ª£ t·ªët h∆°n, b·∫°n c√≥ th·ªÉ cho t√¥i bi·∫øt:\n‚Ä¢ C√¥ng vi·ªác ch√≠nh c·ªßa b·∫°n l√† g√¨?\n‚Ä¢ B·∫°n th∆∞·ªùng g·∫∑p kh√≥ khƒÉn g√¨ trong c√¥ng vi·ªác?\n‚Ä¢ B·∫°n mu·ªën t√¥i gi√∫p g√¨ c·ª• th·ªÉ?",
            followUpQuestions: [
                "L√†m th·∫ø n√†o ƒë·ªÉ vi·∫øt email chuy√™n nghi·ªáp?",
                "C√°ch l·∫≠p k·∫ø ho·∫°ch c√¥ng vi·ªác hi·ªáu qu·∫£?",
                "Gi√∫p t√¥i t·∫°o m·ªôt b√°o c√°o tu·∫ßn.",
                "L√†m sao ƒë·ªÉ qu·∫£n l√Ω th·ªùi gian t·ªët h∆°n?",
                "C√°c c√¥ng c·ª• vƒÉn ph√≤ng h·ªØu √≠ch l√† g√¨?",
                "C√°ch t·ªï ch·ª©c cu·ªôc h·ªçp hi·ªáu qu·∫£?",
                "L√†m th·∫ø n√†o ƒë·ªÉ x·ª≠ l√Ω email nhanh ch√≥ng?",
                "C√°ch t·∫°o template vƒÉn b·∫£n?"
            ],
            document: {
                basic: "D·∫°, ƒë·ªÉ so·∫°n th·∫£o vƒÉn b·∫£n chuy√™n nghi·ªáp, t√¥i s·∫Ω h∆∞·ªõng d·∫´n b·∫°n t·ª´ng b∆∞·ªõc ·∫°.",
                detailed: {
                    structure: "üìù C·∫•u tr√∫c vƒÉn b·∫£n chuy√™n nghi·ªáp:\n‚Ä¢ Ti√™u ƒë·ªÅ: R√µ r√†ng, ng·∫Øn g·ªçn\n‚Ä¢ M·ªü ƒë·∫ßu: N√™u m·ª•c ƒë√≠ch, b·ªëi c·∫£nh\n‚Ä¢ N·ªôi dung ch√≠nh: Chia th√†nh c√°c ƒëo·∫°n logic\n‚Ä¢ K·∫øt lu·∫≠n: T√≥m t·∫Øt, ƒë·ªÅ xu·∫•t h√†nh ƒë·ªông\n‚Ä¢ Ch·ªØ k√Ω: Th√¥ng tin li√™n h·ªá ƒë·∫ßy ƒë·ªß",
                    formatting: "üé® ƒê·ªãnh d·∫°ng vƒÉn b·∫£n:\n‚Ä¢ Font ch·ªØ: Arial, Times New Roman\n‚Ä¢ C·ª° ch·ªØ: 12-14pt cho n·ªôi dung\n‚Ä¢ CƒÉn l·ªÅ: 2.5cm t·∫•t c·∫£ c√°c c·∫°nh\n‚Ä¢ Kho·∫£ng c√°ch d√≤ng: 1.5\n‚Ä¢ ƒê√°nh s·ªë trang, m·ª•c l·ª•c",
                    proofreading: "‚úÖ Ki·ªÉm tra v√† ch·ªânh s·ª≠a:\n‚Ä¢ Ki·ªÉm tra ch√≠nh t·∫£, ng·ªØ ph√°p\n‚Ä¢ ƒê·∫£m b·∫£o t√≠nh nh·∫•t qu√°n\n‚Ä¢ Xem l·∫°i logic v√† m·∫°ch l·∫°c\n‚Ä¢ Nh·ªù ƒë·ªìng nghi·ªáp review\n‚Ä¢ ƒê·ªçc l·∫°i tr∆∞·ªõc khi g·ª≠i"
                }
            },
            email: {
                basic: "D·∫°, v·ªÅ vi·∫øt email chuy√™n nghi·ªáp, t√¥i s·∫Ω h∆∞·ªõng d·∫´n b·∫°n c√°c nguy√™n t·∫Øc quan tr·ªçng ·∫°.",
                detailed: {
                    structure: "üìß C·∫•u tr√∫c email chuy√™n nghi·ªáp:\n‚Ä¢ Subject line: Ng·∫Øn g·ªçn, r√µ m·ª•c ƒë√≠ch\n‚Ä¢ L·ªùi ch√†o: Ph√π h·ª£p v·ªõi m·ªëi quan h·ªá\n‚Ä¢ M·ªü ƒë·∫ßu: N√™u l√Ω do vi·∫øt email\n‚Ä¢ N·ªôi dung: Ng·∫Øn g·ªçn, d·ªÖ hi·ªÉu\n‚Ä¢ K·∫øt th√∫c: L·ªùi c·∫£m ∆°n, ch·ªØ k√Ω",
                    templates: "üìã M·∫´u email th√¥ng d·ª•ng:\n‚Ä¢ Email xin vi·ªác: Chuy√™n nghi·ªáp, n√™u r√µ nƒÉng l·ª±c\n‚Ä¢ Email b√°o c√°o: C√≥ s·ªë li·ªáu, k·∫øt lu·∫≠n r√µ r√†ng\n‚Ä¢ Email ph·∫£n h·ªìi: Nhanh ch√≥ng, gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ\n‚Ä¢ Email c·∫£m ∆°n: Ch√¢n th√†nh, c·ª• th·ªÉ",
                    tips: "üí° M·∫πo vi·∫øt email hi·ªáu qu·∫£:\n‚Ä¢ Vi·∫øt ng·∫Øn g·ªçn, ƒëi th·∫≥ng v√†o v·∫•n ƒë·ªÅ\n‚Ä¢ S·ª≠ d·ª•ng ng√¥n ng·ªØ l·ªãch s·ª±, chuy√™n nghi·ªáp\n‚Ä¢ Ki·ªÉm tra k·ªπ tr∆∞·ªõc khi g·ª≠i\n‚Ä¢ Tr·∫£ l·ªùi trong v√≤ng 24h\n‚Ä¢ S·ª≠ d·ª•ng CC/BCC h·ª£p l√Ω"
                }
            },
            planning: {
                basic: "D·∫°, v·ªÅ l·∫≠p k·∫ø ho·∫°ch c√¥ng vi·ªác hi·ªáu qu·∫£, t√¥i s·∫Ω h∆∞·ªõng d·∫´n b·∫°n ph∆∞∆°ng ph√°p khoa h·ªçc ·∫°.",
                detailed: {
                    priority: "üéØ Ph√¢n lo·∫°i ∆∞u ti√™n:\n‚Ä¢ Quan tr·ªçng & Kh·∫©n c·∫•p: L√†m ngay\n‚Ä¢ Quan tr·ªçng & Kh√¥ng kh·∫©n c·∫•p: L√™n l·ªãch\n‚Ä¢ Kh√¥ng quan tr·ªçng & Kh·∫©n c·∫•p: ·ª¶y quy·ªÅn\n‚Ä¢ Kh√¥ng quan tr·ªçng & Kh√¥ng kh·∫©n c·∫•p: Lo·∫°i b·ªè",
                    tools: "üõ†Ô∏è C√¥ng c·ª• l·∫≠p k·∫ø ho·∫°ch:\n‚Ä¢ Trello: Qu·∫£n l√Ω d·ª± √°n tr·ª±c quan\n‚Ä¢ Asana: Theo d√µi ti·∫øn ƒë·ªô chi ti·∫øt\n‚Ä¢ Google Calendar: L√™n l·ªãch cu·ªôc h·ªçp\n‚Ä¢ Notion: Ghi ch√©p v√† t·ªï ch·ª©c\n‚Ä¢ Microsoft To Do: Danh s√°ch c√¥ng vi·ªác",
                    techniques: "üìä K·ªπ thu·∫≠t l·∫≠p k·∫ø ho·∫°ch:\n‚Ä¢ Pomodoro: L√†m vi·ªác 25 ph√∫t, ngh·ªâ 5 ph√∫t\n‚Ä¢ Time blocking: Chia th·ªùi gian theo kh·ªëi\n‚Ä¢ Getting Things Done (GTD): H·ªá th·ªëng qu·∫£n l√Ω c√¥ng vi·ªác\n‚Ä¢ Eisenhower Matrix: Ma tr·∫≠n ∆∞u ti√™n"
                }
            },
            report: {
                basic: "D·∫°, v·ªÅ t·∫°o b√°o c√°o chuy√™n nghi·ªáp, t√¥i s·∫Ω h∆∞·ªõng d·∫´n b·∫°n c·∫•u tr√∫c v√† ph∆∞∆°ng ph√°p ·∫°.",
                detailed: {
                    structure: "üìä C·∫•u tr√∫c b√°o c√°o chu·∫©n:\n‚Ä¢ T√≥m t·∫Øt ƒëi·ªÅu h√†nh (Executive Summary)\n‚Ä¢ M·ª•c l·ª•c (Table of Contents)\n‚Ä¢ Gi·ªõi thi·ªáu (Introduction)\n‚Ä¢ Ph∆∞∆°ng ph√°p (Methodology)\n‚Ä¢ K·∫øt qu·∫£ (Results)\n‚Ä¢ Ph√¢n t√≠ch (Analysis)\n‚Ä¢ K·∫øt lu·∫≠n v√† ƒë·ªÅ xu·∫•t (Conclusion & Recommendations)",
                    data: "üìà X·ª≠ l√Ω d·ªØ li·ªáu:\n‚Ä¢ Thu th·∫≠p d·ªØ li·ªáu ch√≠nh x√°c\n‚Ä¢ Ph√¢n t√≠ch th·ªëng k√™ c∆° b·∫£n\n‚Ä¢ T·∫°o bi·ªÉu ƒë·ªì, ƒë·ªì th·ªã tr·ª±c quan\n‚Ä¢ So s√°nh v·ªõi m·ª•c ti√™u, k·ª≥ tr∆∞·ªõc\n‚Ä¢ ƒê∆∞a ra insights c√≥ gi√° tr·ªã",
                    presentation: "üé® Tr√¨nh b√†y b√°o c√°o:\n‚Ä¢ S·ª≠ d·ª•ng template chuy√™n nghi·ªáp\n‚Ä¢ M√†u s·∫Øc nh·∫•t qu√°n, d·ªÖ ƒë·ªçc\n‚Ä¢ Font ch·ªØ r√µ r√†ng, k√≠ch th∆∞·ªõc ph√π h·ª£p\n‚Ä¢ Bi·ªÉu ƒë·ªì, h√¨nh ·∫£nh minh h·ªça\n‚Ä¢ ƒê√°nh s·ªë trang, m·ª•c l·ª•c"
                }
            },
            calendar: {
                basic: "D·∫°, v·ªÅ qu·∫£n l√Ω l·ªãch bi·ªÉu hi·ªáu qu·∫£, t√¥i s·∫Ω h∆∞·ªõng d·∫´n b·∫°n c√°c ph∆∞∆°ng ph√°p t·ªëi ∆∞u ·∫°.",
                detailed: {
                    organization: "üìÖ T·ªï ch·ª©c l·ªãch bi·ªÉu:\n‚Ä¢ L√™n l·ªãch cu·ªôc h·ªçp v√†o gi·ªù c·ªë ƒë·ªãnh\n‚Ä¢ D√†nh th·ªùi gian cho c√¥ng vi·ªác quan tr·ªçng\n‚Ä¢ ƒê·∫∑t buffer time gi·ªØa c√°c cu·ªôc h·ªçp\n‚Ä¢ L√™n l·ªãch ngh·ªâ ng∆°i, ƒÉn tr∆∞a\n‚Ä¢ Review l·ªãch v√†o cu·ªëi tu·∫ßn",
                    meetings: "ü§ù Qu·∫£n l√Ω cu·ªôc h·ªçp:\n‚Ä¢ G·ª≠i agenda tr∆∞·ªõc 24h\n‚Ä¢ ƒê·∫∑t th·ªùi gian b·∫Øt ƒë·∫ßu v√† k·∫øt th√∫c r√µ r√†ng\n‚Ä¢ Ghi ch√©p bi√™n b·∫£n cu·ªôc h·ªçp\n‚Ä¢ G·ª≠i follow-up email sau cu·ªôc h·ªçp\n‚Ä¢ Theo d√µi action items",
                    tools: "üõ†Ô∏è C√¥ng c·ª• qu·∫£n l√Ω l·ªãch:\n‚Ä¢ Google Calendar: ƒê·ªìng b·ªô ƒëa thi·∫øt b·ªã\n‚Ä¢ Outlook Calendar: T√≠ch h·ª£p v·ªõi email\n‚Ä¢ Calendly: L√™n l·ªãch t·ª± ƒë·ªông\n‚Ä¢ Microsoft Teams: L√™n l·ªãch cu·ªôc h·ªçp\n‚Ä¢ Zoom: L√™n l·ªãch video call"
                }
            },
            tools: {
                basic: "D·∫°, v·ªÅ c√°c c√¥ng c·ª• vƒÉn ph√≤ng h·ªØu √≠ch, t√¥i s·∫Ω gi·ªõi thi·ªáu nh·ªØng c√¥ng c·ª• ph·ªï bi·∫øn v√† hi·ªáu qu·∫£ ·∫°.",
                detailed: {
                    productivity: "‚ö° C√¥ng c·ª• tƒÉng nƒÉng su·∫•t:\n‚Ä¢ Notion: Ghi ch√©p, qu·∫£n l√Ω d·ª± √°n\n‚Ä¢ Slack: Giao ti·∫øp nh√≥m\n‚Ä¢ Zoom: H·ªçp tr·ª±c tuy·∫øn\n‚Ä¢ Canva: Thi·∫øt k·∫ø ƒë·ªì h·ªça\n‚Ä¢ Grammarly: Ki·ªÉm tra ng·ªØ ph√°p",
                    office: "üìÑ B·ªô c√¥ng c·ª• vƒÉn ph√≤ng:\n‚Ä¢ Microsoft Office 365: Word, Excel, PowerPoint\n‚Ä¢ Google Workspace: Docs, Sheets, Slides\n‚Ä¢ LibreOffice: Mi·ªÖn ph√≠, m√£ ngu·ªìn m·ªü\n‚Ä¢ WPS Office: T∆∞∆°ng th√≠ch t·ªët\n‚Ä¢ Apple iWork: Cho Mac, iOS",
                    automation: "ü§ñ T·ª± ƒë·ªông h√≥a c√¥ng vi·ªác:\n‚Ä¢ Zapier: K·∫øt n·ªëi c√°c ·ª©ng d·ª•ng\n‚Ä¢ IFTTT: T·ª± ƒë·ªông h√≥a ƒë∆°n gi·∫£n\n‚Ä¢ Microsoft Power Automate: T√≠ch h·ª£p Office\n‚Ä¢ Google Apps Script: T·ª± ƒë·ªông h√≥a Google Workspace\n‚Ä¢ Python: T·ª± ƒë·ªông h√≥a n√¢ng cao"
                }
            },
            time: {
                basic: "D·∫°, v·ªÅ qu·∫£n l√Ω th·ªùi gian hi·ªáu qu·∫£, t√¥i s·∫Ω chia s·∫ª c√°c ph∆∞∆°ng ph√°p ƒë√£ ƒë∆∞·ª£c ch·ª©ng minh ·∫°.",
                detailed: {
                    techniques: "‚è∞ K·ªπ thu·∫≠t qu·∫£n l√Ω th·ªùi gian:\n‚Ä¢ Pomodoro Technique: 25 ph√∫t l√†m vi·ªác, 5 ph√∫t ngh·ªâ\n‚Ä¢ Time Blocking: Chia th·ªùi gian th√†nh c√°c kh·ªëi\n‚Ä¢ 80/20 Rule: T·∫≠p trung v√†o 20% c√¥ng vi·ªác quan tr·ªçng\n‚Ä¢ Batch Processing: Nh√≥m c√°c c√¥ng vi·ªác t∆∞∆°ng t·ª±\n‚Ä¢ Two-Minute Rule: L√†m ngay vi·ªác d∆∞·ªõi 2 ph√∫t",
                    habits: "üîÑ Th√≥i quen t·ªët:\n‚Ä¢ L√™n l·ªãch bu·ªïi t·ªëi cho ng√†y mai\n‚Ä¢ ∆Øu ti√™n 3 vi·ªác quan tr·ªçng nh·∫•t\n‚Ä¢ T·∫Øt th√¥ng b√°o khi c·∫ßn t·∫≠p trung\n‚Ä¢ Ngh·ªâ ng∆°i ƒë·ªÅu ƒë·∫∑n\n‚Ä¢ Review v√† ƒëi·ªÅu ch·ªânh h√†ng tu·∫ßn",
                    distractions: "üö´ X·ª≠ l√Ω phi·ªÅn nhi·ªÖu:\n‚Ä¢ T·∫Øt th√¥ng b√°o ƒëi·ªán tho·∫°i\n‚Ä¢ S·ª≠ d·ª•ng ch·∫ø ƒë·ªô Focus Mode\n‚Ä¢ ƒê·∫∑t th·ªùi gian check email\n‚Ä¢ T·∫°o m√¥i tr∆∞·ªùng l√†m vi·ªác y√™n tƒ©nh\n‚Ä¢ S·ª≠ d·ª•ng ·ª©ng d·ª•ng ch·∫∑n website"
                }
            }
        };

        // Smart suggestions
        const smartSuggestions = [
            { text: 'H∆∞·ªõng d·∫´n vi·∫øt email chuy√™n nghi·ªáp', icon: 'üìß' },
            { text: 'C√°ch l·∫≠p k·∫ø ho·∫°ch c√¥ng vi·ªác hi·ªáu qu·∫£', icon: 'üìã' },
            { text: 'T·∫°o b√°o c√°o tu·∫ßn nh∆∞ th·∫ø n√†o?', icon: 'üìä' },
            { text: 'Qu·∫£n l√Ω th·ªùi gian t·ªët h∆°n', icon: '‚è∞' },
            { text: 'C√¥ng c·ª• vƒÉn ph√≤ng h·ªØu √≠ch', icon: 'üõ†Ô∏è' },
            { text: 'T·ªï ch·ª©c cu·ªôc h·ªçp hi·ªáu qu·∫£', icon: 'ü§ù' },
            { text: 'X·ª≠ l√Ω email nhanh ch√≥ng', icon: '‚ö°' },
            { text: 'T·∫°o template vƒÉn b·∫£n', icon: 'üìù' }
        ];

        useEffect(() => {
            // Welcome message with smart suggestions
            setTimeout(() => {
                addMessage(getRandomResponse(officeResponses.greeting), false, smartSuggestions);
            }, 1000);
        }, []);

        const addMessage = (text, isUser, suggestions = []) => {
            const messagesDiv = document.getElementById('messages');
            const messageBubble = document.createElement('div');
            messageBubble.classList.add('message-bubble', 'p-4', 'rounded-2xl', 'fade-in', 'max-w-xs', 'md:max-w-md');

            const senderIcon = document.createElement('div');
            senderIcon.classList.add('w-10', 'h-10', 'rounded-full', 'bg-gray-200', 'flex-shrink-0');
            const senderImg = document.createElement('img');
            senderImg.classList.add('w-10', 'h-10', 'rounded-full');

            const messageContent = document.createElement('div');
            messageContent.innerHTML = text.replace(/\n/g, '<br>');

            if (isUser) {
                messageBubble.classList.add('bg-gradient-to-r', 'from-blue-500', 'to-purple-600', 'text-white', 'self-end');
                senderImg.src = userProfile.avatar;
                const messageContainer = document.createElement('div');
                messageContainer.classList.add('flex', 'items-end', 'justify-end', 'space-x-3');
                messageContainer.appendChild(messageContent);
                messageContainer.appendChild(senderIcon);
                senderIcon.appendChild(senderImg);
                messageBubble.appendChild(messageContainer);
            } else {
                messageBubble.classList.add('bg-white', 'text-gray-800', 'self-start', 'shadow-lg');
                senderImg.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9InVybCgjZ3JhZGllbnQpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50IiB4MT0iMCIgeTE9IjAiIHgyPSIxIiB5Mj0iMSI+CjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM2NjdFRUE7c3RvcC1vcGFjaXR5OjEiLz4KPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojNzY0QkEyO3N0b3Atb3BhY2l0eToxIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+';
                const messageContainer = document.createElement('div');
                messageContainer.classList.add('flex', 'items-end', 'space-x-3');
                senderIcon.appendChild(senderImg);
                messageContainer.appendChild(senderIcon);
                messageContainer.appendChild(messageContent);
                messageBubble.appendChild(messageContainer);
            }
            
            const wrapper = document.createElement('div');
            wrapper.classList.add('flex', isUser ? 'justify-end' : 'justify-start');
            wrapper.appendChild(messageBubble);

            messagesDiv.appendChild(wrapper);

            // Add suggestions if provided
            if (suggestions.length > 0) {
                const suggestionsContainer = document.createElement('div');
                suggestionsContainer.classList.add('flex', 'flex-wrap', 'gap-2', 'mt-3', 'justify-start', 'pl-14');

                suggestions.forEach(suggestion => {
                    const button = document.createElement('button');
                    button.classList.add('suggestion-chip', 'bg-gradient-to-r', 'from-blue-100', 'to-purple-100', 'text-blue-800', 'px-4', 'py-2', 'rounded-full', 'text-sm', 'hover:from-blue-200', 'hover:to-purple-200', 'transition-all', 'duration-300', 'shadow-md');
                    button.innerHTML = `${suggestion.icon} ${suggestion.text}`;
                    button.onclick = () => handleSuggestionClick(suggestion.text);
                    suggestionsContainer.appendChild(button);
                });

                messagesDiv.appendChild(suggestionsContainer);
            }

            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        };

        const handleSuggestionClick = (text) => {
            const messageInput = document.getElementById('messageInput');
            messageInput.value = text;
            sendMessage();
        };

        const sendMessage = () => {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();

            if (message && !isTyping) {
                addMessage(message, true);
                messageInput.value = '';
                
                document.getElementById('sendButton').disabled = true;

                setTimeout(() => {
                    isTyping = true;
                    addTypingIndicator();
                }, 500);

                setTimeout(() => {
                    isTyping = false;
                    removeTypingIndicator();
                    const aiResponse = generateResponse(message);
                    addMessage(aiResponse, false);
                    
                    document.getElementById('sendButton').disabled = false;
                }, 2000 + Math.random() * 1000);
            }
        };

        const addTypingIndicator = () => {
            const messagesDiv = document.getElementById('messages');
            const typingIndicator = document.createElement('div');
            typingIndicator.id = 'typingIndicator';
            typingIndicator.classList.add('flex', 'items-center', 'space-x-2', 'self-start', 'pl-14', 'py-2');
            typingIndicator.innerHTML = `
                <div class="w-2 h-2 bg-gray-400 rounded-full typing-animation" style="animation-delay: 0s;"></div>
                <div class="w-2 h-2 bg-gray-400 rounded-full typing-animation" style="animation-delay: 0.2s;"></div>
                <div class="w-2 h-2 bg-gray-400 rounded-full typing-animation" style="animation-delay: 0.4s;"></div>
            `;
            messagesDiv.appendChild(typingIndicator);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        };

        const removeTypingIndicator = () => {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        };

        const handleKeyPress = (event) => {
            if (event.key === 'Enter') {
                sendMessage();
            }
        };

        const getRandomResponse = (responses) => {
            return responses[Math.floor(Math.random() * responses.length)];
        };
        
        const generateResponse = (userInput) => {
            userInput = userInput.toLowerCase();

            // Keyword matching
            if (userInput.includes('email') || userInput.includes('th∆∞')) {
                return officeResponses.email.detailed.structure + '\n\n' + officeResponses.email.detailed.tips;
            }
            if (userInput.includes('k·∫ø ho·∫°ch') || userInput.includes('l·∫≠p k·∫ø ho·∫°ch')) {
                return officeResponses.planning.detailed.priority + '\n\n' + officeResponses.planning.detailed.tools;
            }
            if (userInput.includes('b√°o c√°o') || userInput.includes('report')) {
                return officeResponses.report.detailed.structure + '\n\n' + officeResponses.report.detailed.data;
            }
            if (userInput.includes('l·ªãch') || userInput.includes('calendar')) {
                return officeResponses.calendar.detailed.organization + '\n\n' + officeResponses.calendar.detailed.meetings;
            }
            if (userInput.includes('c√¥ng c·ª•') || userInput.includes('tool')) {
                return officeResponses.tools.detailed.productivity + '\n\n' + officeResponses.tools.detailed.office;
            }
            if (userInput.includes('th·ªùi gian') || userInput.includes('time')) {
                return officeResponses.time.detailed.techniques + '\n\n' + officeResponses.time.detailed.habits;
            }
            if (userInput.includes('vƒÉn b·∫£n') || userInput.includes('document')) {
                return officeResponses.document.detailed.structure + '\n\n' + officeResponses.document.detailed.formatting;
            }

            // Fallback response
            const randomFollowUp = getRandomResponse(officeResponses.followUpQuestions);
            return `T√¥i ch∆∞a hi·ªÉu r√µ √Ω c·ªßa b·∫°n. B·∫°n c√≥ th·ªÉ h·ªèi v·ªÅ: "${randomFollowUp}" kh√¥ng?`;
        };

        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                addMessage(getRandomResponse(officeResponses.greeting), false, smartSuggestions);
            }, 1000);
        });
    </script>
</body>
</html> 