<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>V-AI - Zalo Mini App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #DBFFF8;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }
        .typing-animation {
            animation: typing 1.5s infinite;
        }
        @keyframes typing {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        .message-bubble {
            max-width: 85%;
            word-wrap: break-word;
        }
        .scroll-container {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .scroll-container::-webkit-scrollbar {
            display: none;
        }
        .career-card {
            transition: all 0.3s ease;
        }
        .career-card:active {
            transform: scale(0.95);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .zalo-header {
            background: #DBFFF8;
            color: #333;
            padding: 12px 16px;
            text-align: center;
            font-weight: 600;
            font-size: 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        #messages {
            max-height: 60vh;
            min-height: 200px;
            overflow-y: auto !important;
            scrollbar-width: thin;
            scrollbar-color: #60a5fa #e5e7eb;
        }
        #messages::-webkit-scrollbar {
            width: 8px;
            background: #e5e7eb;
        }
        #messages::-webkit-scrollbar-thumb {
            background: #60a5fa;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Career Selection Screen -->
    <div id="careerSelection" class="h-full overflow-y-auto">
        <div class="p-6">
            <!-- Welcome Section -->
            <div class="text-center mb-8 fade-in">
                <div class="bg-white bg-opacity-30 p-6 rounded-3xl mb-6 shadow-lg">
                    <div class="bg-white p-4 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center shadow-md">
                        <img src="boost.png" alt="V-AI Logo" class="min-w-20 min-h-20">
                    </div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-3">V-AI</h1>
                    <p class="text-gray-700 text-lg mb-2">D·ªÖ hi·ªÉu - D·ªÖ d√πng - D·ªÖ ·ª©ng d·ª•ng</p>
                </div>
            </div>

            <!-- Career Cards -->
            <div class="grid grid-cols-1 gap-6 w-full max-w-4xl mx-auto">
                <!-- Row 1 -->
                <div class="grid grid-cols-3 gap-6">
                    <!-- N√¥ng d√¢n -->
                    <div class="career-card bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center text-center h-full justify-between cursor-pointer hover:shadow-xl transition-all duration-300" onclick="selectCareer('farmer')">
                        <div class="flex flex-col items-center">
                            <div class="bg-green-100 p-4 rounded-full w-20 h-20 flex items-center justify-center mb-4">
                                <i data-lucide="leaf" class="w-10 h-10 text-green-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">N√¥ng d√¢n</h3>
                            <p class="text-gray-500 text-sm mb-4">Th·ªùi ti·∫øt, canh t√°c, s√¢u b·ªánh</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-xl w-full">
                            <p class="text-sm text-gray-700 mb-2 font-semibold">H·ªó tr·ª£:</p>
                            <ul class="text-sm text-gray-600 space-y-1 text-left">
                                <li>‚Ä¢ D·ª± b√°o th·ªùi ti·∫øt</li>
                                <li>‚Ä¢ K·ªπ thu·∫≠t canh t√°c</li>
                                <li>‚Ä¢ Ph√≤ng tr·ª´ s√¢u b·ªánh</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Doanh nh√¢n -->
                    <div class="career-card bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center text-center h-full justify-between cursor-pointer hover:shadow-xl transition-all duration-300" onclick="selectCareer('business')">
                        <div class="flex flex-col items-center">
                            <div class="bg-blue-100 p-4 rounded-full w-20 h-20 flex items-center justify-center mb-4">
                                <i data-lucide="briefcase" class="w-10 h-10 text-blue-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Doanh nh√¢n</h3>
                            <p class="text-gray-500 text-sm mb-4">Kinh doanh, marketing</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-xl w-full">
                            <p class="text-sm text-gray-700 mb-2 font-semibold">H·ªó tr·ª£:</p>
                            <ul class="text-sm text-gray-600 space-y-1 text-left">
                                <li>‚Ä¢ Chi·∫øn l∆∞·ª£c kinh doanh</li>
                                <li>‚Ä¢ Digital marketing</li>
                                <li>‚Ä¢ Ph√¢n t√≠ch th·ªã tr∆∞·ªùng</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Gi√°o vi√™n -->
                    <div class="career-card bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center text-center h-full justify-between cursor-pointer hover:shadow-xl transition-all duration-300" onclick="selectCareer('teacher')">
                        <div class="flex flex-col items-center">
                            <div class="bg-purple-100 p-4 rounded-full w-20 h-20 flex items-center justify-center mb-4">
                                <i data-lucide="book-open" class="w-10 h-10 text-purple-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Gi√°o vi√™n</h3>
                            <p class="text-gray-500 text-sm mb-4">Gi·∫£ng d·∫°y, gi√°o √°n</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-xl w-full">
                            <p class="text-sm text-gray-700 mb-2 font-semibold">H·ªó tr·ª£:</p>
                            <ul class="text-sm text-gray-600 space-y-1 text-left">
                                <li>‚Ä¢ So·∫°n gi√°o √°n</li>
                                <li>‚Ä¢ Ph∆∞∆°ng ph√°p d·∫°y</li>
                                <li>‚Ä¢ Qu·∫£n l√Ω l·ªõp h·ªçc</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Row 2 -->
                <div class="grid grid-cols-3 gap-6">
                    <!-- L·∫≠p tr√¨nh vi√™n -->
                    <div class="career-card bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center text-center h-full justify-between cursor-pointer hover:shadow-xl transition-all duration-300" onclick="selectCareer('developer')">
                        <div class="flex flex-col items-center">
                            <div class="bg-indigo-100 p-4 rounded-full w-20 h-20 flex items-center justify-center mb-4">
                                <i data-lucide="code" class="w-10 h-10 text-indigo-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">L·∫≠p tr√¨nh vi√™n</h3>
                            <p class="text-gray-500 text-sm mb-4">Coding, debug, framework</p>
                        </div>
                        <div class="bg-indigo-50 p-4 rounded-xl w-full">
                            <p class="text-sm text-gray-700 mb-2 font-semibold">H·ªó tr·ª£:</p>
                            <ul class="text-sm text-gray-600 space-y-1 text-left">
                                <li>‚Ä¢ Best practices</li>
                                <li>‚Ä¢ Debug & testing</li>
                                <li>‚Ä¢ Framework & c√¥ng ngh·ªá</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Nh√¢n vi√™n b√°n h√†ng -->
                    <div class="career-card bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center text-center h-full justify-between cursor-pointer hover:shadow-xl transition-all duration-300" onclick="selectCareer('sales')">
                        <div class="flex flex-col items-center">
                            <div class="bg-orange-100 p-4 rounded-full w-20 h-20 flex items-center justify-center mb-4">
                                <i data-lucide="shopping-cart" class="w-10 h-10 text-orange-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Nh√¢n vi√™n b√°n h√†ng</h3>
                            <p class="text-gray-500 text-sm mb-4">T∆∞ v·∫•n, CSKH, sales</p>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-xl w-full">
                            <p class="text-sm text-gray-700 mb-2 font-semibold">H·ªó tr·ª£:</p>
                            <ul class="text-sm text-gray-600 space-y-1 text-left">
                                <li>‚Ä¢ K·ªπ nƒÉng b√°n h√†ng</li>
                                <li>‚Ä¢ ChƒÉm s√≥c kh√°ch h√†ng</li>
                                <li>‚Ä¢ Qu·∫£n l√Ω ƒë∆°n h√†ng</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Nh√¢n vi√™n vƒÉn ph√≤ng -->
                    <div class="career-card bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center text-center h-full justify-between cursor-pointer hover:shadow-xl transition-all duration-300" onclick="selectCareer('office')">
                        <div class="flex flex-col items-center">
                            <div class="bg-teal-100 p-4 rounded-full w-20 h-20 flex items-center justify-center mb-4">
                                <i data-lucide="building" class="w-10 h-10 text-teal-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Nh√¢n vi√™n vƒÉn ph√≤ng</h3>
                            <p class="text-gray-500 text-sm mb-4">H√†nh ch√≠nh, qu·∫£n l√Ω</p>
                        </div>
                        <div class="bg-teal-50 p-4 rounded-xl w-full">
                            <p class="text-sm text-gray-700 mb-2 font-semibold">H·ªó tr·ª£:</p>
                            <ul class="text-sm text-gray-600 space-y-1 text-left">
                                <li>‚Ä¢ Qu·∫£n l√Ω t√†i li·ªáu</li>
                                <li>‚Ä¢ K·∫ø ho·∫°ch c√¥ng vi·ªác</li>
                                <li>‚Ä¢ C√¥ng c·ª• vƒÉn ph√≤ng</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other option -->
            <div class="text-center mt-8">
                <button onclick="selectCareer('other')" class="bg-white bg-opacity-80 hover:bg-opacity-100 px-6 py-3 rounded-full text-gray-700 font-medium transition-all duration-300 shadow-lg hover:shadow-xl">
                    <i data-lucide="more-horizontal" class="w-5 h-5 inline mr-2"></i>
                    Ngh·ªÅ kh√°c
                </button>
            </div>
        </div>
    </div>

    <!-- Main App (Hidden initially) -->
    <div id="mainApp" class="hidden h-full flex flex-col">
        <!-- Info Bar -->
        <div class="bg-white shadow-sm p-4 text-center">
            <div class="flex items-center justify-between">
                <button onclick="changeCareer()" class="text-gray-600 hover:text-gray-800 p-2 rounded-full hover:bg-gray-100">
                    <i data-lucide="arrow-left" class="w-5 h-5"></i>
                </button>
                <div>
                    <h2 class="text-gray-800 font-semibold text-lg" id="careerTitle">Tr·ª£ l√Ω AI</h2>
                    <p class="text-gray-500 text-sm" id="userInfo">Ch√†o m·ª´ng b·∫°n!</p>
                </div>
                <button onclick="shareApp()" class="text-gray-600 hover:text-gray-800 p-2 rounded-full hover:bg-gray-100">
                    <i data-lucide="share" class="w-5 h-5"></i>
                </button>
            </div>
        </div>

        <!-- Chat Interface -->
        <div class="flex-1 flex flex-col bg-white">
            <!-- Messages -->
            <div id="messages" class="flex-1 overflow-y-auto p-4 space-y-4 scroll-container">
                <!-- Messages will be added here -->
            </div>

            <!-- Input -->
            <div class="p-4 bg-white border-t">
                <div class="flex space-x-3">
                    <input
                        type="text"
                        id="messageInput"
                        placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..."
                        class="flex-1 px-4 py-3 border border-gray-200 rounded-full bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-800"
                        onkeypress="handleKeyPress(event)"
                    />
                    <button
                        onclick="sendMessage()"
                        id="sendButton"
                        class="px-6 py-3 bg-blue-500 text-white rounded-full hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm"
                    >
                        <i data-lucide="send" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        let currentCareer = '';
        let isTyping = false;
        let userProfile = JSON.parse(localStorage.getItem('userProfile')) || {};

        console.log('Script initialized'); // Debug log
        console.log('userProfile:', userProfile); // Debug log
        console.log('currentCareer:', currentCareer); // Debug log

        // Career-specific AI responses
        const careerResponses = {
            farmer: {
                title: "N√¥ngTr√≠ AI",
                greeting: [
                    "Ch√†o ch√∫/c√¥! Ch√°u l√† N√¥ngTr√≠, chuy√™n gia n√¥ng nghi·ªáp ƒë√¢y ·∫°! üå±\n\nCh√°u c√≥ th·ªÉ gi√∫p ch√∫/c√¥ v·ªõi:\n‚Ä¢ Th√¥ng tin th·ªùi ti·∫øt chi ti·∫øt\n‚Ä¢ K·ªπ thu·∫≠t canh t√°c hi·ªán ƒë·∫°i\n‚Ä¢ Ph√≤ng tr·ª´ s√¢u b·ªánh\n‚Ä¢ D·ª± b√°o gi√° n√¥ng s·∫£n\n‚Ä¢ Nh·∫Øc nh·ªü c√¥ng vi·ªác h√†ng ng√†y\n\nCh√∫/c√¥ c·∫ßn ch√°u h·ªó tr·ª£ g√¨ h√¥m nay ·∫°?",
                    "Xin ch√†o! Ch√°u N√¥ngTr√≠ ƒë√¢y ·∫°! S·∫µn s√†ng h·ªó tr·ª£ ch√∫/c√¥ trong c√¥ng vi·ªác n√¥ng nghi·ªáp. Ch√∫/c√¥ c√≥ th·ªÉ h·ªèi ch√°u v·ªÅ th·ªùi ti·∫øt, k·ªπ thu·∫≠t tr·ªìng tr·ªçt, chƒÉn nu√¥i, ho·∫∑c b·∫•t k·ª≥ v·∫•n ƒë·ªÅ n√†o kh√°c nh√©!"
                ],
                askDetail: "ƒê·ªÉ ch√°u c√≥ th·ªÉ h·ªó tr·ª£ t·ªët h∆°n, ch√∫/c√¥ c√≥ th·ªÉ cho ch√°u bi·∫øt:\n‚Ä¢ Ch√∫/c√¥ ƒëang tr·ªìng lo·∫°i c√¢y g√¨?\n‚Ä¢ Di·ªán t√≠ch canh t√°c c·ªßa ch√∫/c√¥?\n‚Ä¢ Ch√∫/c√¥ ƒë√£ l√†m n√¥ng nghi·ªáp ƒë∆∞·ª£c bao l√¢u?",
                followUpQuestions: [
                    "Ch√∫/c√¥ ƒëang tr·ªìng lo·∫°i c√¢y g√¨?",
                    "Di·ªán t√≠ch canh t√°c c·ªßa ch√∫/c√¥ l√† bao nhi√™u?",
                    "Ch√∫/c√¥ g·∫∑p kh√≥ khƒÉn g√¨ v·ªÅ s√¢u b·ªánh?",
                    "Ch√∫/c√¥ mu·ªën tƒÉng nƒÉng su·∫•t nh∆∞ th·∫ø n√†o?",
                    "Th·ªùi ti·∫øt hi·ªán t·∫°i ·∫£nh h∆∞·ªüng g√¨ ƒë·∫øn c√¢y tr·ªìng?",
                    "Ch√∫/c√¥ c√≥ nu√¥i g√†, v·ªãt g√¨ kh√¥ng?",
                    "Ch√∫/c√¥ mu·ªën bi·∫øt v·ªÅ k·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi kh√¥ng?",
                    "Ch√∫/c√¥ c·∫ßn th√¥ng tin gi√° n√¥ng s·∫£n kh√¥ng?"
                ],
                weather: [
                    "D·∫°, h√¥m nay th·ªùi ti·∫øt kh√° thu·∫≠n l·ª£i cho vi·ªác canh t√°c ·∫°. Nhi·ªát ƒë·ªô 28¬∞C, ƒë·ªô ·∫©m 75% - ƒëi·ªÅu ki·ªán t·ªët cho c√¢y tr·ªìng ph√°t tri·ªÉn.",
                    "D·ª± b√°o th·ªùi ti·∫øt cho ng√†y mai: N·∫Øng nh·∫π, nhi·ªát ƒë·ªô 26-30¬∞C. ƒê√¢y l√† th·ªùi ƒëi·ªÉm t·ªët ƒë·ªÉ b√≥n ph√¢n v√† t∆∞·ªõi n∆∞·ªõc ·∫°."
                ],
                farming: [
                    "D·∫°, ƒë·ªÉ tƒÉng nƒÉng su·∫•t c√¢y tr·ªìng, ch√∫/c√¥ n√™n: 1) T∆∞·ªõi n∆∞·ªõc ƒë·ªÅu ƒë·∫∑n v√†o s√°ng s·ªõm, 2) B√≥n ph√¢n h·ªØu c∆°, 3) Ki·ªÉm tra s√¢u b·ªánh th∆∞·ªùng xuy√™n ·∫°.",
                    "K·ªπ thu·∫≠t canh t√°c hi·ªán ƒë·∫°i: S·ª≠ d·ª•ng h·ªá th·ªëng t∆∞·ªõi nh·ªè gi·ªçt, tr·ªìng xen canh, v√† √°p d·ª•ng IPM (Qu·∫£n l√Ω d·ªãch h·∫°i t·ªïng h·ª£p) ·∫°."
                ],
                pest: [
                    "D·∫°, ƒë·ªÉ ph√≤ng tr·ª´ s√¢u b·ªánh hi·ªáu qu·∫£: 1) Th∆∞·ªùng xuy√™n ki·ªÉm tra c√¢y tr·ªìng, 2) S·ª≠ d·ª•ng thu·ªëc sinh h·ªçc, 3) Duy tr√¨ ƒëa d·∫°ng sinh h·ªçc trong v∆∞·ªùn ·∫°.",
                    "C√°c lo·∫°i thu·ªëc sinh h·ªçc an to√†n: Bacillus thuringiensis, Beauveria bassiana, v√† c√°c ch·∫ø ph·∫©m t·ª´ neem ·∫°."
                ],
                rice: {
                    basic: "D·∫°, v·ªÅ tr·ªìng l√∫a ·ªü mi·ªÅn T√¢y, ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ chi ti·∫øt v·ªÅ b√≥n ph√¢n v√† chƒÉm s√≥c hi·ªáu qu·∫£ ·∫°.",
                    detailed: {
                        season: "üåæ Th·ªùi v·ª• tr·ªìng l√∫a mi·ªÅn T√¢y:\n‚Ä¢ V·ª• ƒê√¥ng Xu√¢n: Th√°ng 11-3\n‚Ä¢ V·ª• H√® Thu: Th√°ng 4-8\n‚Ä¢ V·ª• Thu ƒê√¥ng: Th√°ng 8-11",
                        fertilizer: "üí© B√≥n ph√¢n cho l√∫a:\n‚Ä¢ B√≥n l√≥t: Ph√¢n chu·ªìng + NPK 20-20-15\n‚Ä¢ B√≥n th√∫c l·∫ßn 1 (7-10 ng√†y): NPK 20-20-15\n‚Ä¢ B√≥n th√∫c l·∫ßn 2 (25-30 ng√†y): NPK 16-16-8\n‚Ä¢ B√≥n ƒë√≥n ƒë√≤ng: NPK 12-12-17",
                        care: "üå± ChƒÉm s√≥c l√∫a:\n‚Ä¢ T∆∞·ªõi n∆∞·ªõc: Gi·ªØ m·ª±c n∆∞·ªõc 3-5cm\n‚Ä¢ L√†m c·ªè: 2-3 l·∫ßn/v·ª•\n‚Ä¢ Ph√≤ng b·ªánh: ƒê·∫°o √¥n, kh√¥ v·∫±n\n‚Ä¢ Thu ho·∫°ch: Khi l√∫a ch√≠n 85-90%"
                    }
                },
                chili: {
                    basic: "D·∫°, v·ªÅ c√¢y ·ªõt b·ªã v√†ng l√° v√† r·ª•ng tr√°i, c√≥ th·ªÉ do n·∫•m ho·∫∑c thi·∫øu dinh d∆∞·ª°ng. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ c√°ch x·ª≠ l√Ω ·∫°.",
                    detailed: {
                        disease: "ü¶† B·ªánh th∆∞·ªùng g·∫∑p tr√™n ·ªõt:\n‚Ä¢ B·ªánh th√°n th∆∞: ƒê·ªëm n√¢u, th·ªëi tr√°i\n‚Ä¢ B·ªánh h√©o r≈©: Do n·∫•m Fusarium\n‚Ä¢ B·ªánh ƒë·ªëm l√°: Do vi khu·∫©n\n‚Ä¢ B·ªánh virus: L√° v√†ng, c√≤i c·ªçc",
                        treatment: "üíä C√°ch x·ª≠ l√Ω:\n‚Ä¢ Phun thu·ªëc sinh h·ªçc: Trichoderma, Bacillus\n‚Ä¢ Thu·ªëc h√≥a h·ªçc: Mancozeb, Copper\n‚Ä¢ C√°ch ly c√¢y b·ªã b·ªánh\n‚Ä¢ V·ªá sinh v∆∞·ªùn th∆∞·ªùng xuy√™n",
                        nutrition: "üåø Thi·∫øu dinh d∆∞·ª°ng:\n‚Ä¢ Thi·∫øu N: L√° v√†ng nh·∫°t\n‚Ä¢ Thi·∫øu P: L√° t√≠m, r·ªÖ k√©m\n‚Ä¢ Thi·∫øu K: L√° v√†ng vi·ªÅn, r·ª•ng tr√°i\n‚Ä¢ B√≥n ph√¢n c√¢n ƒë·ªëi NPK"
                    }
                },
                chicken: {
                    basic: "D·∫°, v·ªÅ g√† th·∫£ v∆∞·ªùn ƒÉn √≠t v√† ti√™u ch·∫£y, c√≥ th·ªÉ do b·ªánh ho·∫∑c th·ª©c ƒÉn. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ c√°ch x·ª≠ l√Ω ·∫°.",
                    detailed: {
                        disease: "üêî B·ªánh th∆∞·ªùng g·∫∑p:\n‚Ä¢ B·ªánh Newcastle: Ti√™u ch·∫£y, th·ªü kh√≥\n‚Ä¢ B·ªánh Gumboro: Ti√™u ch·∫£y tr·∫Øng\n‚Ä¢ B·ªánh c·∫ßu tr√πng: Ti√™u ch·∫£y c√≥ m√°u\n‚Ä¢ B·ªánh E.coli: Ti√™u ch·∫£y, b·ªè ƒÉn",
                        treatment: "üíä C√°ch x·ª≠ l√Ω:\n‚Ä¢ C√°ch ly g√† b·ªã b·ªánh\n‚Ä¢ V·ªá sinh chu·ªìng tr·∫°i\n‚Ä¢ B·ªï sung vitamin, ƒëi·ªán gi·∫£i\n‚Ä¢ Thu·ªëc kh√°ng sinh n·∫øu c·∫ßn",
                        prevention: "üõ°Ô∏è Ph√≤ng b·ªánh:\n‚Ä¢ Ti√™m ph√≤ng ƒë·∫ßy ƒë·ªß\n‚Ä¢ V·ªá sinh chu·ªìng tr·∫°i\n‚Ä¢ Th·ª©c ƒÉn s·∫°ch, n∆∞·ªõc s·∫°ch\n‚Ä¢ Ki·ªÉm tra s·ª©c kh·ªèe ƒë·ªãnh k·ª≥"
                    }
                },
                melon: {
                    basic: "D·∫°, d∆∞a l∆∞·ªõi l√† c√¢y tr·ªìng c√≥ gi√° tr·ªã kinh t·∫ø cao. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ k·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi t·ª´ A-Z ƒë·ªÉ ƒë·∫°t nƒÉng su·∫•t t·ªëi ∆∞u ·∫°.",
                    detailed: {
                        season: "üçà Th·ªùi v·ª• tr·ªìng d∆∞a l∆∞·ªõi:\n‚Ä¢ Mi·ªÅn Nam: Th√°ng 11-4 (m√πa kh√¥)\n‚Ä¢ Mi·ªÅn B·∫Øc: Th√°ng 2-4 v√† 8-10\n‚Ä¢ Tr√°nh m√πa m∆∞a ƒë·ªÉ gi·∫£m b·ªánh\n‚Ä¢ Nhi·ªát ƒë·ªô l√Ω t∆∞·ªüng: 25-30¬∞C",
                        soil: "ü™¥ Chu·∫©n b·ªã ƒë·∫•t:\n‚Ä¢ ƒê·∫•t t∆°i x·ªëp, cao r√°o, tho√°t n∆∞·ªõc t·ªët\n‚Ä¢ pH: 6.0-7.0\n‚Ä¢ Tr·ªôn: ƒê·∫•t + ph√¢n b√≤ hoai + tro tr·∫•u + trichoderma\n‚Ä¢ C√≥ th·ªÉ tr·ªìng trong th√πng x·ªëp, bao xi mƒÉng",
                        seeding: "üå± Gieo h·∫°t:\n‚Ä¢ Ng√¢m h·∫°t n∆∞·ªõc ·∫•m (2 s√¥i:3 l·∫°nh) 6-8h\n‚Ä¢ ·ª¶ khƒÉn ·∫©m 1 ng√†y\n‚Ä¢ Gieo v√†o b·∫ßu ∆∞∆°m ho·∫∑c th·∫≥ng ch·∫≠u\n‚Ä¢ Sau 7-10 ng√†y c√¢y cao 10-15cm th√¨ tr·ªìng",
                        care: "üßë‚Äçüåæ ChƒÉm s√≥c:\n‚Ä¢ T∆∞·ªõi n∆∞·ªõc m·ªói s√°ng, tr√°nh t·ªëi\n‚Ä¢ B√≥n ph√¢n:\n  - 7 ng√†y: NPK 16-16-8 pha lo√£ng\n  - 15-20 ng√†y: Ph√¢n h·ªØu c∆° vi sinh\n  - Khi ra hoa: Ph√¢n Kali cao",
                        pollination: "üåº Th·ª• ph·∫•n:\n‚Ä¢ Th·ª• ph·∫•n b·∫±ng tay (s√°ng s·ªõm tr∆∞·ªõc 9h)\n‚Ä¢ L·∫•y nh·ª•y ƒë·ª±c ch·∫•m nh·ª•y c√°i\n‚Ä¢ Hoa c√°i c√≥ b·∫ßu nh·ªè d∆∞·ªõi ƒë√°y\n‚Ä¢ Quan tr·ªçng cho nƒÉng su·∫•t",
                        trellis: "üï∏Ô∏è L√†m gi√†n:\n‚Ä¢ Gi√†n ch·ªØ A ho·∫∑c treo d√¢y nylon\n‚Ä¢ Gi√∫p tr√°i s·∫°ch, kh√¥ng m√©o\n‚Ä¢ C√¢y leo c·∫ßn h·ªó tr·ª£\n‚Ä¢ Kho·∫£ng c√°ch gi√†n: 1.5-2m",
                        disease: "üêõ Ph√≤ng b·ªánh:\n‚Ä¢ N·∫•m h·∫°i r·ªÖ, r·ªâ tr·∫Øng, b·ªç trƒ©\n‚Ä¢ Thu·ªëc sinh h·ªçc: Trichoderma, Radiant, Abamectin\n‚Ä¢ Duy tr√¨ ƒë·ªô ·∫©m v·ª´a ph·∫£i\n‚Ä¢ V·ªá sinh v∆∞·ªùn th∆∞·ªùng xuy√™n",
                        harvest: "‚è± Thu ho·∫°ch:\n‚Ä¢ Sau 65-75 ng√†y\n‚Ä¢ V·ªè chuy·ªÉn v√†ng nh·∫°t\n‚Ä¢ C√≥ l∆∞·ªõi r√µ, th∆°m nh·∫π\n‚Ä¢ NƒÉng su·∫•t: 2-3kg/tr√°i"
                    },
                    tips: [
                        "Ch·ªçn gi·ªëng d∆∞a l∆∞·ªõi ch·∫•t l∆∞·ª£ng cao",
                        "L√†m gi√†n ngay t·ª´ ƒë·∫ßu ƒë·ªÉ c√¢y leo t·ªët",
                        "Th·ª• ph·∫•n ƒë√∫ng th·ªùi ƒëi·ªÉm ƒë·ªÉ ƒë·∫≠u tr√°i nhi·ªÅu",
                        "B√≥n ph√¢n c√¢n ƒë·ªëi ƒë·ªÉ tr√°i ng·ªçt",
                        "Ph√≤ng b·ªánh s·ªõm ƒë·ªÉ tr√°nh thi·ªát h·∫°i"
                    ]
                },
                durian: {
                    basic: "D·∫°, v·ªÅ c√¢y s·∫ßu ri√™ng giai ƒëo·∫°n ra hoa, ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ lo·∫°i ph√¢n ph√π h·ª£p ·∫°.",
                    detailed: {
                        flowering: "üå∏ Giai ƒëo·∫°n ra hoa:\n‚Ä¢ D√πng ph√¢n b√≥n l√° c√≥ Bo cao\n‚Ä¢ NPK 15-30-15 ho·∫∑c 10-30-20\n‚Ä¢ B√≥n qua l√° 2-3 l·∫ßn\n‚Ä¢ T∆∞·ªõi n∆∞·ªõc ƒë·ªÅu ƒë·∫∑n",
                        care: "üå≥ ChƒÉm s√≥c s·∫ßu ri√™ng:\n‚Ä¢ T·ªâa c√†nh t·∫°o t√°n\n‚Ä¢ B√≥n ph√¢n h·ªØu c∆° g·ªëc\n‚Ä¢ Ph√≤ng b·ªánh th√°n th∆∞\n‚Ä¢ Th·ª• ph·∫•n nh√¢n t·∫°o n·∫øu c·∫ßn"
                    }
                },
                coffee: {
                    basic: "D·∫°, v·ªÅ c√¢y c√† ph√™, ch√°u s·∫Ω nh·∫Øc ch√∫/c√¥ b√≥n ph√¢n ƒë·ªãnh k·ª≥ v√†o s√°ng th·ª© B·∫£y h√†ng tu·∫ßn ·∫°.",
                    detailed: {
                        schedule: "üìÖ L·ªãch b√≥n ph√¢n c√† ph√™:\n‚Ä¢ Th√°ng 2-3: B√≥n ph√¢n h·ªØu c∆°\n‚Ä¢ Th√°ng 4-5: NPK 20-20-15\n‚Ä¢ Th√°ng 6-7: NPK 16-16-8\n‚Ä¢ Th√°ng 8-9: NPK 12-12-17",
                        reminder: "‚è∞ Nh·∫Øc nh·ªü:\n‚Ä¢ B√≥n ph√¢n v√†o s√°ng th·ª© B·∫£y\n‚Ä¢ T∆∞·ªõi n∆∞·ªõc sau khi b√≥n\n‚Ä¢ Ki·ªÉm tra s√¢u b·ªánh\n‚Ä¢ Ghi ch√©p ƒë·ªÉ theo d√µi"
                    }
                },
                price: {
                    basic: "D·∫°, v·ªÅ gi√° n√¥ng s·∫£n, ch√°u s·∫Ω c·∫≠p nh·∫≠t th√¥ng tin m·ªõi nh·∫•t cho ch√∫/c√¥ ·∫°.",
                    detailed: {
                        rice: "üåæ Gi√° l√∫a IR50404 Long An:\n‚Ä¢ H√¥m nay: 7,200-7,500 ƒë/kg\n‚Ä¢ Tu·∫ßn tr∆∞·ªõc: 7,000-7,300 ƒë/kg\n‚Ä¢ Xu h∆∞·ªõng: TƒÉng nh·∫π\n‚Ä¢ Khuy·∫øn ngh·ªã: B√°n t·ª´ng ph·∫ßn",
                        fruit: "üçé Gi√° tr√°i c√¢y:\n‚Ä¢ Xo√†i: 15,000-25,000 ƒë/kg\n‚Ä¢ S·∫ßu ri√™ng: 80,000-120,000 ƒë/kg\n‚Ä¢ D∆∞a l∆∞·ªõi: 25,000-35,000 ƒë/kg\n‚Ä¢ C√† ph√™: 45,000-55,000 ƒë/kg"
                    }
                },
                weed: {
                    basic: "D·∫°, v·ªÅ k·ªπ thu·∫≠t di·ªát c·ªè hi·ªáu qu·∫£, ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ c√°c ph∆∞∆°ng ph√°p an to√†n v√† hi·ªáu qu·∫£ ·∫°.",
                    detailed: {
                        manual: "üë®‚Äçüåæ Di·ªát c·ªè th·ªß c√¥ng:\n‚Ä¢ Nh·ªï c·ªè b·∫±ng tay: Hi·ªáu qu·∫£, an to√†n\n‚Ä¢ C·∫Øt c·ªè b·∫±ng li·ªÅm: Nhanh, ti·∫øt ki·ªám\n‚Ä¢ L√†m c·ªè ƒë·ªãnh k·ª≥: 2-3 l·∫ßn/v·ª•\n‚Ä¢ Th·ªùi ƒëi·ªÉm: S√°ng s·ªõm ho·∫∑c chi·ªÅu m√°t",
                        chemical: "üß™ Thu·ªëc di·ªát c·ªè:\n‚Ä¢ Glyphosate: Di·ªát c·ªè to√†n di·ªán\n‚Ä¢ 2,4-D: Di·ªát c·ªè l√° r·ªông\n‚Ä¢ Paraquat: Di·ªát c·ªè ti·∫øp x√∫c\n‚Ä¢ L∆∞u √Ω: ƒê·ªçc k·ªπ h∆∞·ªõng d·∫´n, b·∫£o h·ªô ƒë·∫ßy ƒë·ªß",
                        organic: "üå± Di·ªát c·ªè h·ªØu c∆°:\n‚Ä¢ Mu·ªëi: R·∫£i mu·ªëi v√†o g·ªëc c·ªè\n‚Ä¢ Gi·∫•m: Phun gi·∫•m tr·∫Øng 5%\n‚Ä¢ N∆∞·ªõc s√¥i: ƒê·ªï n∆∞·ªõc s√¥i v√†o g·ªëc\n‚Ä¢ Che ph·ªß: D√πng b·∫°t, r∆°m r·∫°",
                        prevention: "üõ°Ô∏è Ph√≤ng ng·ª´a c·ªè:\n‚Ä¢ Tr·ªìng d√†y: Gi·∫£m √°nh s√°ng ƒë·∫øn ƒë·∫•t\n‚Ä¢ Che ph·ªß: R∆°m r·∫°, b·∫°t nilon\n‚Ä¢ Lu√¢n canh: Thay ƒë·ªïi c√¢y tr·ªìng\n‚Ä¢ V·ªá sinh: D·ªçn s·∫°ch c·ªè quanh v∆∞·ªùn"
                    }
                }
            },
            business: {
                title: "Tr·ª£ l√Ω Doanh nh√¢n",
                greeting: [
                    "Ch√†o b·∫°n! T√¥i l√† V-AI, tr·ª£ l√Ω th√¥ng minh cho doanh nh√¢n. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n v·ªõi chi·∫øn l∆∞·ª£c kinh doanh, marketing, v√† qu·∫£n l√Ω. B·∫°n c·∫ßn t√¥i h·ªó tr·ª£ g√¨ h√¥m nay?",
                    "Xin ch√†o! T√¥i s·∫µn s√†ng h·ªó tr·ª£ b·∫°n trong c√¥ng vi·ªác kinh doanh. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ marketing, t√†i ch√≠nh, ho·∫∑c qu·∫£n l√Ω doanh nghi·ªáp."
                ],
                askDetail: "ƒê·ªÉ t√¥i c√≥ th·ªÉ h·ªó tr·ª£ t·ªët h∆°n, b·∫°n c√≥ th·ªÉ cho t√¥i bi·∫øt:\n‚Ä¢ B·∫°n kinh doanh lƒ©nh v·ª±c g√¨?\n‚Ä¢ Quy m√¥ doanh nghi·ªáp c·ªßa b·∫°n?\n‚Ä¢ M·ª•c ti√™u kinh doanh hi·ªán t·∫°i?",
                followUpQuestions: [
                    "B·∫°n kinh doanh lƒ©nh v·ª±c g√¨?",
                    "Quy m√¥ doanh nghi·ªáp c·ªßa b·∫°n?",
                    "B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong marketing?",
                    "B·∫°n mu·ªën m·ªü r·ªông th·ªã tr∆∞·ªùng nh∆∞ th·∫ø n√†o?",
                    "Doanh thu hi·ªán t·∫°i c·ªßa b·∫°n ra sao?"
                ],
                strategy: [
                    "ƒê·ªÉ ph√°t tri·ªÉn doanh nghi·ªáp hi·ªáu qu·∫£: 1) Ph√¢n t√≠ch th·ªã tr∆∞·ªùng m·ª•c ti√™u, 2) X√¢y d·ª±ng chi·∫øn l∆∞·ª£c marketing, 3) T·ªëi ∆∞u h√≥a quy tr√¨nh v·∫≠n h√†nh.",
                    "Chi·∫øn l∆∞·ª£c kinh doanh hi·ªán ƒë·∫°i: S·ª≠ d·ª•ng digital marketing, ph√¢n t√≠ch d·ªØ li·ªáu kh√°ch h√†ng, v√† √°p d·ª•ng c√¥ng ngh·ªá 4.0."
                ],
                marketing: [
                    "C√°c k√™nh marketing hi·ªáu qu·∫£: 1) Social media marketing, 2) Content marketing, 3) Email marketing, 4) SEO/SEM.",
                    "ƒê·ªÉ tƒÉng doanh s·ªë: T·∫≠p trung v√†o tr·∫£i nghi·ªám kh√°ch h√†ng, x√¢y d·ª±ng th∆∞∆°ng hi·ªáu m·∫°nh, v√† s·ª≠ d·ª•ng data analytics."
                ],
                finance: {
                    basic: "Qu·∫£n l√Ω t√†i ch√≠nh doanh nghi·ªáp l√† y·∫øu t·ªë quan tr·ªçng ƒë·ªÉ ph√°t tri·ªÉn b·ªÅn v·ªØng.",
                    detailed: {
                        planning: "üìä L·∫≠p k·∫ø ho·∫°ch t√†i ch√≠nh:\n‚Ä¢ D·ª± b√°o doanh thu theo th√°ng/qu√Ω/nƒÉm\n‚Ä¢ Ph√¢n b·ªï ng√¢n s√°ch cho c√°c ho·∫°t ƒë·ªông\n‚Ä¢ Thi·∫øt l·∫≠p qu·ªπ d·ª± ph√≤ng 10-15%\n‚Ä¢ Theo d√µi d√≤ng ti·ªÅn h√†ng ng√†y",
                        cost: "üí∞ Ki·ªÉm so√°t chi ph√≠:\n‚Ä¢ Ph√¢n lo·∫°i chi ph√≠ c·ªë ƒë·ªãnh v√† bi·∫øn ƒë·ªông\n‚Ä¢ T·ªëi ∆∞u h√≥a chi ph√≠ v·∫≠n h√†nh\n‚Ä¢ ƒê√†m ph√°n v·ªõi nh√† cung c·∫•p\n‚Ä¢ S·ª≠ d·ª•ng c√¥ng ngh·ªá ƒë·ªÉ ti·∫øt ki·ªám",
                        investment: "üíπ ƒê·∫ßu t∆∞ th√¥ng minh:\n‚Ä¢ ƒêa d·∫°ng h√≥a danh m·ª•c ƒë·∫ßu t∆∞\n‚Ä¢ ƒê√°nh gi√° ROI tr∆∞·ªõc khi ƒë·∫ßu t∆∞\n‚Ä¢ T√°i ƒë·∫ßu t∆∞ l·ª£i nhu·∫≠n h·ª£p l√Ω\n‚Ä¢ X√¢y d·ª±ng qu·ªπ ph√°t tri·ªÉn"
                    }
                },
                digital: {
                    basic: "Digital marketing l√† ch√¨a kh√≥a th√†nh c√¥ng trong th·ªùi ƒë·∫°i s·ªë.",
                    detailed: {
                        social: "üì± Social Media Marketing:\n‚Ä¢ Facebook/Instagram: T∆∞∆°ng t√°c cao, qu·∫£ng c√°o hi·ªáu qu·∫£\n‚Ä¢ TikTok: Xu h∆∞·ªõng tr·∫ª, viral nhanh\n‚Ä¢ LinkedIn: B2B, networking chuy√™n nghi·ªáp\n‚Ä¢ YouTube: Content d√†i, SEO t·ªët",
                        content: "üìù Content Marketing:\n‚Ä¢ Blog: SEO, x√¢y d·ª±ng authority\n‚Ä¢ Video: T∆∞∆°ng t√°c cao, d·ªÖ nh·ªõ\n‚Ä¢ Infographic: D·ªÖ chia s·∫ª, th√¥ng tin r√µ r√†ng\n‚Ä¢ Podcast: Ti·∫øp c·∫≠n kh√°ch h√†ng m·ª•c ti√™u",
                        seo: "üîç SEO & SEM:\n‚Ä¢ T·ª´ kh√≥a: Nghi√™n c·ª©u, t·ªëi ∆∞u h√≥a\n‚Ä¢ On-page: Meta tags, content quality\n‚Ä¢ Off-page: Backlinks, social signals\n‚Ä¢ Local SEO: Google My Business"
                    }
                },
                management: {
                    basic: "Qu·∫£n l√Ω doanh nghi·ªáp hi·ªáu qu·∫£ c·∫ßn h·ªá th·ªëng v√† quy tr√¨nh r√µ r√†ng.",
                    detailed: {
                        team: "üë• Qu·∫£n l√Ω nh√¢n s·ª±:\n‚Ä¢ Tuy·ªÉn d·ª•ng: Job description r√µ r√†ng\n‚Ä¢ ƒê√†o t·∫°o: K·∫ø ho·∫°ch ph√°t tri·ªÉn k·ªπ nƒÉng\n‚Ä¢ ƒê√°nh gi√°: KPI, feedback ƒë·ªãnh k·ª≥\n‚Ä¢ Gi·ªØ ch√¢n: L∆∞∆°ng th∆∞·ªüng, m√¥i tr∆∞·ªùng l√†m vi·ªác",
                        process: "‚öôÔ∏è T·ªëi ∆∞u quy tr√¨nh:\n‚Ä¢ Mapping: V·∫Ω s∆° ƒë·ªì quy tr√¨nh hi·ªán t·∫°i\n‚Ä¢ Ph√¢n t√≠ch: T√¨m ƒëi·ªÉm ngh·∫Ωn, l√£ng ph√≠\n‚Ä¢ C·∫£i ti·∫øn: √Åp d·ª•ng Lean, Six Sigma\n‚Ä¢ T·ª± ƒë·ªông h√≥a: S·ª≠ d·ª•ng c√¥ng ngh·ªá",
                        quality: "‚úÖ Qu·∫£n l√Ω ch·∫•t l∆∞·ª£ng:\n‚Ä¢ Ti√™u chu·∫©n: ISO, industry standards\n‚Ä¢ Ki·ªÉm so√°t: QC/QA procedures\n‚Ä¢ C·∫£i ti·∫øn: PDCA cycle\n‚Ä¢ Kh√°ch h√†ng: Feedback, satisfaction"
                    }
                }
            },
            teacher: {
                title: "Tr·ª£ l√Ω Gi√°o vi√™n",
                greeting: [
                    "Ch√†o b·∫°n! T√¥i l√† V AI, tr·ª£ l√Ω th√¥ng minh cho gi√°o vi√™n. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n so·∫°n gi√°o √°n, qu·∫£n l√Ω l·ªõp h·ªçc, v√† ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y. B·∫°n c·∫ßn t√¥i h·ªó tr·ª£ g√¨ h√¥m nay?",
                    "Xin ch√†o! T√¥i s·∫µn s√†ng h·ªó tr·ª£ b·∫°n trong c√¥ng vi·ªác gi·∫£ng d·∫°y. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ ph∆∞∆°ng ph√°p s∆∞ ph·∫°m, c√¥ng ngh·ªá gi√°o d·ª•c."
                ],
                askDetail: "ƒê·ªÉ t√¥i c√≥ th·ªÉ h·ªó tr·ª£ t·ªët h∆°n, b·∫°n c√≥ th·ªÉ cho t√¥i bi·∫øt:\n‚Ä¢ B·∫°n d·∫°y m√¥n h·ªçc g√¨?\n‚Ä¢ C·∫•p h·ªçc b·∫°n ƒëang d·∫°y?\n‚Ä¢ Kh√≥ khƒÉn trong gi·∫£ng d·∫°y?",
                followUpQuestions: [
                    "B·∫°n d·∫°y m√¥n h·ªçc g√¨?",
                    "B·∫°n d·∫°y c·∫•p h·ªçc n√†o?",
                    "B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong gi·∫£ng d·∫°y?",
                    "B·∫°n mu·ªën c·∫£i thi·ªán ph∆∞∆°ng ph√°p d·∫°y nh∆∞ th·∫ø n√†o?",
                    "Sƒ© s·ªë l·ªõp h·ªçc c·ªßa b·∫°n l√† bao nhi√™u?"
                ],
                lesson: [
                    "ƒê·ªÉ so·∫°n gi√°o √°n hi·ªáu qu·∫£: 1) X√°c ƒë·ªãnh m·ª•c ti√™u h·ªçc t·∫≠p r√µ r√†ng, 2) Thi·∫øt k·∫ø ho·∫°t ƒë·ªông ƒëa d·∫°ng, 3) ƒê√°nh gi√° k·∫øt qu·∫£ h·ªçc t·∫≠p.",
                    "Ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y hi·ªán ƒë·∫°i: S·ª≠ d·ª•ng c√¥ng ngh·ªá, h·ªçc t·∫≠p d·ª±a tr√™n d·ª± √°n, v√† h·ªçc t·∫≠p h·ª£p t√°c."
                ],
                management: [
                    "Qu·∫£n l√Ω l·ªõp h·ªçc hi·ªáu qu·∫£: 1) Thi·∫øt l·∫≠p quy t·∫Øc r√µ r√†ng, 2) T·∫°o m√¥i tr∆∞·ªùng h·ªçc t·∫≠p t√≠ch c·ª±c, 3) Giao ti·∫øp hi·ªáu qu·∫£ v·ªõi ph·ª• huynh.",
                    "C√¥ng ngh·ªá gi√°o d·ª•c: S·ª≠ d·ª•ng LMS, c√¥ng c·ª• ƒë√°nh gi√° tr·ª±c tuy·∫øn, v√† ph∆∞∆°ng ph√°p blended learning."
                ],
                methodology: {
                    basic: "Ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y hi·ªán ƒë·∫°i gi√∫p tƒÉng hi·ªáu qu·∫£ h·ªçc t·∫≠p.",
                    detailed: {
                        active: "üéØ H·ªçc t·∫≠p ch·ªß ƒë·ªông:\n‚Ä¢ Project-based learning: H·ªçc qua d·ª± √°n th·ª±c t·∫ø\n‚Ä¢ Problem-based learning: Gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ\n‚Ä¢ Inquiry-based learning: H·ªçc qua kh√°m ph√°\n‚Ä¢ Cooperative learning: H·ªçc t·∫≠p h·ª£p t√°c",
                        tech: "üíª C√¥ng ngh·ªá trong gi·∫£ng d·∫°y:\n‚Ä¢ LMS: Moodle, Google Classroom\n‚Ä¢ Interactive tools: Kahoot, Mentimeter\n‚Ä¢ Virtual reality: M√¥ ph·ªèng 3D\n‚Ä¢ AI tools: ChatGPT, Grammarly",
                        assessment: "üìä ƒê√°nh gi√° ƒëa d·∫°ng:\n‚Ä¢ Formative: ƒê√°nh gi√° qu√° tr√¨nh\n‚Ä¢ Summative: ƒê√°nh gi√° cu·ªëi k·ª≥\n‚Ä¢ Peer assessment: ƒê√°nh gi√° ƒë·ªìng ƒë·∫≥ng\n‚Ä¢ Self-assessment: T·ª± ƒë√°nh gi√°"
                    }
                },
                classroom: {
                    basic: "Qu·∫£n l√Ω l·ªõp h·ªçc hi·ªáu qu·∫£ t·∫°o m√¥i tr∆∞·ªùng h·ªçc t·∫≠p t·ªët.",
                    detailed: {
                        rules: "üìã Thi·∫øt l·∫≠p quy t·∫Øc:\n‚Ä¢ Quy t·∫Øc r√µ r√†ng, d·ªÖ hi·ªÉu\n‚Ä¢ Th·ªëng nh·∫•t v·ªõi h·ªçc sinh\n‚Ä¢ Khen th∆∞·ªüng t√≠ch c·ª±c\n‚Ä¢ X·ª≠ l√Ω vi ph·∫°m c√¥ng b·∫±ng",
                        environment: "üå± M√¥i tr∆∞·ªùng h·ªçc t·∫≠p:\n‚Ä¢ B·ªë tr√≠ l·ªõp h·ªçc linh ho·∫°t\n‚Ä¢ T·∫°o kh√¥ng gian s√°ng t·∫°o\n‚Ä¢ S·ª≠ d·ª•ng m√†u s·∫Øc t√≠ch c·ª±c\n‚Ä¢ √Ånh s√°ng v√† √¢m thanh ph√π h·ª£p",
                        communication: "üí¨ Giao ti·∫øp hi·ªáu qu·∫£:\n‚Ä¢ L·∫Øng nghe t√≠ch c·ª±c\n‚Ä¢ Ph·∫£n h·ªìi k·ªãp th·ªùi\n‚Ä¢ Giao ti·∫øp v·ªõi ph·ª• huynh\n‚Ä¢ X√¢y d·ª±ng m·ªëi quan h·ªá tin c·∫≠y"
                    }
                },
                curriculum: {
                    basic: "Thi·∫øt k·∫ø ch∆∞∆°ng tr√¨nh gi·∫£ng d·∫°y ph√π h·ª£p v·ªõi m·ª•c ti√™u.",
                    detailed: {
                        planning: "üìù L·∫≠p k·∫ø ho·∫°ch gi·∫£ng d·∫°y:\n‚Ä¢ Ph√¢n t√≠ch m·ª•c ti√™u h·ªçc t·∫≠p\n‚Ä¢ Thi·∫øt k·∫ø ho·∫°t ƒë·ªông ƒëa d·∫°ng\n‚Ä¢ Ph√¢n b·ªï th·ªùi gian h·ª£p l√Ω\n‚Ä¢ Chu·∫©n b·ªã t√†i li·ªáu h·ªó tr·ª£",
                        differentiation: "üé® Ph√¢n h√≥a gi·∫£ng d·∫°y:\n‚Ä¢ ƒê√°nh gi√° nƒÉng l·ª±c h·ªçc sinh\n‚Ä¢ Thi·∫øt k·∫ø nhi·ªám v·ª• ƒëa d·∫°ng\n‚Ä¢ H·ªó tr·ª£ c√° nh√¢n h√≥a\n‚Ä¢ ƒê√°nh gi√° theo ti·∫øn ƒë·ªô",
                        integration: "üîó T√≠ch h·ª£p li√™n m√¥n:\n‚Ä¢ K·∫øt n·ªëi ki·∫øn th·ª©c c√°c m√¥n\n‚Ä¢ D·ª± √°n li√™n m√¥n\n‚Ä¢ ·ª®ng d·ª•ng th·ª±c t·∫ø\n‚Ä¢ Ph√°t tri·ªÉn k·ªπ nƒÉng t·ªïng h·ª£p"
                    }
                }
            },
            developer: {
                title: "Tr·ª£ l√Ω L·∫≠p tr√¨nh vi√™n",
                greeting: [
                    "Ch√†o b·∫°n! T√¥i l√† V AI, tr·ª£ l√Ω th√¥ng minh cho l·∫≠p tr√¨nh vi√™n. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n v·ªõi coding, debug, v√† ki·∫øn tr√∫c ph·∫ßn m·ªÅm. B·∫°n c·∫ßn t√¥i h·ªó tr·ª£ g√¨ h√¥m nay?",
                    "Xin ch√†o! T√¥i s·∫µn s√†ng h·ªó tr·ª£ b·∫°n trong c√¥ng vi·ªác l·∫≠p tr√¨nh. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ code, framework, ho·∫∑c best practices."
                ],
                askDetail: "ƒê·ªÉ t√¥i c√≥ th·ªÉ h·ªó tr·ª£ t·ªët h∆°n, b·∫°n c√≥ th·ªÉ cho t√¥i bi·∫øt:\n‚Ä¢ Ng√¥n ng·ªØ l·∫≠p tr√¨nh b·∫°n chuy√™n?\n‚Ä¢ Frontend hay Backend?\n‚Ä¢ D·ª± √°n hi·ªán t·∫°i b·∫°n ƒëang l√†m?",
                followUpQuestions: [
                    "B·∫°n chuy√™n v·ªÅ ng√¥n ng·ªØ l·∫≠p tr√¨nh n√†o?",
                    "B·∫°n l√†m frontend hay backend?",
                    "B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong coding?",
                    "B·∫°n mu·ªën h·ªçc framework m·ªõi n√†o?",
                    "D·ª± √°n hi·ªán t·∫°i b·∫°n ƒëang l√†m l√† g√¨?"
                ],
                coding: [
                    "Best practices trong l·∫≠p tr√¨nh: 1) Clean code, 2) Code review, 3) Unit testing, 4) Documentation.",
                    "C√°c framework ph·ªï bi·∫øn: React, Vue.js, Angular cho frontend; Node.js, Django, Spring cho backend."
                ],
                debug: [
                    "K·ªπ thu·∫≠t debug hi·ªáu qu·∫£: 1) S·ª≠ d·ª•ng debugger, 2) Logging, 3) Error handling, 4) Performance monitoring.",
                    "C√¥ng c·ª• debug: Chrome DevTools, VS Code debugger, Postman, v√† c√°c IDE t√≠ch h·ª£p."
                ],
                frontend: {
                    basic: "Frontend development t·∫≠p trung v√†o tr·∫£i nghi·ªám ng∆∞·ªùi d√πng.",
                    detailed: {
                        frameworks: "‚öõÔ∏è Framework ph·ªï bi·∫øn:\n‚Ä¢ React: Component-based, ecosystem l·ªõn\n‚Ä¢ Vue.js: D·ªÖ h·ªçc, progressive framework\n‚Ä¢ Angular: Enterprise, TypeScript native\n‚Ä¢ Svelte: Compile-time framework, performance cao",
                        tools: "üõ†Ô∏è C√¥ng c·ª• ph√°t tri·ªÉn:\n‚Ä¢ Build tools: Webpack, Vite, Parcel\n‚Ä¢ Package managers: npm, yarn, pnpm\n‚Ä¢ CSS frameworks: Tailwind, Bootstrap, Material-UI\n‚Ä¢ Testing: Jest, Cypress, Playwright",
                        optimization: "üöÄ T·ªëi ∆∞u h√≥a:\n‚Ä¢ Code splitting: Lazy loading components\n‚Ä¢ Image optimization: WebP, lazy loading\n‚Ä¢ Caching: Service workers, CDN\n‚Ä¢ Performance: Lighthouse, Core Web Vitals"
                    }
                },
                backend: {
                    basic: "Backend development x·ª≠ l√Ω logic nghi·ªáp v·ª• v√† d·ªØ li·ªáu.",
                    detailed: {
                        languages: "üêç Ng√¥n ng·ªØ ph·ªï bi·∫øn:\n‚Ä¢ Python: Django, Flask, FastAPI\n‚Ä¢ Node.js: Express, NestJS, Koa\n‚Ä¢ Java: Spring Boot, Jakarta EE\n‚Ä¢ C#: ASP.NET Core, Entity Framework",
                        databases: "üóÑÔ∏è C∆° s·ªü d·ªØ li·ªáu:\n‚Ä¢ SQL: PostgreSQL, MySQL, SQL Server\n‚Ä¢ NoSQL: MongoDB, Redis, Cassandra\n‚Ä¢ ORM: Prisma, Sequelize, Entity Framework\n‚Ä¢ Migration: Version control cho database",
                        architecture: "üèóÔ∏è Ki·∫øn tr√∫c h·ªá th·ªëng:\n‚Ä¢ Microservices: Chia nh·ªè ·ª©ng d·ª•ng\n‚Ä¢ REST API: Stateless, resource-based\n‚Ä¢ GraphQL: Flexible data fetching\n‚Ä¢ Event-driven: Message queues, pub/sub"
                    }
                },
                devops: {
                    basic: "DevOps k·∫øt h·ª£p development v√† operations.",
                    detailed: {
                        ci_cd: "üîÑ CI/CD Pipeline:\n‚Ä¢ Version control: Git, GitHub Actions\n‚Ä¢ Build automation: Jenkins, GitLab CI\n‚Ä¢ Deployment: Docker, Kubernetes\n‚Ä¢ Monitoring: Prometheus, Grafana",
                        cloud: "‚òÅÔ∏è Cloud platforms:\n‚Ä¢ AWS: EC2, S3, Lambda, RDS\n‚Ä¢ Azure: App Service, Functions, Cosmos DB\n‚Ä¢ GCP: Compute Engine, Cloud Storage, Firebase\n‚Ä¢ Serverless: FaaS, BaaS",
                        security: "üîí B·∫£o m·∫≠t:\n‚Ä¢ Authentication: JWT, OAuth, OIDC\n‚Ä¢ Authorization: RBAC, ABAC\n‚Ä¢ Encryption: HTTPS, TLS, data encryption\n‚Ä¢ Security scanning: SAST, DAST, dependency check"
                    }
                }
            },
            sales: {
                title: "Nh√¢n vi√™n b√°n h√†ng",
                greeting: [
                    "Ch√†o b·∫°n! T√¥i l√† V-AI, tr·ª£ l√Ω th√¥ng minh cho nh√¢n vi√™n b√°n h√†ng. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n v·ªõi k·ªπ nƒÉng b√°n h√†ng, chƒÉm s√≥c kh√°ch h√†ng, v√† qu·∫£n l√Ω ƒë∆°n h√†ng. B·∫°n c·∫ßn t√¥i h·ªó tr·ª£ g√¨ h√¥m nay?",
                    "Xin ch√†o! T√¥i s·∫µn s√†ng h·ªó tr·ª£ b·∫°n trong c√¥ng vi·ªác b√°n h√†ng. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ k·ªπ nƒÉng b√°n h√†ng, c√°ch chƒÉm s√≥c kh√°ch h√†ng, ho·∫∑c qu·∫£n l√Ω ƒë∆°n h√†ng."
                ],
                askDetail: "ƒê·ªÉ t√¥i c√≥ th·ªÉ h·ªó tr·ª£ t·ªët h∆°n, b·∫°n c√≥ th·ªÉ cho t√¥i bi·∫øt:\n‚Ä¢ B·∫°n ƒë√£ c√≥ kinh nghi·ªám b√°n h√†ng ch∆∞a?\n‚Ä¢ B·∫°n th∆∞·ªùng b√°n h√†ng ·ªü ƒë√¢u?\n‚Ä¢ B·∫°n c√≥ th·ªÉ chƒÉm s√≥c kh√°ch h√†ng nh∆∞ th·∫ø n√†o?",
                followUpQuestions: [
                    "B·∫°n ƒë√£ c√≥ kinh nghi·ªám b√°n h√†ng ch∆∞a?",
                    "B·∫°n th∆∞·ªùng b√°n h√†ng ·ªü ƒë√¢u?",
                    "B·∫°n c√≥ th·ªÉ chƒÉm s√≥c kh√°ch h√†ng nh∆∞ th·∫ø n√†o?",
                    "B·∫°n mu·ªën tƒÉng doanh s·ªë b√°n h√†ng nh∆∞ th·∫ø n√†o?",
                    "B·∫°n c√≥ th·ªÉ qu·∫£n l√Ω ƒë∆°n h√†ng nh∆∞ th·∫ø n√†o?"
                ],
                skillsales:[
                'C√°ch t√¨m ki·∫øm v√† ti·∫øp c·∫≠n kh√°ch h√†ng ti·ªÅm nƒÉng',
                'B√≠ quy·∫øt ch·ªët ƒë∆°n hi·ªáu qu·∫£',
                'ChƒÉm s√≥c kh√°ch h√†ng sau b√°n',
                'Qu·∫£n l√Ω ƒë∆°n h√†ng v√† t·ªìn kho th√¥ng minh'

                ]
                
            },
            office: {
                title: "Tr·ª£ l√Ω VƒÉn ph√≤ng",
                greeting: [
                    "Ch√†o b·∫°n! T√¥i l√† V-AI, tr·ª£ l√Ω vƒÉn ph√≤ng ·∫£o c·ªßa b·∫°n. T√¥i c√≥ th·ªÉ h·ªó tr·ª£ b·∫°n v·ªõi c√°c c√¥ng vi·ªác h√†nh ch√≠nh, qu·∫£n l√Ω th·ªùi gian v√† s·ª≠ d·ª•ng c√¥ng c·ª• vƒÉn ph√≤ng. B·∫°n c·∫ßn gi√∫p g√¨ h√¥m nay?",
                    "Xin ch√†o! T√¥i ·ªü ƒë√¢y ƒë·ªÉ gi√∫p c√¥ng vi·ªác vƒÉn ph√≤ng c·ªßa b·∫°n tr·ªü n√™n d·ªÖ d√†ng h∆°n. H√£y h·ªèi t√¥i v·ªÅ c√°ch vi·∫øt email, t·ªï ch·ª©c cu·ªôc h·ªçp, ho·∫∑c m·∫πo d√πng Excel nh√©!"
                ],
                followUpQuestions: [
                    "L√†m sao ƒë·ªÉ vi·∫øt email chuy√™n nghi·ªáp?",
                    "C√°ch t·ªï ch·ª©c m·ªôt cu·ªôc h·ªçp hi·ªáu qu·∫£?",
                    "M·∫πo qu·∫£n l√Ω th·ªùi gian t·ªët nh·∫•t?",
                    "Ch·ªâ t√¥i v√†i h√†m Excel th√¥ng d·ª•ng.",
                    "L√†m th·∫ø n√†o ƒë·ªÉ c·∫£i thi·ªán k·ªπ nƒÉng giao ti·∫øp?",
                    "C√°ch l·∫≠p k·∫ø ho·∫°ch cho m·ªôt d·ª± √°n?",
                    "L√†m sao ƒë·ªÉ gi·∫£i quy·∫øt xung ƒë·ªôt n∆°i c√¥ng s·ªü?"
                ],
                email: {
                    basic: "Vi·∫øt email chuy√™n nghi·ªáp l√† m·ªôt k·ªπ nƒÉng quan tr·ªçng. T√¥i s·∫Ω h∆∞·ªõng d·∫´n b·∫°n c√°c b∆∞·ªõc c∆° b·∫£n.",
                    detailed: {
                        subject: "üìß Ti√™u ƒë·ªÅ email:\n‚Ä¢ R√µ r√†ng, ng·∫Øn g·ªçn, s√∫c t√≠ch.\n‚Ä¢ V√≠ d·ª•: 'B√°o c√°o cu·ªôc h·ªçp ng√†y 25/07' thay v√¨ 'G·ª≠i b√°o c√°o'.\n‚Ä¢ Th√™m ti·ªÅn t·ªë n·∫øu c·∫ßn: [ACTION], [INFO], [URGENT].",
                        greeting: "üëã Ch√†o h·ªèi:\n‚Ä¢ Trang tr·ªçng: 'K√≠nh g·ª≠i Anh/Ch·ªã [T√™n]', 'Dear Mr./Ms. [Last Name]'.\n‚Ä¢ Th√¢n m·∫≠t: 'Ch√†o [T√™n]', 'Hi [Name]'.\n‚Ä¢ Lu√¥n d√πng t√™n ri√™ng n·∫øu bi·∫øt.",
                        body: "‚úçÔ∏è N·ªôi dung ch√≠nh:\n‚Ä¢ V√†o th·∫≥ng v·∫•n ƒë·ªÅ, tr√¨nh b√†y m·∫°ch l·∫°c.\n‚Ä¢ S·ª≠ d·ª•ng ƒëo·∫°n vƒÉn ng·∫Øn, g·∫°ch ƒë·∫ßu d√≤ng.\n‚Ä¢ B√¥i ƒë·∫≠m √Ω ch√≠nh n·∫øu c·∫ßn.\n‚Ä¢ Ki·ªÉm tra l·ªói ch√≠nh t·∫£, ng·ªØ ph√°p tr∆∞·ªõc khi g·ª≠i.",
                        closing: "üôè K·∫øt th√∫c v√† ch·ªØ k√Ω:\n‚Ä¢ K·∫øt th√∫c: 'Tr√¢n tr·ªçng,', 'Best regards,', 'Xin c·∫£m ∆°n,'.\n‚Ä¢ Ch·ªØ k√Ω: Ghi r√µ H·ªç t√™n, Ch·ª©c v·ª•, C√¥ng ty, Th√¥ng tin li√™n h·ªá."
                    }
                },
                meeting: {
                    basic: "T·ªï ch·ª©c cu·ªôc h·ªçp hi·ªáu qu·∫£ gi√∫p ti·∫øt ki·ªám th·ªùi gian v√† ƒë·∫°t ƒë∆∞·ª£c m·ª•c ti√™u. T√¥i c√≥ m·ªôt v√†i g·ª£i √Ω cho b·∫°n.",
                    detailed: {
                        before: "‰∫ãÂâç (Tr∆∞·ªõc cu·ªôc h·ªçp):\n‚Ä¢ X√°c ƒë·ªãnh m·ª•c ti√™u r√µ r√†ng.\n‚Ä¢ L√™n danh s√°ch ng∆∞·ªùi tham d·ª± c·∫ßn thi·∫øt.\n‚Ä¢ G·ª≠i agenda (ch∆∞∆°ng tr√¨nh h·ªçp) tr∆∞·ªõc 1-2 ng√†y.\n‚Ä¢ Chu·∫©n b·ªã t√†i li·ªáu li√™n quan.",
                        during: "ÂÆüÊñΩ (Trong cu·ªôc h·ªçp):\n‚Ä¢ B·∫Øt ƒë·∫ßu v√† k·∫øt th√∫c ƒë√∫ng gi·ªù.\n‚Ä¢ B√°m s√°t agenda ƒë√£ g·ª≠i.\n‚Ä¢ Khuy·∫øn kh√≠ch m·ªçi ng∆∞·ªùi tham gia.\n‚Ä¢ Ghi l·∫°i bi√™n b·∫£n h·ªçp (meeting minutes).",
                        after: "‰∫ãÂæå (Sau cu·ªôc h·ªçp):\n‚Ä¢ G·ª≠i bi√™n b·∫£n h·ªçp cho t·∫•t c·∫£ ng∆∞·ªùi tham d·ª± trong v√≤ng 24h.\n‚Ä¢ T√≥m t·∫Øt c√°c quy·∫øt ƒë·ªãnh ch√≠nh v√† c√°c m·ª•c c·∫ßn h√†nh ƒë·ªông (action items).\n‚Ä¢ Theo d√µi ti·∫øn ƒë·ªô c·ªßa c√°c action items."
                    }
                },
                timeManagement: {
                    basic: "Qu·∫£n l√Ω th·ªùi gian hi·ªáu qu·∫£ gi√∫p b·∫°n gi·∫£m stress v√† tƒÉng nƒÉng su·∫•t. H√£y c√πng xem qua v√†i ph∆∞∆°ng ph√°p nh√©.",
                    detailed: {
                        matrix: "üìä Ma tr·∫≠n Eisenhower:\n‚Ä¢ Quan tr·ªçng & Kh·∫©n c·∫•p: L√†m ngay.\n‚Ä¢ Quan tr·ªçng & Kh√¥ng kh·∫©n c·∫•p: L√™n k·∫ø ho·∫°ch.\n‚Ä¢ Kh√¥ng quan tr·ªçng & Kh·∫©n c·∫•p: ·ª¶y th√°c.\n‚Ä¢ Kh√¥ng quan tr·ªçng & Kh√¥ng kh·∫©n c·∫•p: Lo·∫°i b·ªè.",
                        pomodoro: "üçÖ K·ªπ thu·∫≠t Pomodoro:\n‚Ä¢ L√†m vi·ªác t·∫≠p trung trong 25 ph√∫t.\n‚Ä¢ Ngh·ªâ gi·∫£i lao ng·∫Øn 5 ph√∫t.\n‚Ä¢ Sau 4 phi√™n Pomodoro, ngh·ªâ d√†i 15-30 ph√∫t.\n‚Ä¢ Gi√∫p duy tr√¨ s·ª± t·∫≠p trung cao ƒë·ªô.",
                        planning: "üóìÔ∏è L√™n k·∫ø ho·∫°ch:\n‚Ä¢ S·ª≠ d·ª•ng to-do list h√†ng ng√†y.\n‚Ä¢ ƒê·∫∑t ra 3 m·ª•c ti√™u quan tr·ªçng nh·∫•t trong ng√†y (MITs).\n‚Ä¢ Ph√¢n b·ªï th·ªùi gian cho t·ª´ng c√¥ng vi·ªác (time blocking).\n‚Ä¢ D√†nh th·ªùi gian cu·ªëi ng√†y ƒë·ªÉ t·ªïng k·∫øt v√† l√™n k·∫ø ho·∫°ch cho ng√†y mai."
                    }
                },
                excel: {
                    basic: "Excel l√† m·ªôt c√¥ng c·ª• c·ª±c k·ª≥ m·∫°nh m·∫Ω. T√¥i s·∫Ω ch·ªâ b·∫°n m·ªôt s·ªë h√†m v√† m·∫πo hay d√πng nh·∫•t.",
                    detailed: {
                        functions: "üî¢ C√°c h√†m th√¥ng d·ª•ng:\n‚Ä¢ SUM, AVERAGE, COUNT: C∆° b·∫£n t√≠nh to√°n.\n‚Ä¢ VLOOKUP/HLOOKUP: T√¨m ki·∫øm d·ªØ li·ªáu t·ª´ b·∫£ng kh√°c.\n‚Ä¢ IF: Th·ª±c hi·ªán h√†nh ƒë·ªông d·ª±a tr√™n ƒëi·ªÅu ki·ªán.\n‚Ä¢ CONCATENATE: N·ªëi c√°c chu·ªói vƒÉn b·∫£n.\n‚Ä¢ PIVOTTABLE: T·ªïng h·ª£p v√† ph√¢n t√≠ch d·ªØ li·ªáu l·ªõn.",
                        shortcuts: "‚å®Ô∏è Ph√≠m t·∫Øt h·ªØu √≠ch:\n‚Ä¢ Ctrl + Arrow Keys: Di chuy·ªÉn ƒë·∫øn cu·ªëi v√πng d·ªØ li·ªáu.\n‚Ä¢ Ctrl + Shift + L: B·∫≠t/t·∫Øt b·ªô l·ªçc.\n‚Ä¢ Ctrl + T: T·∫°o b·∫£ng (Table).\n‚Ä¢ Alt + =: T·ª± ƒë·ªông t√≠nh t·ªïng (AutoSum).",
                        tips: "üí° M·∫πo hay:\n‚Ä¢ Conditional Formatting: T√¥ m√†u √¥ theo ƒëi·ªÅu ki·ªán ƒë·ªÉ d·ªÖ nh√¨n.\n‚Ä¢ Data Validation: Gi·ªõi h·∫°n d·ªØ li·ªáu nh·∫≠p v√†o √¥ ƒë·ªÉ tr√°nh sai s√≥t.\n‚Ä¢ Freeze Panes: C·ªë ƒë·ªãnh d√≤ng/c·ªôt ti√™u ƒë·ªÅ khi cu·ªôn."
                    }
                }
            },
            other: {
                title: "Tr·ª£ l√Ω AI",
                greeting: [
                    "Ch√†o b·∫°n! T√¥i l√† V AI, tr·ª£ l√Ω AI th√¥ng minh. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n v·ªõi nhi·ªÅu lƒ©nh v·ª±c kh√°c nhau. B·∫°n c·∫ßn t√¥i h·ªó tr·ª£ g√¨ h√¥m nay?",
                    "Xin ch√†o! T√¥i s·∫µn s√†ng h·ªó tr·ª£ b·∫°n trong c√¥ng vi·ªác. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ b·∫•t k·ª≥ v·∫•n ƒë·ªÅ n√†o."
                ],
                askDetail: "ƒê·ªÉ t√¥i c√≥ th·ªÉ h·ªó tr·ª£ t·ªët h∆°n, b·∫°n c√≥ th·ªÉ cho t√¥i bi·∫øt:\n‚Ä¢ Lƒ©nh v·ª±c b·∫°n l√†m vi·ªác?\n‚Ä¢ C√¥ng vi·ªác hi·ªán t·∫°i?\n‚Ä¢ M·ª•c ti√™u ngh·ªÅ nghi·ªáp?",
                followUpQuestions: [
                    "B·∫°n l√†m vi·ªác trong lƒ©nh v·ª±c g√¨?",
                    "C√¥ng vi·ªác hi·ªán t·∫°i c·ªßa b·∫°n nh∆∞ th·∫ø n√†o?",
                    "B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong c√¥ng vi·ªác?",
                    "B·∫°n mu·ªën ph√°t tri·ªÉn k·ªπ nƒÉng g√¨?",
                    "M·ª•c ti√™u ngh·ªÅ nghi·ªáp c·ªßa b·∫°n l√† g√¨?"
                ],
                general: [
                    "T√¥i c√≥ th·ªÉ h·ªó tr·ª£ b·∫°n v·ªõi: 1) T√¨m ki·∫øm th√¥ng tin, 2) Ph√¢n t√≠ch d·ªØ li·ªáu, 3) T∆∞ v·∫•n chung, 4) H·ªó tr·ª£ c√¥ng vi·ªác.",
                    "H√£y cho t√¥i bi·∫øt b·∫°n l√†m vi·ªác trong lƒ©nh v·ª±c n√†o ƒë·ªÉ t√¥i c√≥ th·ªÉ h·ªó tr·ª£ t·ªët h∆°n."
                ]
            }
        };

        function selectCareer(career) {
            console.log('selectCareer called with:', career); // Debug log
            
            currentCareer = career;
            console.log('currentCareer set to:', currentCareer); // Debug log
            
            document.getElementById('careerSelection').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            // Update career title
            const careerTitle = document.getElementById('careerTitle');
            careerTitle.textContent = careerResponses[career].title;
            
            console.log('Career selection UI updated'); // Debug log
            
            // Send welcome message and ask for name
            setTimeout(() => {
                const welcomeMsg = careerResponses[career].greeting[Math.floor(Math.random() * careerResponses[career].greeting.length)];
                console.log('Adding welcome message:', welcomeMsg); // Debug log
                addMessage(welcomeMsg, false);
                setTimeout(() => {
                    // Check if name already exists
                    if (!userProfile.name) {
                        console.log('No name found, asking for name'); // Debug log
                        askForName();
                    } else {
                        console.log('Name found:', userProfile.name); // Debug log
                        const userInfo = document.getElementById('userInfo');
                        if(userInfo) {
                           userInfo.textContent = `Ch√†o m·ª´ng ${userProfile.name}!`;
                        }
                        const welcomeBackMsg = `Ch√†o m·ª´ng ${userProfile.name} quay tr·ªü l·∫°i!`;
                        addMessage(welcomeBackMsg, false);
                        setTimeout(() => {
                            console.log('Showing suggestion buttons'); // Debug log
                            showSuggestionButtons();
                        }, 500);
                    }
                }, 1000);
            }, 500);
        }

        function askForName() {
            const messagesContainer = document.getElementById('messages');
            
            const questionDiv = document.createElement('div');
            questionDiv.className = 'flex justify-start';
            const questionBubble = document.createElement('div');
            questionBubble.className = 'message-bubble px-4 py-3 rounded-2xl shadow-sm bg-blue-50 border border-blue-200';
            questionBubble.innerHTML = `<p class="text-sm text-gray-700 font-medium">ƒê·ªÉ ti·ªán x∆∞ng h√¥, b·∫°n cho t√¥i bi·∫øt t√™n c·ªßa b·∫°n nh√©? üòä</p>`;
            questionDiv.appendChild(questionBubble);
            messagesContainer.appendChild(questionDiv);

            const formDiv = document.createElement('div');
            formDiv.className = 'flex justify-start w-full';
            formDiv.id = 'name-form-container';
            
            const formBubble = document.createElement('div');
            formBubble.className = 'message-bubble w-full px-4 py-3 rounded-2xl shadow-sm bg-green-50 border border-green-200';
            
            const form = document.createElement('form');
            form.className = 'w-full flex items-center gap-2';
            form.onsubmit = (e) => {
                e.preventDefault();
                const nameInput = form.querySelector('input');
                const name = nameInput.value.trim();
                if (name) {
                    submitName(name);
                }
            };
            
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'w-full flex-grow p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500';
            input.placeholder = 'Nh·∫≠p t√™n c·ªßa b·∫°n...';
            input.required = true;
            
            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.className = 'px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-semibold hover:bg-blue-600';
            submitButton.textContent = 'G·ª≠i';
            
            form.appendChild(input);
            form.appendChild(submitButton);
            formBubble.appendChild(form);
            formDiv.appendChild(formBubble);
            messagesContainer.appendChild(formDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            setTimeout(() => input.focus(), 100);
        }

        function submitName(name) {
            const formContainer = document.getElementById('name-form-container');
            if(formContainer) formContainer.remove();

            addMessage(name, true);

            userProfile.name = name;
            localStorage.setItem('userProfile', JSON.stringify(userProfile));
            
            const userInfo = document.getElementById('userInfo');
            if(userInfo) {
                userInfo.textContent = `Ch√†o m·ª´ng ${name}!`;
            }

            setTimeout(() => {
                const confirmationMsg = `R·∫•t vui ƒë∆∞·ª£c l√†m quen, ${name}! üòä`;
                addMessage(confirmationMsg, false);
                setTimeout(() => {
                    showSuggestionButtons();
                }, 1000);
            }, 500);
        }

        function askPersonalInfo(career) {
            const personalQuestions = getPersonalQuestions(career);
            const messagesContainer = document.getElementById('messages');
            const questionDiv = document.createElement('div');
            questionDiv.className = 'flex justify-start';
            
            const questionBubble = document.createElement('div');
            questionBubble.className = 'message-bubble px-4 py-3 rounded-2xl shadow-sm bg-blue-50 border border-blue-200';
            
            const questionText = document.createElement('p');
            questionText.className = 'text-sm text-gray-700 mb-3 font-medium';
            questionText.textContent = `ƒê·ªÉ ch√°u c√≥ th·ªÉ t∆∞ v·∫•n t·ªët h∆°n, ${userProfile.name || 'ch√∫/c√¥'} h√£y cho ch√°u bi·∫øt m·ªôt ch√∫t v·ªÅ c√¥ng vi·ªác nh√©:`;
            
            const listDiv = document.createElement('div');
            listDiv.className = 'space-y-2 mb-3';
            
            personalQuestions.forEach((question, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'flex items-start text-sm text-gray-600';
                itemDiv.innerHTML = `
                    <span class="mr-2 mt-1">${index + 1}.</span>
                    <span>${question}</span>
                `;
                listDiv.appendChild(itemDiv);
            });
            
            const instructionText = document.createElement('p');
            instructionText.className = 'text-sm text-gray-700 font-medium';
            instructionText.textContent = 'Ch√∫/c√¥ c√≥ th·ªÉ tr·∫£ l·ªùi t·ª´ng c√¢u h·ªèi ho·∫∑c m√¥ t·∫£ t·ªïng quan v·ªÅ t√¨nh h√¨nh c·ªßa m√¨nh:';
            
            questionBubble.appendChild(questionText);
            questionBubble.appendChild(listDiv);
            questionBubble.appendChild(instructionText);
            questionDiv.appendChild(questionBubble);
            messagesContainer.appendChild(questionDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Hi·ªÉn th·ªã form nh·∫≠p th√¥ng tin
            setTimeout(() => {
                addPersonalInfoForm();
            }, 500);
        }

        function getPersonalQuestions(career) {
            const questions = {
                farmer: [
                    'Ch√∫/c√¥ tr·ªìng lo·∫°i c√¢y g√¨ ch√≠nh?',
                    'Di·ªán t√≠ch canh t√°c c·ªßa ch√∫/c√¥ kho·∫£ng bao nhi√™u?',
                    'Ch√∫/c√¥ ƒë√£ l√†m n√¥ng nghi·ªáp ƒë∆∞·ª£c bao l√¢u?',
                    'V√πng mi·ªÅn ch√∫/c√¥ ƒëang canh t√°c ·ªü ƒë√¢u?',
                    'Ch√∫/c√¥ c√≥ s·ª≠ d·ª•ng c√¥ng ngh·ªá hi·ªán ƒë·∫°i kh√¥ng?'
                ],
                business: [
                    'B·∫°n kinh doanh lƒ©nh v·ª±c g√¨?',
                    'Quy m√¥ doanh nghi·ªáp c·ªßa b·∫°n nh∆∞ th·∫ø n√†o?',
                    'B·∫°n ƒë√£ kinh doanh ƒë∆∞·ª£c bao l√¢u?',
                    'Th·ªã tr∆∞·ªùng m·ª•c ti√™u c·ªßa b·∫°n l√† g√¨?',
                    'B·∫°n c√≥ bao nhi√™u nh√¢n vi√™n?'
                ],
                teacher: [
                    'B·∫°n d·∫°y m√¥n h·ªçc g√¨?',
                    'B·∫°n d·∫°y c·∫•p h·ªçc n√†o?',
                    'B·∫°n ƒë√£ gi·∫£ng d·∫°y ƒë∆∞·ª£c bao l√¢u?',
                    'Sƒ© s·ªë l·ªõp h·ªçc trung b√¨nh l√† bao nhi√™u?',
                    'B·∫°n c√≥ s·ª≠ d·ª•ng c√¥ng ngh·ªá trong gi·∫£ng d·∫°y kh√¥ng?'
                ],
                developer: [
                    'B·∫°n chuy√™n v·ªÅ ng√¥n ng·ªØ l·∫≠p tr√¨nh n√†o?',
                    'B·∫°n l√†m frontend, backend hay fullstack?',
                    'B·∫°n ƒë√£ l·∫≠p tr√¨nh ƒë∆∞·ª£c bao l√¢u?',
                    'B·∫°n ƒëang l√†m vi·ªác ·ªü c√¥ng ty hay freelancer?',
                    'D·ª± √°n hi·ªán t·∫°i b·∫°n ƒëang l√†m l√† g√¨?'
                ],
                sales: [
                    'B·∫°n ƒë√£ c√≥ kinh nghi·ªám b√°n h√†ng ch∆∞a?',
                    'B·∫°n th∆∞·ªùng b√°n h√†ng ·ªü ƒë√¢u?',
                    'B·∫°n c√≥ th·ªÉ chƒÉm s√≥c kh√°ch h√†ng nh∆∞ th·∫ø n√†o?',
                    'B·∫°n mu·ªën tƒÉng doanh s·ªë b√°n h√†ng nh∆∞ th·∫ø n√†o?',
                    'B·∫°n c√≥ th·ªÉ qu·∫£n l√Ω ƒë∆°n h√†ng nh∆∞ th·∫ø n√†o?'
                ],
                office: [
                    'B·∫°n ƒë√£ c√≥ kinh nghi·ªám qu·∫£n l√Ω t√†i li·ªáu ch∆∞a?',
                    'B·∫°n th∆∞·ªùng l√†m vi·ªác ·ªü ƒë√¢u?',
                    'B·∫°n c√≥ th·ªÉ qu·∫£n l√Ω c√¥ng vi·ªác nh∆∞ th·∫ø n√†o?',
                    'B·∫°n mu·ªën tƒÉng hi·ªáu su·∫•t l√†m vi·ªác nh∆∞ th·∫ø n√†o?',
                    'B·∫°n c√≥ th·ªÉ giao ti·∫øp n·ªôi b·ªô nh∆∞ th·∫ø n√†o?'
                ],
                other: [
                    'B·∫°n l√†m vi·ªác trong lƒ©nh v·ª±c g√¨?',
                    'C√¥ng vi·ªác hi·ªán t·∫°i c·ªßa b·∫°n nh∆∞ th·∫ø n√†o?',
                    'B·∫°n ƒë√£ l√†m vi·ªác ƒë∆∞·ª£c bao l√¢u?',
                    'M√¥i tr∆∞·ªùng l√†m vi·ªác c·ªßa b·∫°n ra sao?',
                    'B·∫°n c√≥ m·ª•c ti√™u ngh·ªÅ nghi·ªáp g√¨?'
                ]
            };
            
            return questions[career] || questions.other;
        }

        function addPersonalInfoForm() {
            const messagesContainer = document.getElementById('messages');
            const formDiv = document.createElement('div');
            formDiv.className = 'flex justify-start';
            
            const formBubble = document.createElement('div');
            formBubble.className = 'message-bubble px-4 py-3 rounded-2xl shadow-sm bg-green-50 border border-green-200';
            
            const formTitle = document.createElement('p');
            formTitle.className = 'text-sm text-gray-700 mb-3 font-medium';
            formTitle.textContent = 'H√£y chia s·∫ª th√¥ng tin v·ªÅ ch√∫/c√¥:';
            
            const form = document.createElement('form');
            form.className = 'space-y-3';
            form.onsubmit = (e) => {
                e.preventDefault();
                const personalInfo = form.querySelector('textarea').value;
                if (personalInfo.trim()) {
                    // X√≥a form
                    formDiv.remove();
                    
                    // Th√™m tin nh·∫Øn c·ªßa user
                    addMessage(personalInfo, true);
                    
                    // L∆∞u th√¥ng tin c√° nh√¢n
                    userProfile.personalInfo = personalInfo;
                    localStorage.setItem('userProfile', JSON.stringify(userProfile));
                    
                    // AI ph·∫£n h·ªìi v√† g·ª£i √Ω v·∫•n ƒë·ªÅ
                    setTimeout(() => {
                        const response = getPersonalInfoResponse(personalInfo);
                        addMessage(response, false);
                        setTimeout(() => {
                            addSuggestionMessage();
                        }, 1000);
                    }, 500);
                }
            };
            
            const textarea = document.createElement('textarea');
            textarea.className = 'w-full p-3 border border-gray-300 rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent';
            textarea.placeholder = 'M√¥ t·∫£ th√¥ng tin v·ªÅ ch√∫/c√¥ v√† t√¨nh h√¨nh hi·ªán t·∫°i...';
            textarea.rows = 4;
            textarea.required = true;
            
            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.className = 'px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors';
            submitButton.textContent = 'G·ª≠i th√¥ng tin';
            
            form.appendChild(textarea);
            form.appendChild(submitButton);
            formBubble.appendChild(formTitle);
            formBubble.appendChild(form);
            formDiv.appendChild(formBubble);
            messagesContainer.appendChild(formDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Focus v√†o textarea
            setTimeout(() => {
                textarea.focus();
            }, 100);
        }

        function getPersonalInfoResponse(personalInfo) {
            const career = careerResponses[currentCareer];
            if (!career) return 'D·∫°, c·∫£m ∆°n ch√∫/c√¥ ƒë√£ chia s·∫ª th√¥ng tin ·∫°!';
            
            let response = `D·∫°, c·∫£m ∆°n ${userProfile.name || 'ch√∫/c√¥'} ƒë√£ chia s·∫ª! Ch√°u ƒë√£ hi·ªÉu r√µ h∆°n v·ªÅ t√¨nh h√¨nh c·ªßa ch√∫/c√¥ ·∫°. `;
            
            // Th√™m ph·∫£n h·ªìi d·ª±a tr√™n ngh·ªÅ nghi·ªáp
            switch(currentCareer) {
                case 'farmer':
                    response += `D·∫°, v·ªõi kinh nghi·ªám n√¥ng nghi·ªáp c·ªßa ch√∫/c√¥, ch√°u c√≥ th·ªÉ ƒë∆∞a ra nh·ªØng t∆∞ v·∫•n ph√π h·ª£p h∆°n ·∫°. `;
                    break;
                case 'business':
                    response += `V·ªõi t√¨nh h√¨nh kinh doanh c·ªßa b·∫°n, t√¥i s·∫Ω ƒë∆∞a ra chi·∫øn l∆∞·ª£c ph√π h·ª£p. `;
                    break;
                case 'teacher':
                    response += `V·ªõi m√¥i tr∆∞·ªùng gi·∫£ng d·∫°y c·ªßa b·∫°n, t√¥i s·∫Ω g·ª£i √Ω ph∆∞∆°ng ph√°p ph√π h·ª£p. `;
                    break;
                case 'developer':
                    response += `V·ªõi stack c√¥ng ngh·ªá v√† d·ª± √°n c·ªßa b·∫°n, t√¥i s·∫Ω ƒë∆∞a ra gi·∫£i ph√°p t·ªëi ∆∞u. `;
                    break;
                case 'doctor':
                    response += `V·ªõi chuy√™n m√¥n v√† m√¥i tr∆∞·ªùng l√†m vi·ªác c·ªßa b·∫°n, t√¥i s·∫Ω ƒë∆∞a ra t∆∞ v·∫•n ph√π h·ª£p. `;
                    break;
                case 'lawyer':
                    response += `V·ªõi lƒ©nh v·ª±c ph√°p l√Ω v√† kinh nghi·ªám c·ªßa b·∫°n, t√¥i s·∫Ω ƒë∆∞a ra t∆∞ v·∫•n chuy√™n m√¥n. `;
                    break;
                default:
                    response += `V·ªõi t√¨nh h√¨nh c√¥ng vi·ªác c·ªßa b·∫°n, t√¥i s·∫Ω ƒë∆∞a ra t∆∞ v·∫•n ph√π h·ª£p. `;
            }
            
            response += `B√¢y gi·ªù h√£y cho t√¥i bi·∫øt b·∫°n ƒëang g·∫∑p v·∫•n ƒë·ªÅ g√¨ nh√©!`;
            
            return response;
        }

        function addSuggestionMessage() {
            const career = careerResponses[currentCareer];
            if (!career) return;
            
            const suggestions = getSuggestions(career);
            const messagesContainer = document.getElementById('messages');
            const suggestionDiv = document.createElement('div');
            suggestionDiv.className = 'flex justify-start';
            
            const suggestionBubble = document.createElement('div');
            suggestionBubble.className = 'message-bubble px-4 py-3 rounded-2xl shadow-sm bg-yellow-50 border border-yellow-200';
            
            const suggestionText = document.createElement('p');
            suggestionText.className = 'text-sm text-gray-700 mb-3 font-medium';
            suggestionText.textContent = 'V√†i g·ª£i √Ω v·ªÅ v·∫•n ƒë·ªÅ c·ªßa b·∫°n:';
            
            const listDiv = document.createElement('div');
            listDiv.className = 'space-y-2';
            
            suggestions.forEach((suggestion, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'flex items-center text-sm text-gray-600';
                itemDiv.innerHTML = `
                    <span class="mr-2">‚Ä¢</span>
                    <span>${suggestion}</span>
                `;
                listDiv.appendChild(itemDiv);
            });
            
            const questionText = document.createElement('p');
            questionText.className = 'text-sm text-gray-700 mt-3 font-medium';
            questionText.textContent = 'B·∫°n ƒëang g·∫∑p v·∫•n ƒë·ªÅ g√¨? H√£y ch·ªçn ho·∫∑c t·ª± m√¥ t·∫£:';
            
            suggestionBubble.appendChild(suggestionText);
            suggestionBubble.appendChild(listDiv);
            suggestionBubble.appendChild(questionText);
            suggestionDiv.appendChild(suggestionBubble);
            messagesContainer.appendChild(suggestionDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Hi·ªÉn th·ªã c√°c v·∫•n ƒë·ªÅ c√≥ th·ªÉ ch·ªçn
            setTimeout(() => {
                addFollowUpQuestions();
            }, 500);
        }

        function getSuggestions(career) {
            const suggestions = {
                farmer: [
                    'üåæ Tr·ªìng l√∫a mi·ªÅn T√¢y',
                    'üå∂Ô∏è B·ªánh c√¢y ·ªõt v√†ng l√°',
                    'üêî G√† th·∫£ v∆∞·ªùn b·ªã b·ªánh',
                    'üçà K·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi',
                    'üå∏ S·∫ßu ri√™ng ra hoa b√≥n ph√¢n',
                    '‚òï Nh·∫Øc b√≥n ph√¢n c√† ph√™',
                    'üí∞ C·∫≠p nh·∫≠t gi√° n√¥ng s·∫£n',
                    'üå§Ô∏è D·ª± b√°o th·ªùi ti·∫øt n√¥ng v·ª•',
                    'üåø K·ªπ thu·∫≠t di·ªát c·ªè hi·ªáu qu·∫£'
                ],
                business: [
                    'üí∞ Qu·∫£n l√Ω t√†i ch√≠nh doanh nghi·ªáp',
                    'üì± Digital Marketing & Social Media',
                    'üë• Qu·∫£n l√Ω nh√¢n s·ª± & quy tr√¨nh',
                    'üìä Ph√¢n t√≠ch th·ªã tr∆∞·ªùng & ƒë·ªëi th·ªß',
                    'üìà X√¢y d·ª±ng k·∫ø ho·∫°ch kinh doanh',
                    'üéØ T·ªëi ∆∞u h√≥a chi ph√≠ & hi·ªáu qu·∫£',
                    'üîç SEO & SEM Marketing',
                    'üìù Content Marketing & Branding'
                ],
                teacher: [
                    'üéØ Ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y hi·ªán ƒë·∫°i',
                    'üìã Qu·∫£n l√Ω l·ªõp h·ªçc hi·ªáu qu·∫£',
                    'üìù Thi·∫øt k·∫ø ch∆∞∆°ng tr√¨nh gi·∫£ng d·∫°y',
                    'üíª C√¥ng ngh·ªá trong gi√°o d·ª•c',
                    'üìä ƒê√°nh gi√° h·ªçc sinh ƒëa d·∫°ng',
                    'üå± T·∫°o m√¥i tr∆∞·ªùng h·ªçc t·∫≠p t√≠ch c·ª±c',
                    'üîó T√≠ch h·ª£p li√™n m√¥n',
                    'üë• Giao ti·∫øp v·ªõi ph·ª• huynh'
                ],
                developer: [
                    '‚öõÔ∏è Frontend Development (React/Vue/Angular)',
                    'üêç Backend Development (Python/Java/Node.js)',
                    'üóÑÔ∏è Database & API Design',
                    'üîÑ DevOps & CI/CD Pipeline',
                    '‚òÅÔ∏è Cloud Platforms (AWS/Azure/GCP)',
                    'üîí B·∫£o m·∫≠t ·ª©ng d·ª•ng',
                    'üöÄ Performance Optimization',
                    'üß™ Testing & Quality Assurance'
                ],
                sales: [
                    'üìù Vi·∫øt b√†i post review s·∫£n ph·∫©m thu h√∫t',
                    'üé• Quay/ch·ª•p s·∫£n ph·∫©m h·∫•p d·∫´n',
                    'üí∞ ƒê·ªãnh gi√° s·∫£n ph·∫©m h·ª£p l√Ω',
                    'üí¨ C√°ch n√≥i chuy·ªán v·ªõi kh√°ch h√†ng',
                    'ü§ù X·ª≠ l√Ω kh√°ch h√†ng tr·∫£ gi√°'
                ],
                office: [
                    '‚úâÔ∏è G·ª£i √Ω vi·∫øt mail chuy√™n nghi·ªáp',
                    'üóÇÔ∏è C√°ch s·∫Øp x·∫øp timeline c√¥ng vi·ªác',
                    'üìÖ L·∫≠p k·∫ø ho·∫°ch tu·∫ßn hi·ªáu qu·∫£',
                    '‚è±Ô∏è M·∫πo qu·∫£n l√Ω th·ªùi gian',
                    'üìä H√†m Excel th√¥ng d·ª•ng cho vƒÉn ph√≤ng'
                ],
                other: [
                    'T√¨m ki·∫øm & t·ªïng h·ª£p th√¥ng tin',
                    'L√™n k·∫ø ho·∫°ch & qu·∫£n l√Ω c√¥ng vi·ªác',
                    'T∆∞ v·∫•n ph√°t tri·ªÉn k·ªπ nƒÉng',
                    'Brainstorm √Ω t∆∞·ªüng m·ªõi'
                ]
            };
            return suggestions[career] || suggestions.other;
        }

        function addFollowUpQuestions() {
            const career = careerResponses[currentCareer];
            if (!career) return;
            
            const suggestions = getSuggestions(career);
            const messagesContainer = document.getElementById('messages');
            const buttonContainer = document.createElement('div');
            buttonContainer.className = 'flex flex-wrap gap-2 mt-3';
            
            suggestions.forEach((suggestion, index) => {
                const button = document.createElement('button');
                button.className = 'px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 text-sm rounded-lg transition-colors duration-200 border border-blue-200';
                button.textContent = suggestion;
                button.onclick = () => {
                    // X√≥a c√°c button c≈©
                    const oldButtons = document.querySelectorAll('.flex.flex-wrap.gap-2');
                    oldButtons.forEach(btn => btn.remove());
                    
                    // Th√™m tin nh·∫Øn c·ªßa user
                    addMessage(suggestion, true);
                    
                    // AI tr·∫£ l·ªùi tr·ª±c ti·∫øp
                    setTimeout(() => {
                        const response = getDirectAIResponse(currentCareer, suggestion);
                        addMessage(response, false);
                    }, 500);
                };
                buttonContainer.appendChild(button);
            });
            
            messagesContainer.appendChild(buttonContainer);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function getDirectAIResponse(career, problem) {
            const careerData = careerResponses[career];
            if (!careerData) return 'Xin l·ªói, t√¥i kh√¥ng th·ªÉ x·ª≠ l√Ω y√™u c·∫ßu n√†y.';
            
            // L·∫•y th√¥ng tin c√° nh√¢n ƒë√£ l∆∞u
            const personalInfo = userProfile.personalInfo || '';
            
            // T·∫°o ph·∫£n h·ªìi tr·ª±c ti·∫øp d·ª±a tr√™n v·∫•n ƒë·ªÅ v√† th√¥ng tin c√° nh√¢n
            let response = `V·ªÅ v·∫•n ƒë·ªÅ "${problem}", d·ª±a tr√™n th√¥ng tin c·ªßa ${userProfile.name || 'b·∫°n'}, t√¥i c√≥ nh·ªØng t∆∞ v·∫•n sau:\n\n`;
            
            // Th√™m t∆∞ v·∫•n c·ª• th·ªÉ d·ª±a tr√™n ngh·ªÅ nghi·ªáp v√† v·∫•n ƒë·ªÅ
            switch(career) {
                case 'farmer':
                    switch(problem) {
                        case 'üåæ Tr·ªìng l√∫a mi·ªÅn T√¢y':
                            response = `D·∫°, v·ªÅ tr·ªìng l√∫a ·ªü mi·ªÅn T√¢y, ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ chi ti·∫øt v·ªÅ b√≥n ph√¢n v√† chƒÉm s√≥c hi·ªáu qu·∫£ ·∫°. Ch√∫/c√¥ mu·ªën bi·∫øt v·ªÅ th·ªùi v·ª•, b√≥n ph√¢n hay chƒÉm s√≥c ·∫°?`;
                            break;
                        case 'üå∂Ô∏è B·ªánh c√¢y ·ªõt v√†ng l√°':
                            response = `D·∫°, v·ªÅ c√¢y ·ªõt b·ªã v√†ng l√° v√† r·ª•ng tr√°i, c√≥ th·ªÉ do n·∫•m ho·∫∑c thi·∫øu dinh d∆∞·ª°ng. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ c√°ch x·ª≠ l√Ω ·∫°. Ch√∫/c√¥ mu·ªën bi·∫øt v·ªÅ b·ªánh, c√°ch x·ª≠ l√Ω hay dinh d∆∞·ª°ng ·∫°?`;
                            break;
                        case 'üêî G√† th·∫£ v∆∞·ªùn b·ªã b·ªánh':
                            response = `D·∫°, v·ªÅ g√† th·∫£ v∆∞·ªùn ƒÉn √≠t v√† ti√™u ch·∫£y, c√≥ th·ªÉ do b·ªánh ho·∫∑c th·ª©c ƒÉn. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ c√°ch x·ª≠ l√Ω ·∫°. Ch√∫/c√¥ mu·ªën bi·∫øt v·ªÅ b·ªánh, c√°ch x·ª≠ l√Ω hay ph√≤ng b·ªánh ·∫°?`;
                            break;
                        case 'üçà K·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi':
                            response = `D·∫°, d∆∞a l∆∞·ªõi l√† c√¢y tr·ªìng c√≥ gi√° tr·ªã kinh t·∫ø cao. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ k·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi t·ª´ A-Z ƒë·ªÉ ƒë·∫°t nƒÉng su·∫•t t·ªëi ∆∞u ·∫°. Ch√∫/c√¥ mu·ªën bi·∫øt v·ªÅ th·ªùi v·ª•, ƒë·∫•t tr·ªìng, gieo h·∫°t, chƒÉm s√≥c, th·ª• ph·∫•n, l√†m gi√†n, ph√≤ng b·ªánh hay thu ho·∫°ch ·∫°?`;
                            break;
                        case 'üå∏ S·∫ßu ri√™ng ra hoa b√≥n ph√¢n':
                            response = `D·∫°, v·ªÅ c√¢y s·∫ßu ri√™ng giai ƒëo·∫°n ra hoa, ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ lo·∫°i ph√¢n ph√π h·ª£p ·∫°. Ch√∫/c√¥ mu·ªën bi·∫øt v·ªÅ b√≥n ph√¢n cho hoa hay chƒÉm s√≥c s·∫ßu ri√™ng ·∫°?`;
                            break;
                        case '‚òï Nh·∫Øc b√≥n ph√¢n c√† ph√™':
                            response = `D·∫°, v·ªÅ c√¢y c√† ph√™, ch√°u s·∫Ω nh·∫Øc ch√∫/c√¥ b√≥n ph√¢n ƒë·ªãnh k·ª≥ v√†o s√°ng th·ª© B·∫£y h√†ng tu·∫ßn ·∫°. Ch√∫/c√¥ mu·ªën bi·∫øt v·ªÅ l·ªãch b√≥n ph√¢n hay nh·∫Øc nh·ªü ·∫°?`;
                            break;
                        case 'üí∞ C·∫≠p nh·∫≠t gi√° n√¥ng s·∫£n':
                            response = `D·∫°, v·ªÅ gi√° n√¥ng s·∫£n, ch√°u s·∫Ω c·∫≠p nh·∫≠t th√¥ng tin m·ªõi nh·∫•t cho ch√∫/c√¥ ·∫°. Ch√∫/c√¥ mu·ªën bi·∫øt v·ªÅ gi√° l√∫a hay gi√° tr√°i c√¢y ·∫°?`;
                            break;
                        case 'üå§Ô∏è D·ª± b√°o th·ªùi ti·∫øt n√¥ng v·ª•':
                            response = `ƒê·ªÉ xem d·ª± b√°o th·ªùi ti·∫øt, vui l√≤ng cho t√¥i bi·∫øt t·ªânh/th√†nh ph·ªë c·ªßa b·∫°n.\n_(L∆∞u √Ω: ƒê√¢y l√† d·ªØ li·ªáu gi·∫£ l·∫≠p. Trong phi√™n b·∫£n ch√≠nh th·ª©c s·∫Ω k·∫øt n·ªëi ngu·ªìn kh√≠ t∆∞·ª£ng th·ª±c t·∫ø)._`;
                            break;
                        case 'üåø K·ªπ thu·∫≠t di·ªát c·ªè hi·ªáu qu·∫£':
                            response = `üåø K·ªπ thu·∫≠t di·ªát c·ªè hi·ªáu qu·∫£:\n\nüë®‚Äçüåæ Di·ªát c·ªè th·ªß c√¥ng:\n‚Ä¢ Nh·ªï c·ªè b·∫±ng tay: Hi·ªáu qu·∫£, an to√†n\n‚Ä¢ C·∫Øt c·ªè b·∫±ng li·ªÅm: Nhanh, ti·∫øt ki·ªám\n‚Ä¢ L√†m c·ªè ƒë·ªãnh k·ª≥: 2-3 l·∫ßn/v·ª•\n‚Ä¢ Th·ªùi ƒëi·ªÉm: S√°ng s·ªõm ho·∫∑c chi·ªÅu m√°t\n\nüß™ Thu·ªëc di·ªát c·ªè:\n‚Ä¢ Glyphosate: Di·ªát c·ªè to√†n di·ªán\n‚Ä¢ 2,4-D: Di·ªát c·ªè l√° r·ªông\n‚Ä¢ Paraquat: Di·ªát c·ªè ti·∫øp x√∫c\n‚Ä¢ L∆∞u √Ω: ƒê·ªçc k·ªπ h∆∞·ªõng d·∫´n, b·∫£o h·ªô ƒë·∫ßy ƒë·ªß\n\nüå± Di·ªát c·ªè h·ªØu c∆°:\n‚Ä¢ Mu·ªëi: R·∫£i mu·ªëi v√†o g·ªëc c·ªè\n‚Ä¢ Gi·∫•m: Phun gi·∫•m tr·∫Øng 5%\n‚Ä¢ N∆∞·ªõc s√¥i: ƒê·ªï n∆∞·ªõc s√¥i v√†o g·ªëc\n‚Ä¢ Che ph·ªß: D√πng b·∫°t, r∆°m r·∫°\n\nüõ°Ô∏è Ph√≤ng ng·ª´a c·ªè:\n‚Ä¢ Tr·ªìng d√†y: Gi·∫£m √°nh s√°ng ƒë·∫øn ƒë·∫•t\n‚Ä¢ Che ph·ªß: R∆°m r·∫°, b·∫°t nilon\n‚Ä¢ Lu√¢n canh: Thay ƒë·ªïi c√¢y tr·ªìng\n‚Ä¢ V·ªá sinh: D·ªçn s·∫°ch c·ªè quanh v∆∞·ªùn`;
                            break;
                        default:
                            response = `T√¥i s·∫µn s√†ng h·ªó tr·ª£. ${name} vui l√≤ng cho t√¥i bi·∫øt th√™m chi ti·∫øt v·ªÅ v·∫•n ƒë·ªÅ n√†y.`;
                    }
                    break;
                case 'business':
                     switch(problem) {
                        case 'üí∞ Qu·∫£n l√Ω t√†i ch√≠nh doanh nghi·ªáp':
                            response = `ƒê·ªÉ ph√¢n t√≠ch, vui l√≤ng cung c·∫•p cho t√¥i th√¥ng tin v·ªÅ ng√†nh h√†ng v√† m·ªôt v√†i ƒë·ªëi th·ªß ch√≠nh c·ªßa ${userProfile.name || 'b·∫°n'}.`;
                            break;
                        case 'üì± Digital Marketing & Social Media':
                            response = `Ch·∫Øc ch·∫Øn r·ªìi. ${userProfile.name || 'B·∫°n'} ƒëang quan t√¢m ƒë·∫øn marketing online (Facebook, Google), marketing t·∫°i ƒëi·ªÉm b√°n hay k√™nh n√†o kh√°c?`;
                            break;
                        case 'üë• Qu·∫£n l√Ω nh√¢n s·ª± & quy tr√¨nh':
                            response = `ƒê·ªÉ t·ªëi ∆∞u chi ph√≠, ch√∫ng ta c√≥ th·ªÉ r√† so√°t c√°c kho·∫£n chi cho v·∫≠n h√†nh, nh√¢n s·ª±, marketing... ${userProfile.name || 'B·∫°n'} c√≥ mu·ªën xem qua m·ªôt checklist c√°c h·∫°ng m·ª•c c·∫ßn t·ªëi ∆∞u kh√¥ng?`;
                            break;
                        case 'üìä Ph√¢n t√≠ch th·ªã tr∆∞·ªùng & ƒë·ªëi th·ªß':
                            response = `ƒê·ªÉ ph√¢n t√≠ch, vui l√≤ng cung c·∫•p cho t√¥i th√¥ng tin v·ªÅ ng√†nh h√†ng v√† m·ªôt v√†i ƒë·ªëi th·ªß ch√≠nh c·ªßa ${userProfile.name || 'b·∫°n'}.`;
                            break;
                        case 'üìà X√¢y d·ª±ng k·∫ø ho·∫°ch kinh doanh':
                            response = `X√¢y d·ª±ng k·∫ø ho·∫°ch kinh doanh l√† m·ªôt b∆∞·ªõc quan tr·ªçng. Ch√∫ng ta c√≥ th·ªÉ b·∫Øt ƒë·∫ßu b·∫±ng vi·ªác x√°c ƒë·ªãnh m·ª•c ti√™u, th·ªã tr∆∞·ªùng, s·∫£n ph·∫©m v√† chi·∫øn l∆∞·ª£c marketing. ${userProfile.name || 'B·∫°n'} mu·ªën b·∫Øt ƒë·∫ßu v·ªõi ph·∫ßn n√†o tr∆∞·ªõc?`;
                            break;
                        case 'üéØ T·ªëi ∆∞u h√≥a chi ph√≠ & hi·ªáu qu·∫£':
                            response = `ƒê·ªÉ t·ªëi ∆∞u chi ph√≠, ch√∫ng ta c√≥ th·ªÉ r√† so√°t c√°c kho·∫£n chi cho v·∫≠n h√†nh, nh√¢n s·ª±, marketing... ${userProfile.name || 'B·∫°n'} c√≥ mu·ªën xem qua m·ªôt checklist c√°c h·∫°ng m·ª•c c·∫ßn t·ªëi ∆∞u kh√¥ng?`;
                            break;
                        case 'üîç SEO & SEM Marketing':
                            response = `ƒê·ªÉ t·ªëi ∆∞u chi ph√≠, ch√∫ng ta c√≥ th·ªÉ r√† so√°t c√°c kho·∫£n chi cho v·∫≠n h√†nh, nh√¢n s·ª±, marketing... ${userProfile.name || 'B·∫°n'} c√≥ mu·ªën xem qua m·ªôt checklist c√°c h·∫°ng m·ª•c c·∫ßn t·ªëi ∆∞u kh√¥ng?`;
                            break;
                        case 'üìù Content Marketing & Branding':
                            response = `Ch·∫Øc ch·∫Øn r·ªìi. ${userProfile.name || 'B·∫°n'} ƒëang quan t√¢m ƒë·∫øn n·ªôi dung marketing v√† x√¢y d·ª±ng th∆∞∆°ng hi·ªáu. Vui l√≤ng cho t√¥i bi·∫øt b·∫°n ƒëang l√†m vi·ªác trong lƒ©nh v·ª±c n√†o ƒë·ªÉ t√¥i c√≥ th·ªÉ h·ªó tr·ª£ t·ªët h∆°n.`;
                            break;
                        default:
                            response = `T√¥i s·∫µn s√†ng h·ªó tr·ª£. ${userProfile.name || 'B·∫°n'} vui l√≤ng cho t√¥i bi·∫øt th√™m chi ti·∫øt v·ªÅ v·∫•n ƒë·ªÅ n√†y.`;
                    }
                    break;
                case 'sales':
                    switch(problem) {
                        case 'üìù Vi·∫øt b√†i post review s·∫£n ph·∫©m thu h√∫t':
                            response = `üìù **C√°ch vi·∫øt b√†i post review s·∫£n ph·∫©m thu h√∫t:**\n\n- B·∫Øt ƒë·∫ßu b·∫±ng m·ªôt c√¢u chuy·ªán th·ª±c t·∫ø ho·∫∑c c·∫£m x√∫c c√° nh√¢n\n- ƒê∆∞a ra v·∫•n ƒë·ªÅ m√† s·∫£n ph·∫©m gi·∫£i quy·∫øt\n- M√¥ t·∫£ tr·∫£i nghi·ªám s·ª≠ d·ª•ng: h√¨nh ·∫£nh, c·∫£m nh·∫≠n, k·∫øt qu·∫£\n- ƒê∆∞a ra b·∫±ng ch·ª©ng (·∫£nh/video, feedback kh√°ch h√†ng)\n- K√™u g·ªçi h√†nh ƒë·ªông: \"Inbox ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n chi ti·∫øt!\"\n\n**V√≠ d·ª•:**\n\"T·ª´ ng√†y d√πng m√°y xay n√†y, s√°ng n√†o c≈©ng c√≥ ly sinh t·ªë m√°t l·∫°nh ch·ªâ sau 2 ph√∫t. Ai l∆∞·ªùi nh∆∞ m√¨nh n√™n th·ª≠ nh√©!\"`;
                            break;
                        case 'üé• Quay/ch·ª•p s·∫£n ph·∫©m h·∫•p d·∫´n':
                            response = `üé• **M·∫πo quay/ch·ª•p s·∫£n ph·∫©m h·∫•p d·∫´n:**\n\n- Ch·ªçn n·ªÅn s√°ng, ƒë∆°n gi·∫£n ƒë·ªÉ l√†m n·ªïi b·∫≠t s·∫£n ph·∫©m\n- S·ª≠ d·ª•ng √°nh s√°ng t·ª± nhi√™n ho·∫∑c ƒë√®n led\n- Quay/ch·ª•p nhi·ªÅu g√≥c: t·ªïng th·ªÉ, c·∫≠n c·∫£nh chi ti·∫øt, khi s·ª≠ d·ª•ng th·ª±c t·∫ø\n- Th√™m ƒë·∫°o c·ª• ho·∫∑c tay ng∆∞·ªùi ƒë·ªÉ t·∫°o c·∫£m gi√°c th·∫≠t\n- Video n√™n ng·∫Øn g·ªçn, t·∫≠p trung v√†o ƒëi·ªÉm m·∫°nh s·∫£n ph·∫©m\n\n**App g·ª£i √Ω:** CapCut, InShot, Lightroom Mobile.`;
                            break;
                        case 'üí∞ ƒê·ªãnh gi√° s·∫£n ph·∫©m h·ª£p l√Ω':
                            response = `üí∞ **C√°ch ƒë·ªãnh gi√° s·∫£n ph·∫©m h·ª£p l√Ω:**\n\n- T√≠nh t·ªïng chi ph√≠ (gi√° nh·∫≠p, v·∫≠n chuy·ªÉn, ƒë√≥ng g√≥i, marketing...)\n- Tham kh·∫£o gi√° th·ªã tr∆∞·ªùng, ƒë·ªëi th·ªß\n- X√°c ƒë·ªãnh gi√° tr·ªã gia tƒÉng (d·ªãch v·ª•, b·∫£o h√†nh, qu√† t·∫∑ng k√®m)\n- ƒê·∫∑t gi√° c√≥ th·ªÉ linh ho·∫°t (gi√° ni√™m y·∫øt, gi√° ∆∞u ƒë√£i, combo)\n- ƒê·ª´ng qu√™n t√≠nh l·ª£i nhu·∫≠n mong mu·ªën!`;
                            break;
                        case 'üí¨ C√°ch n√≥i chuy·ªán v·ªõi kh√°ch h√†ng':
                            response = `üí¨ **C√°ch n√≥i chuy·ªán v·ªõi kh√°ch h√†ng:**\n\n- Ch√†o h·ªèi th√¢n thi·ªán, x∆∞ng h√¥ ph√π h·ª£p\n- L·∫Øng nghe k·ªπ nhu c·∫ßu, ƒë·∫∑t c√¢u h·ªèi m·ªü\n- T∆∞ v·∫•n ƒë√∫ng tr·ªçng t√¢m, kh√¥ng n√≥i lan man\n- Lu√¥n x√°c nh·∫≠n l·∫°i th√¥ng tin ƒë∆°n h√†ng\n- K·∫øt th√∫c b·∫±ng l·ªùi c·∫£m ∆°n v√† nh·∫Øc nh·ªü ∆∞u ƒë√£i n·∫øu c√≥\n\n**V√≠ d·ª•:**\n\"D·∫° em c·∫£m ∆°n ch·ªã ƒë√£ quan t√¢m, ch·ªã c·∫ßn t∆∞ v·∫•n v·ªÅ m·∫´u n√†o ·∫°?\"`;
                            break;
                        case 'ü§ù X·ª≠ l√Ω kh√°ch h√†ng tr·∫£ gi√°':
                            response = `ü§ù **C√°ch x·ª≠ l√Ω kh√°ch h√†ng tr·∫£ gi√°:**\n\n- Lu√¥n gi·ªØ th√°i ƒë·ªô vui v·∫ª, t√¥n tr·ªçng\n- Gi·∫£i th√≠ch l√Ω do gi√° (ch·∫•t l∆∞·ª£ng, d·ªãch v·ª•, b·∫£o h√†nh...)\n- ƒê∆∞a ra ∆∞u ƒë√£i nh·ªè (freeship, qu√† t·∫∑ng, gi·∫£m gi√° nh·∫π n·∫øu h·ª£p l√Ω)\n- N·∫øu kh√¥ng th·ªÉ gi·∫£m, h√£y nh·∫•n m·∫°nh gi√° tr·ªã s·∫£n ph·∫©m\n- ƒê·ª´ng qu√™n c·∫£m ∆°n kh√°ch d√π c√≥ ch·ªët ƒë∆°n hay kh√¥ng!`;
                            break;
                        default:
                            response = `T√¥i s·∫µn s√†ng h·ªó tr·ª£. ${name} vui l√≤ng cho t√¥i bi·∫øt th√™m chi ti·∫øt v·ªÅ v·∫•n ƒë·ªÅ n√†y.`;
                    }
                            break;
                case 'office':
                    switch(problem) {
                        case '‚úâÔ∏è G·ª£i √Ω vi·∫øt mail chuy√™n nghi·ªáp':
                            response = `‚úâÔ∏è **G·ª£i √Ω vi·∫øt mail chuy√™n nghi·ªáp:**\n\n- Ti√™u ƒë·ªÅ r√µ r√†ng, ng·∫Øn g·ªçn (VD: [ACTION] Y√™u c·∫ßu b√°o c√°o tu·∫ßn)\n- L·ªùi ch√†o trang tr·ªçng: "K√≠nh g·ª≠i Anh/Ch·ªã..."\n- N·ªôi dung: Tr√¨nh b√†y m·∫°ch l·∫°c, chia ƒëo·∫°n, g·∫°ch ƒë·∫ßu d√≤ng\n- K·∫øt th√∫c: "Tr√¢n tr·ªçng,", "Best regards,"\n- Ch·ªØ k√Ω: H·ªç t√™n, ch·ª©c v·ª•, c√¥ng ty, s·ªë ƒëi·ªán tho·∫°i\n\n**M·∫πo:** Lu√¥n ki·ªÉm tra l·∫°i l·ªói ch√≠nh t·∫£ v√† t·ªáp ƒë√≠nh k√®m tr∆∞·ªõc khi g·ª≠i!`;
                            break;
                        case 'üóÇÔ∏è C√°ch s·∫Øp x·∫øp timeline c√¥ng vi·ªác':
                            response = `üóÇÔ∏è **C√°ch s·∫Øp x·∫øp timeline c√¥ng vi·ªác:**\n\n1. Li·ªát k√™ t·∫•t c·∫£ c√°c ƒë·∫ßu vi·ªác c·∫ßn l√†m\n2. ∆Øu ti√™n theo m·ª©c ƒë·ªô quan tr·ªçng/kh·∫©n c·∫•p (Ma tr·∫≠n Eisenhower)\n3. Chia nh·ªè c√¥ng vi·ªác l·ªõn th√†nh c√°c b∆∞·ªõc nh·ªè\n4. S·ª≠ d·ª•ng c√¥ng c·ª•: Google Calendar, Trello, Notion...\n5. ƒê·∫∑t deadline r√µ r√†ng cho t·ª´ng nhi·ªám v·ª•\n6. ƒê√°nh gi√° l·∫°i ti·∫øn ƒë·ªô m·ªói cu·ªëi ng√†y/tu·∫ßn`;
                            break;
                        case 'üìÖ L·∫≠p k·∫ø ho·∫°ch tu·∫ßn hi·ªáu qu·∫£':
                            response = `üìÖ **L·∫≠p k·∫ø ho·∫°ch tu·∫ßn hi·ªáu qu·∫£:**\n\n- ƒê·∫ßu tu·∫ßn: X√°c ƒë·ªãnh 3 m·ª•c ti√™u l·ªõn nh·∫•t\n- Chia nh·ªè m·ª•c ti√™u th√†nh c√°c task h√†ng ng√†y\n- S·∫Øp x·∫øp l·ªãch h·ªçp, deadline, c√¥ng vi·ªác c√° nh√¢n\n- ƒê·ªÉ th·ªùi gian d·ª± ph√≤ng cho vi·ªác ph√°t sinh\n- Cu·ªëi tu·∫ßn: T·ªïng k·∫øt, r√∫t kinh nghi·ªám, ƒëi·ªÅu ch·ªânh k·∫ø ho·∫°ch tu·∫ßn sau`;
                            break;
                        case '‚è±Ô∏è M·∫πo qu·∫£n l√Ω th·ªùi gian':
                            response = `‚è±Ô∏è **M·∫πo qu·∫£n l√Ω th·ªùi gian:**\n\n- K·ªπ thu·∫≠t Pomodoro: 25 ph√∫t t·∫≠p trung, 5 ph√∫t ngh·ªâ\n- Time blocking: Chia khung gi·ªù cho t·ª´ng lo·∫°i vi·ªác\n- ∆Øu ti√™n vi·ªác quan tr·ªçng tr∆∞·ªõc (Eat That Frog)\n- H·∫°n ch·∫ø ƒëa nhi·ªám, t·∫Øt th√¥ng b√°o khi l√†m vi·ªác\n- T·ªïng k·∫øt cu·ªëi ng√†y ƒë·ªÉ ƒëi·ªÅu ch·ªânh th√≥i quen`;
                            break;
                        case 'üìä H√†m Excel th√¥ng d·ª•ng cho vƒÉn ph√≤ng':
                            response = `üìä **H√†m Excel th√¥ng d·ª•ng:**\n\n- SUM, AVERAGE, COUNT: T√≠nh t·ªïng, trung b√¨nh, ƒë·∫øm\n- IF: H√†m ƒëi·ªÅu ki·ªán\n- VLOOKUP/HLOOKUP: T√¨m ki·∫øm d·ªØ li·ªáu\n- CONCATENATE: N·ªëi chu·ªói\n- PIVOTTABLE: T·ªïng h·ª£p, ph√¢n t√≠ch d·ªØ li·ªáu\n\n**Ph√≠m t·∫Øt hay:** Ctrl+T (t·∫°o b·∫£ng), Ctrl+Shift+L (l·ªçc), Alt+= (AutoSum)`;
                            break;
                        default:
                            response = `T√¥i s·∫µn s√†ng h·ªó tr·ª£. ${userProfile.name || 'b·∫°n'} vui l√≤ng cho t√¥i bi·∫øt th√™m chi ti·∫øt v·ªÅ v·∫•n ƒë·ªÅ n√†y.`;
                    }
                    break;
                default:
                    response = `T√¥i ƒë√£ ghi nh·∫≠n y√™u c·∫ßu c·ªßa b·∫°n v·ªÅ "${problem}". Vui l√≤ng cung c·∫•p th√™m chi ti·∫øt ƒë·ªÉ t√¥i c√≥ th·ªÉ h·ªó tr·ª£ t·ªët nh·∫•t.`;
            }
            return response;
        }

        function handleProblemSelection(problem) {
            // Th√™m tin nh·∫Øn ng∆∞·ªùi d√πng
            addMessage(problem, true);
            
            // L∆∞u v·∫•n ƒë·ªÅ ƒë∆∞·ª£c ch·ªçn
            userProfile.selectedProblem = problem;
            
            // AI ph·∫£n h·ªìi v√† y√™u c·∫ßu th√¥ng tin chi ti·∫øt
            setTimeout(() => {
                const response = getProblemResponse(problem);
                addMessage(response, false);
                
                // Hi·ªÉn th·ªã form cung c·∫•p th√¥ng tin
                setTimeout(() => {
                    addInformationForm(problem);
                }, 1000);
            }, 1000);
        }

        function getProblemResponse(problem) {
            const responses = {
                'Ch√∫/c√¥ ƒëang tr·ªìng lo·∫°i c√¢y g√¨?': 'D·∫°, ch√°u hi·ªÉu ch√∫/c√¥ mu·ªën t∆∞ v·∫•n v·ªÅ c√¢y tr·ªìng. H√£y cho ch√°u bi·∫øt th√™m th√¥ng tin chi ti·∫øt ·∫°.',
                'Di·ªán t√≠ch canh t√°c c·ªßa ch√∫/c√¥ l√† bao nhi√™u?': 'D·∫°, di·ªán t√≠ch canh t√°c r·∫•t quan tr·ªçng ƒë·ªÉ ch√°u ƒë∆∞a ra t∆∞ v·∫•n ph√π h·ª£p. H√£y cung c·∫•p th√¥ng tin chi ti·∫øt ·∫°.',
                'Ch√∫/c√¥ g·∫∑p kh√≥ khƒÉn g√¨ v·ªÅ s√¢u b·ªánh?': 'D·∫°, s√¢u b·ªánh l√† v·∫•n ƒë·ªÅ ph·ªï bi·∫øn trong n√¥ng nghi·ªáp. H√£y m√¥ t·∫£ chi ti·∫øt t√¨nh tr·∫°ng hi·ªán t·∫°i ·∫°.',
                'Ch√∫/c√¥ mu·ªën tƒÉng nƒÉng su·∫•t nh∆∞ th·∫ø n√†o?': 'D·∫°, tƒÉng nƒÉng su·∫•t l√† m·ª•c ti√™u quan tr·ªçng. H√£y cho ch√°u bi·∫øt t√¨nh h√¨nh hi·ªán t·∫°i ·∫°.',
                'Th·ªùi ti·∫øt hi·ªán t·∫°i ·∫£nh h∆∞·ªüng g√¨ ƒë·∫øn c√¢y tr·ªìng?': 'D·∫°, th·ªùi ti·∫øt ·∫£nh h∆∞·ªüng l·ªõn ƒë·∫øn c√¢y tr·ªìng. H√£y m√¥ t·∫£ t√¨nh h√¨nh c·ª• th·ªÉ ·∫°.',
                'Ch√∫/c√¥ c√≥ nu√¥i g√†, v·ªãt g√¨ kh√¥ng?': 'D·∫°, chƒÉn nu√¥i gia c·∫ßm c≈©ng r·∫•t quan tr·ªçng trong n√¥ng nghi·ªáp. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ c√°ch chƒÉm s√≥c v√† ph√≤ng b·ªánh hi·ªáu qu·∫£ ·∫°.',
                'Ch√∫/c√¥ mu·ªën bi·∫øt v·ªÅ k·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi kh√¥ng?': 'D·∫°, d∆∞a l∆∞·ªõi l√† c√¢y tr·ªìng c√≥ gi√° tr·ªã kinh t·∫ø cao. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ k·ªπ thu·∫≠t tr·ªìng t·ª´ A-Z ·∫°.',
                'Ch√∫/c√¥ c·∫ßn th√¥ng tin gi√° n√¥ng s·∫£n kh√¥ng?': 'D·∫°, ch√°u s·∫Ω c·∫≠p nh·∫≠t th√¥ng tin gi√° n√¥ng s·∫£n m·ªõi nh·∫•t cho ch√∫/c√¥ ·∫°.',
                'B·∫°n kinh doanh lƒ©nh v·ª±c g√¨?': 'T√¥i s·∫Ω gi√∫p b·∫°n ph√°t tri·ªÉn chi·∫øn l∆∞·ª£c kinh doanh. H√£y cung c·∫•p th√¥ng tin chi ti·∫øt.',
                'Quy m√¥ doanh nghi·ªáp c·ªßa b·∫°n?': 'Quy m√¥ doanh nghi·ªáp ·∫£nh h∆∞·ªüng ƒë·∫øn chi·∫øn l∆∞·ª£c. H√£y cho t√¥i bi·∫øt th√™m.',
                'B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong marketing?': 'Marketing l√† ch√¨a kh√≥a th√†nh c√¥ng. H√£y m√¥ t·∫£ kh√≥ khƒÉn c·ª• th·ªÉ.',
                'B·∫°n mu·ªën m·ªü r·ªông th·ªã tr∆∞·ªùng nh∆∞ th·∫ø n√†o?': 'M·ªü r·ªông th·ªã tr∆∞·ªùng c·∫ßn chi·∫øn l∆∞·ª£c ph√π h·ª£p. H√£y cung c·∫•p th√¥ng tin.',
                'Doanh thu hi·ªán t·∫°i c·ªßa b·∫°n ra sao?': 'Doanh thu ph·∫£n √°nh hi·ªáu qu·∫£ kinh doanh. H√£y chia s·∫ª t√¨nh h√¨nh.',
                'B·∫°n d·∫°y m√¥n h·ªçc g√¨?': 'T√¥i s·∫Ω gi√∫p b·∫°n c·∫£i thi·ªán ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y. H√£y cung c·∫•p th√¥ng tin.',
                'B·∫°n d·∫°y c·∫•p h·ªçc n√†o?': 'M·ªói c·∫•p h·ªçc c√≥ ƒë·∫∑c th√π ri√™ng. H√£y cho t√¥i bi·∫øt th√™m.',
                'B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong gi·∫£ng d·∫°y?': 'Gi·∫£ng d·∫°y c√≥ nhi·ªÅu th√°ch th·ª©c. H√£y m√¥ t·∫£ kh√≥ khƒÉn c·ª• th·ªÉ.',
                'B·∫°n mu·ªën c·∫£i thi·ªán ph∆∞∆°ng ph√°p d·∫°y nh∆∞ th·∫ø n√†o?': 'C·∫£i thi·ªán ph∆∞∆°ng ph√°p d·∫°y l√† m·ª•c ti√™u t·ªët. H√£y chia s·∫ª.',
                'Sƒ© s·ªë l·ªõp h·ªçc c·ªßa b·∫°n l√† bao nhi√™u?': 'Sƒ© s·ªë ·∫£nh h∆∞·ªüng ƒë·∫øn ph∆∞∆°ng ph√°p d·∫°y. H√£y cung c·∫•p th√¥ng tin.',
                'B·∫°n chuy√™n v·ªÅ ng√¥n ng·ªØ l·∫≠p tr√¨nh n√†o?': 'T√¥i s·∫Ω gi√∫p b·∫°n v·ªõi coding. H√£y cung c·∫•p th√¥ng tin chi ti·∫øt.',
                'B·∫°n l√†m frontend hay backend?': 'Frontend v√† backend c√≥ ƒë·∫∑c th√π kh√°c nhau. H√£y cho t√¥i bi·∫øt th√™m.',
                'B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong coding?': 'Coding c√≥ nhi·ªÅu th√°ch th·ª©c. H√£y m√¥ t·∫£ v·∫•n ƒë·ªÅ c·ª• th·ªÉ.',
                'B·∫°n mu·ªën h·ªçc framework m·ªõi n√†o?': 'Framework m·ªõi gi√∫p n√¢ng cao k·ªπ nƒÉng. H√£y chia s·∫ª m·ª•c ti√™u.',
                'D·ª± √°n hi·ªán t·∫°i b·∫°n ƒëang l√†m l√† g√¨?': 'D·ª± √°n hi·ªán t·∫°i r·∫•t quan tr·ªçng. H√£y cung c·∫•p th√¥ng tin.',
                'B·∫°n chuy√™n khoa g√¨?': 'T√¥i s·∫Ω h·ªó tr·ª£ b·∫°n trong lƒ©nh v·ª±c y t·∫ø. H√£y cung c·∫•p th√¥ng tin.',
                'B·∫°n l√†m vi·ªác ·ªü b·ªánh vi·ªán hay ph√≤ng kh√°m?': 'M√¥i tr∆∞·ªùng l√†m vi·ªác ·∫£nh h∆∞·ªüng ƒë·∫øn ph∆∞∆°ng ph√°p. H√£y cho t√¥i bi·∫øt.',
                'B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong ch·∫©n ƒëo√°n?': 'Ch·∫©n ƒëo√°n l√† k·ªπ nƒÉng quan tr·ªçng. H√£y m√¥ t·∫£ kh√≥ khƒÉn.',
                'B·∫°n mu·ªën c·∫≠p nh·∫≠t ki·∫øn th·ª©c y h·ªçc nh∆∞ th·∫ø n√†o?': 'C·∫≠p nh·∫≠t ki·∫øn th·ª©c l√† c·∫ßn thi·∫øt. H√£y chia s·∫ª m·ª•c ti√™u.',
                'S·ªë l∆∞·ª£ng b·ªánh nh√¢n trung b√¨nh m·ªói ng√†y?': 'S·ªë l∆∞·ª£ng b·ªánh nh√¢n ·∫£nh h∆∞·ªüng ƒë·∫øn quy tr√¨nh. H√£y cung c·∫•p th√¥ng tin.',
                'B·∫°n chuy√™n v·ªÅ lƒ©nh v·ª±c ph√°p l√Ω n√†o?': 'T√¥i s·∫Ω h·ªó tr·ª£ b·∫°n trong lƒ©nh v·ª±c ph√°p l√Ω. H√£y cung c·∫•p th√¥ng tin.',
                'B·∫°n l√†m vi·ªác ƒë·ªôc l·∫≠p hay c√¥ng ty lu·∫≠t?': 'Lo·∫°i h√¨nh l√†m vi·ªác ·∫£nh h∆∞·ªüng ƒë·∫øn ph∆∞∆°ng ph√°p. H√£y cho t√¥i bi·∫øt.',
                'B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong t∆∞ v·∫•n?': 'T∆∞ v·∫•n ph√°p l√Ω c√≥ nhi·ªÅu th√°ch th·ª©c. H√£y m√¥ t·∫£ kh√≥ khƒÉn.',
                'B·∫°n mu·ªën m·ªü r·ªông chuy√™n m√¥n nh∆∞ th·∫ø n√†o?': 'M·ªü r·ªông chuy√™n m√¥n l√† m·ª•c ti√™u t·ªët. H√£y chia s·∫ª.',
                'Lo·∫°i v·ª• √°n b·∫°n th∆∞·ªùng x·ª≠ l√Ω l√† g√¨?': 'Lo·∫°i v·ª• √°n ·∫£nh h∆∞·ªüng ƒë·∫øn chuy√™n m√¥n. H√£y cung c·∫•p th√¥ng tin.',
                'B·∫°n l√†m vi·ªác trong lƒ©nh v·ª±c g√¨?': 'T√¥i s·∫Ω h·ªó tr·ª£ b·∫°n trong c√¥ng vi·ªác. H√£y cung c·∫•p th√¥ng tin.',
                'C√¥ng vi·ªác hi·ªán t·∫°i c·ªßa b·∫°n nh∆∞ th·∫ø n√†o?': 'C√¥ng vi·ªác hi·ªán t·∫°i r·∫•t quan tr·ªçng. H√£y cho t√¥i bi·∫øt th√™m.',
                'B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong c√¥ng vi·ªác?': 'M·ªói c√¥ng vi·ªác c√≥ th√°ch th·ª©c ri√™ng. H√£y m√¥ t·∫£ kh√≥ khƒÉn.',
                'B·∫°n mu·ªën ph√°t tri·ªÉn k·ªπ nƒÉng g√¨?': 'Ph√°t tri·ªÉn k·ªπ nƒÉng l√† m·ª•c ti√™u t·ªët. H√£y chia s·∫ª.',
                'M·ª•c ti√™u ngh·ªÅ nghi·ªáp c·ªßa b·∫°n l√† g√¨?': 'M·ª•c ti√™u ngh·ªÅ nghi·ªáp ƒë·ªãnh h∆∞·ªõng ph√°t tri·ªÉn. H√£y cung c·∫•p th√¥ng tin.'
            };
            
            return responses[problem] || 'T√¥i hi·ªÉu v·∫•n ƒë·ªÅ c·ªßa b·∫°n. H√£y cung c·∫•p th√¥ng tin chi ti·∫øt ƒë·ªÉ t√¥i c√≥ th·ªÉ h·ªó tr·ª£ t·ªët h∆°n.';
        }

        function addInformationForm(problem) {
            const messagesContainer = document.getElementById('messages');
            const formDiv = document.createElement('div');
            formDiv.className = 'flex justify-start';
            
            const formBubble = document.createElement('div');
            formBubble.className = 'message-bubble px-4 py-3 rounded-2xl shadow-sm bg-green-50 border border-green-200';
            
            const formTitle = document.createElement('p');
            formTitle.className = 'text-sm text-gray-700 mb-3 font-medium';
            formTitle.textContent = `V·ªÅ v·∫•n ƒë·ªÅ "${problem}", h√£y cho t√¥i bi·∫øt th√™m chi ti·∫øt:`;
            
            const form = document.createElement('form');
            form.className = 'space-y-3';
            form.onsubmit = (e) => {
                e.preventDefault();
                const details = form.querySelector('textarea').value;
                if (details.trim()) {
                    // X√≥a form
                    formDiv.remove();
                    
                    // Th√™m tin nh·∫Øn c·ªßa user
                    addMessage(details, true);
                    
                    // G·ª≠i ph·∫£n h·ªìi AI
                    setTimeout(() => {
                        const response = getAIResponse(currentCareer, problem, details);
                        addMessage(response, false);
                    }, 500);
                }
            };
            
            const textarea = document.createElement('textarea');
            textarea.className = 'w-full p-3 border border-gray-300 rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent';
            textarea.placeholder = 'M√¥ t·∫£ chi ti·∫øt v·∫•n ƒë·ªÅ c·ªßa b·∫°n...';
            textarea.rows = 3;
            textarea.required = true;
            
            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.className = 'px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors';
            submitButton.textContent = 'G·ª≠i';
            
            form.appendChild(textarea);
            form.appendChild(submitButton);
            formBubble.appendChild(formTitle);
            formBubble.appendChild(form);
            formDiv.appendChild(formBubble);
            messagesContainer.appendChild(formDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Focus v√†o textarea
            setTimeout(() => {
                textarea.focus();
            }, 100);
        }

        function addDetailForm(problem) {
            const messagesContainer = document.getElementById('messages');
            const formDiv = document.createElement('div');
            formDiv.className = 'flex justify-start';
            
            const formBubble = document.createElement('div');
            formBubble.className = 'message-bubble px-4 py-3 rounded-2xl shadow-sm bg-green-50 border border-green-200';
            
            const formTitle = document.createElement('p');
            formTitle.className = 'text-sm text-gray-700 mb-3 font-medium';
            formTitle.textContent = `V·ªÅ v·∫•n ƒë·ªÅ "${problem}", h√£y cho t√¥i bi·∫øt th√™m chi ti·∫øt:`;
            
            const form = document.createElement('form');
            form.className = 'space-y-3';
            form.onsubmit = (e) => {
                e.preventDefault();
                const details = form.querySelector('textarea').value;
                if (details.trim()) {
                    // X√≥a form
                    formDiv.remove();
                    
                    // Th√™m tin nh·∫Øn c·ªßa user
                    addMessage(details, true);
                    
                    // G·ª≠i ph·∫£n h·ªìi AI
                    setTimeout(() => {
                        const response = getAIResponse(currentCareer, problem, details);
                        addMessage(response, false);
                    }, 500);
                }
            };
            
            const textarea = document.createElement('textarea');
            textarea.className = 'w-full p-3 border border-gray-300 rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent';
            textarea.placeholder = 'M√¥ t·∫£ chi ti·∫øt v·∫•n ƒë·ªÅ c·ªßa b·∫°n...';
            textarea.rows = 3;
            textarea.required = true;
            
            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.className = 'px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors';
            submitButton.textContent = 'G·ª≠i';
            
            form.appendChild(textarea);
            form.appendChild(submitButton);
            formBubble.appendChild(formTitle);
            formBubble.appendChild(form);
            formDiv.appendChild(formBubble);
            messagesContainer.appendChild(formDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Focus v√†o textarea
            setTimeout(() => {
                textarea.focus();
            }, 100);
        }

        function changeCareer() {
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('careerSelection').classList.remove('hidden');
            document.getElementById('messages').innerHTML = '';
        }

        function shareApp() {
            if (navigator.share) {
                navigator.share({
                    title: 'V AI',
                    text: 'Tr·ª£ l√Ω AI th√¥ng minh cho m·ªçi ngh·ªÅ nghi·ªáp',
                    url: window.location.href
                });
            }
        }

        function addMessage(text, isUser) {
            console.log('addMessage called:', text, isUser); // Debug log
            
            const messagesContainer = document.getElementById('messages');
            console.log('messagesContainer:', messagesContainer); // Debug log
            
            if (!messagesContainer) {
                console.error('messagesContainer not found!'); // Debug log
                return;
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'}`;
            
            const messageBubble = document.createElement('div');
            messageBubble.className = `message-bubble px-4 py-3 rounded-2xl shadow-sm ${
                isUser
                    ? 'bg-blue-500 text-white'
                    : 'bg-gray-100 text-gray-800 border border-gray-200'
            }`;
            
            const messageText = document.createElement('p');
            messageText.className = 'whitespace-pre-wrap text-sm leading-relaxed';
            messageText.textContent = text;
            
            messageBubble.appendChild(messageText);
            messageDiv.appendChild(messageBubble);
            messagesContainer.appendChild(messageDiv);
            
            console.log('Message added successfully'); // Debug log
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function addTypingIndicator() {
            const messagesContainer = document.getElementById('messages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'flex justify-start';
            typingDiv.id = 'typing-indicator';
            
            const typingBubble = document.createElement('div');
            typingBubble.className = 'bg-gray-100 text-gray-800 px-4 py-3 rounded-2xl border border-gray-200';
            
            const dots = document.createElement('div');
            dots.className = 'flex items-center space-x-1';
            dots.innerHTML = `
                <div class="w-2 h-2 bg-gray-400 rounded-full typing-animation"></div>
                <div class="w-2 h-2 bg-gray-400 rounded-full typing-animation" style="animation-delay: 0.1s"></div>
                <div class="w-2 h-2 bg-gray-400 rounded-full typing-animation" style="animation-delay: 0.2s"></div>
            `;
            
            typingBubble.appendChild(dots);
            typingDiv.appendChild(typingBubble);
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function getAIResponse(career, problem, details) {
            const careerData = careerResponses[career];
            if (!careerData) return 'Xin l·ªói, t√¥i kh√¥ng th·ªÉ x·ª≠ l√Ω y√™u c·∫ßu n√†y.';
            
            // L∆∞u th√¥ng tin user
            userProfile.career = career;
            userProfile.problem = problem;
            userProfile.details = details;
            localStorage.setItem('userProfile', JSON.stringify(userProfile));
            
            // L·∫•y th√¥ng tin c√° nh√¢n ƒë√£ l∆∞u
            const personalInfo = userProfile.personalInfo || '';
            
            // T·∫°o ph·∫£n h·ªìi d·ª±a tr√™n ngh·ªÅ nghi·ªáp v√† v·∫•n ƒë·ªÅ
            let response = `C·∫£m ∆°n b·∫°n ƒë√£ chia s·∫ª th√¥ng tin v·ªÅ v·∫•n ƒë·ªÅ "${problem}". `;
            
            // Th√™m t∆∞ v·∫•n c·ª• th·ªÉ d·ª±a tr√™n ngh·ªÅ nghi·ªáp v√† th√¥ng tin c√° nh√¢n
            switch(career) {
                case 'farmer':
                    response += `D·∫°, d·ª±a tr√™n th√¥ng tin c√° nh√¢n c·ªßa ch√∫/c√¥ v√† v·∫•n ƒë·ªÅ "${problem}", ch√°u c√≥ m·ªôt s·ªë g·ª£i √Ω:
                    
‚Ä¢ **Ph√¢n t√≠ch t√¨nh hu·ªëng**: ${details}
‚Ä¢ **Gi·∫£i ph√°p ƒë·ªÅ xu·∫•t**: √Åp d·ª•ng k·ªπ thu·∫≠t canh t√°c hi·ªán ƒë·∫°i ph√π h·ª£p v·ªõi ƒëi·ªÅu ki·ªán c·ªßa ch√∫/c√¥
‚Ä¢ **T√†i nguy√™n h·ªØu √≠ch**: Tham kh·∫£o c√°c m√¥ h√¨nh n√¥ng nghi·ªáp b·ªÅn v·ªØng
‚Ä¢ **B∆∞·ªõc ti·∫øp theo**: Theo d√µi v√† ƒë√°nh gi√° k·∫øt qu·∫£

Ch√∫/c√¥ c√≥ mu·ªën ch√°u t∆∞ v·∫•n th√™m v·ªÅ v·∫•n ƒë·ªÅ kh√°c kh√¥ng ·∫°?`;
                    break;
                    
                case 'business':
                    response += `D·ª±a tr√™n t√¨nh h√¨nh kinh doanh c·ªßa b·∫°n v√† v·∫•n ƒë·ªÅ "${problem}", t√¥i c√≥ m·ªôt s·ªë t∆∞ v·∫•n:
                    
‚Ä¢ **Ph√¢n t√≠ch th·ªã tr∆∞·ªùng**: ƒê√°nh gi√° c∆° h·ªôi v√† r·ªßi ro ph√π h·ª£p v·ªõi quy m√¥ c·ªßa b·∫°n
‚Ä¢ **Chi·∫øn l∆∞·ª£c ƒë·ªÅ xu·∫•t**: Ph√°t tri·ªÉn k·∫ø ho·∫°ch h√†nh ƒë·ªông c·ª• th·ªÉ
‚Ä¢ **Qu·∫£n l√Ω r·ªßi ro**: X√¢y d·ª±ng c√°c bi·ªán ph√°p b·∫£o v·ªá
‚Ä¢ **ƒêo l∆∞·ªùng th√†nh c√¥ng**: Thi·∫øt l·∫≠p c√°c ch·ªâ s·ªë KPI ph√π h·ª£p

B·∫°n c√≥ mu·ªën t√¥i t∆∞ v·∫•n th√™m v·ªÅ chi·∫øn l∆∞·ª£c kinh doanh kh√¥ng?`;
                    break;
                    
                case 'teacher':
                    response += `D·ª±a tr√™n m√¥i tr∆∞·ªùng gi·∫£ng d·∫°y c·ªßa b·∫°n v√† v·∫•n ƒë·ªÅ "${problem}", t√¥i c√≥ m·ªôt s·ªë g·ª£i √Ω:
                    
‚Ä¢ **Ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y**: √Åp d·ª•ng c√°c k·ªπ thu·∫≠t hi·ªán ƒë·∫°i ph√π h·ª£p v·ªõi c·∫•p h·ªçc v√† m√¥n h·ªçc
‚Ä¢ **Qu·∫£n l√Ω l·ªõp h·ªçc**: X√¢y d·ª±ng m√¥i tr∆∞·ªùng h·ªçc t·∫≠p t√≠ch c·ª±c
‚Ä¢ **ƒê√°nh gi√° h·ªçc sinh**: Ph√°t tri·ªÉn h·ªá th·ªëng ƒë√°nh gi√° to√†n di·ªán
‚Ä¢ **Ph√°t tri·ªÉn chuy√™n m√¥n**: C·∫≠p nh·∫≠t ki·∫øn th·ª©c v√† k·ªπ nƒÉng

B·∫°n c√≥ mu·ªën t√¥i t∆∞ v·∫•n th√™m v·ªÅ ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y kh√¥ng?`;
                    break;
                    
                case 'developer':
                    response += `D·ª±a tr√™n stack c√¥ng ngh·ªá v√† d·ª± √°n c·ªßa b·∫°n, v·ªõi v·∫•n ƒë·ªÅ "${problem}", t√¥i c√≥ m·ªôt s·ªë t∆∞ v·∫•n:
                    
‚Ä¢ **Ph√¢n t√≠ch k·ªπ thu·∫≠t**: ƒê√°nh gi√° v·∫•n ƒë·ªÅ v√† gi·∫£i ph√°p ph√π h·ª£p v·ªõi c√¥ng ngh·ªá b·∫°n ƒëang s·ª≠ d·ª•ng
‚Ä¢ **C√¥ng ngh·ªá ph√π h·ª£p**: L·ª±a ch·ªçn stack c√¥ng ngh·ªá t·ªëi ∆∞u
‚Ä¢ **Quy tr√¨nh ph√°t tri·ªÉn**: √Åp d·ª•ng c√°c ph∆∞∆°ng ph√°p agile
‚Ä¢ **B·∫£o tr√¨ v√† n√¢ng c·∫•p**: X√¢y d·ª±ng h·ªá th·ªëng b·ªÅn v·ªØng

B·∫°n c√≥ mu·ªën t√¥i t∆∞ v·∫•n th√™m v·ªÅ c√¥ng ngh·ªá kh√¥ng?`;
                    break;
                    
                case 'doctor':
                    response += `D·ª±a tr√™n chuy√™n m√¥n v√† m√¥i tr∆∞·ªùng l√†m vi·ªác c·ªßa b·∫°n, v·ªõi v·∫•n ƒë·ªÅ "${problem}", t√¥i c√≥ m·ªôt s·ªë g·ª£i √Ω:
                    
‚Ä¢ **C·∫≠p nh·∫≠t ki·∫øn th·ª©c**: Theo d√µi c√°c ti·∫øn b·ªô y h·ªçc m·ªõi trong chuy√™n khoa c·ªßa b·∫°n
‚Ä¢ **Ph∆∞∆°ng ph√°p ch·∫©n ƒëo√°n**: √Åp d·ª•ng c√¥ng ngh·ªá hi·ªán ƒë·∫°i ph√π h·ª£p v·ªõi m√¥i tr∆∞·ªùng l√†m vi·ªác
‚Ä¢ **ChƒÉm s√≥c b·ªánh nh√¢n**: C·∫£i thi·ªán tr·∫£i nghi·ªám ƒëi·ªÅu tr·ªã
‚Ä¢ **Nghi√™n c·ª©u y h·ªçc**: Tham gia c√°c d·ª± √°n nghi√™n c·ª©u

B·∫°n c√≥ mu·ªën t√¥i t∆∞ v·∫•n th√™m v·ªÅ chuy√™n m√¥n y t·∫ø kh√¥ng?`;
                    break;
                    
                case 'lawyer':
                    response += `D·ª±a tr√™n lƒ©nh v·ª±c ph√°p l√Ω v√† kinh nghi·ªám c·ªßa b·∫°n, v·ªõi v·∫•n ƒë·ªÅ "${problem}", t√¥i c√≥ m·ªôt s·ªë t∆∞ v·∫•n:
                    
‚Ä¢ **Ph√¢n t√≠ch ph√°p l√Ω**: ƒê√°nh gi√° t√¨nh hu·ªëng v√† r·ªßi ro trong lƒ©nh v·ª±c chuy√™n m√¥n
‚Ä¢ **Chi·∫øn l∆∞·ª£c b·∫£o v·ªá**: X√¢y d·ª±ng l·∫≠p lu·∫≠n v·ªØng ch·∫Øc
‚Ä¢ **C·∫≠p nh·∫≠t lu·∫≠t ph√°p**: Theo d√µi c√°c thay ƒë·ªïi ph√°p l√Ω trong lƒ©nh v·ª±c c·ªßa b·∫°n
‚Ä¢ **T∆∞ v·∫•n kh√°ch h√†ng**: C·∫£i thi·ªán k·ªπ nƒÉng giao ti·∫øp

B·∫°n c√≥ mu·ªën t√¥i t∆∞ v·∫•n th√™m v·ªÅ v·∫•n ƒë·ªÅ ph√°p l√Ω kh√¥ng?`;
                    break;
                    
                default:
                    response += `D·ª±a tr√™n th√¥ng tin b·∫°n cung c·∫•p v·ªÅ "${problem}" v√† "${details}", t√¥i c√≥ m·ªôt s·ªë t∆∞ v·∫•n chung:
                    
‚Ä¢ **Ph√¢n t√≠ch v·∫•n ƒë·ªÅ**: Hi·ªÉu r√µ nguy√™n nh√¢n v√† t√°c ƒë·ªông
‚Ä¢ **Gi·∫£i ph√°p ƒë·ªÅ xu·∫•t**: X√¢y d·ª±ng k·∫ø ho·∫°ch h√†nh ƒë·ªông
‚Ä¢ **T√†i nguy√™n h·ªó tr·ª£**: T√¨m ki·∫øm th√¥ng tin v√† chuy√™n gia
‚Ä¢ **Theo d√µi ti·∫øn ƒë·ªô**: ƒê√°nh gi√° v√† ƒëi·ªÅu ch·ªânh k·∫ø ho·∫°ch

B·∫°n c√≥ mu·ªën t√¥i t∆∞ v·∫•n th√™m v·ªÅ v·∫•n ƒë·ªÅ kh√°c kh√¥ng?`;
            }
            
            return response;
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (text && !isTyping) {
                addMessage(text, true);
                input.value = '';
                
                isTyping = true;
                addTypingIndicator();
                
                // Simulate AI thinking
                setTimeout(() => {
                    removeTypingIndicator();
                    const response = generateAIResponse(text);
                    addMessage(response, false);
                    isTyping = false;
                    
                    // B·ªè ph·∫ßn hi·ªÉn th·ªã l·∫°i form
                    // setTimeout(() => {
                    //     showContinueForm();
                    // }, 1000);
                }, 1500);
            }
        }

        function generateAIResponse(userInput) {
            const input = userInput.toLowerCase();
            const name = userProfile.name || 'ch√∫/c√¥';
            const careerData = careerResponses[currentCareer];

            if (input.includes('ch√†o') || input.includes('hello')) {
                return `Ch√†o ${name}, ch√°u N√¥ngTr√≠ ƒë√¢y ·∫°! Ch√∫/c√¥ c·∫ßn ch√°u h·ªó tr·ª£ v·∫•n ƒë·ªÅ g√¨ h√¥m nay?`;
            }

            // X·ª≠ l√Ω c√°c ch·ªß ƒë·ªÅ n√¥ng nghi·ªáp chi ti·∫øt
            if (currentCareer === 'farmer') {
                // D∆∞a l∆∞·ªõi
                if (input.includes('d∆∞a l∆∞·ªõi') || input.includes('melon')) {
                    let ans = '';
                    if (careerData.melon) {
                        ans += 'üçà ƒê·∫∑c ƒëi·ªÉm & k·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi:\n';
                        if (input.match(/(th·ªùi v·ª•|m√πa v·ª•|tr·ªìng khi n√†o)/)) ans += careerData.melon.detailed.season + '\n';
                        if (input.match(/(ƒë·∫•t|ƒë·∫•t tr·ªìng|chu·∫©n b·ªã ƒë·∫•t)/)) ans += careerData.melon.detailed.soil + '\n';
                        if (input.match(/(gieo|h·∫°t|∆∞∆°m)/)) ans += careerData.melon.detailed.seeding + '\n';
                        if (input.match(/(chƒÉm s√≥c|t∆∞·ªõi|b√≥n ph√¢n)/)) ans += careerData.melon.detailed.care + '\n';
                        if (input.match(/(th·ª• ph·∫•n|ph·∫•n|hoa)/)) ans += careerData.melon.detailed.pollination + '\n';
                        if (input.match(/(gi√†n|leo|treo)/)) ans += careerData.melon.detailed.trellis + '\n';
                        if (input.match(/(b·ªánh|s√¢u|ph√≤ng b·ªánh)/)) ans += careerData.melon.detailed.disease + '\n';
                        if (input.match(/(thu ho·∫°ch|h√°i|ch√≠n)/)) ans += careerData.melon.detailed.harvest + '\n';
                        // N·∫øu kh√¥ng c√≥ t·ª´ kh√≥a c·ª• th·ªÉ, tr·∫£ l·ªùi t·∫•t c·∫£ c√°c m·ª•c
                        if (ans.trim() === 'üçà ƒê·∫∑c ƒëi·ªÉm & k·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi:') {
                            ans += careerData.melon.detailed.season + '\n' + careerData.melon.detailed.soil + '\n' + careerData.melon.detailed.seeding + '\n' + careerData.melon.detailed.care + '\n' + careerData.melon.detailed.pollination + '\n' + careerData.melon.detailed.trellis + '\n' + careerData.melon.detailed.disease + '\n' + careerData.melon.detailed.harvest + '\n';
                        }
                        if (careerData.melon.tips) {
                            ans += '\nüí° M·∫πo hay:\n- ' + careerData.melon.tips.join('\n- ');
                        }
                        return ans;
                    }
                }
                // L√∫a
                if (input.includes('l√∫a') || input.includes('rice')) {
                    let ans = '';
                    if (careerData.rice) {
                        ans += 'üåæ K·ªπ thu·∫≠t tr·ªìng l√∫a mi·ªÅn T√¢y:\n';
                        if (input.match(/(th·ªùi v·ª•|m√πa v·ª•)/)) ans += careerData.rice.detailed.season + '\n';
                        if (input.match(/(ph√¢n|b√≥n ph√¢n)/)) ans += careerData.rice.detailed.fertilizer + '\n';
                        if (input.match(/(chƒÉm s√≥c|t∆∞·ªõi)/)) ans += careerData.rice.detailed.care + '\n';
                        if (ans === 'üåæ K·ªπ thu·∫≠t tr·ªìng l√∫a mi·ªÅn T√¢y:\n') {
                            ans += careerData.rice.detailed.season + '\n' + careerData.rice.detailed.fertilizer + '\n' + careerData.rice.detailed.care + '\n';
                        }
                        return ans;
                    }
                }
                // ·ªöt
                if (input.includes('·ªõt') || input.includes('chili') || input.includes('v√†ng l√°') || input.includes('r·ª•ng tr√°i')) {
                    let ans = '';
                    if (careerData.chili) {
                        ans += 'üå∂Ô∏è K·ªπ thu·∫≠t & ph√≤ng b·ªánh c√¢y ·ªõt:\n';
                        if (input.match(/(b·ªánh|n·∫•m)/)) ans += careerData.chili.detailed.disease + '\n';
                        if (input.match(/(x·ª≠ l√Ω|tr·ªã)/)) ans += careerData.chili.detailed.treatment + '\n';
                        if (input.match(/(dinh d∆∞·ª°ng|ph√¢n)/)) ans += careerData.chili.detailed.nutrition + '\n';
                        if (ans === 'üå∂Ô∏è K·ªπ thu·∫≠t & ph√≤ng b·ªánh c√¢y ·ªõt:\n') {
                            ans += careerData.chili.detailed.disease + '\n' + careerData.chili.detailed.treatment + '\n' + careerData.chili.detailed.nutrition + '\n';
                        }
                        return ans;
                    }
                }
                // G√†
                if (input.includes('g√†') || input.includes('chicken') || input.includes('ti√™u ch·∫£y') || input.includes('ƒÉn √≠t')) {
                    let ans = '';
                    if (careerData.chicken) {
                        ans += 'üêî ChƒÉm s√≥c & ph√≤ng b·ªánh g√† th·∫£ v∆∞·ªùn:\n';
                        if (input.match(/(b·ªánh)/)) ans += careerData.chicken.detailed.disease + '\n';
                        if (input.match(/(x·ª≠ l√Ω|tr·ªã)/)) ans += careerData.chicken.detailed.treatment + '\n';
                        if (input.match(/(ph√≤ng|ng·ª´a)/)) ans += careerData.chicken.detailed.prevention + '\n';
                        if (ans === 'üêî ChƒÉm s√≥c & ph√≤ng b·ªánh g√† th·∫£ v∆∞·ªùn:\n') {
                            ans += careerData.chicken.detailed.disease + '\n' + careerData.chicken.detailed.treatment + '\n' + careerData.chicken.detailed.prevention + '\n';
                        }
                        return ans;
                    }
                }
                // S·∫ßu ri√™ng
                if (input.includes('s·∫ßu ri√™ng') || input.includes('durian') || input.includes('ra hoa')) {
                    let ans = '';
                    if (careerData.durian) {
                        ans += 'üå∏ K·ªπ thu·∫≠t chƒÉm s√≥c s·∫ßu ri√™ng ra hoa:\n';
                        if (input.match(/(hoa|ph√¢n)/)) ans += careerData.durian.detailed.flowering + '\n';
                        if (input.match(/(chƒÉm s√≥c)/)) ans += careerData.durian.detailed.care + '\n';
                        if (ans === 'üå∏ K·ªπ thu·∫≠t chƒÉm s√≥c s·∫ßu ri√™ng ra hoa:\n') {
                            ans += careerData.durian.detailed.flowering + '\n' + careerData.durian.detailed.care + '\n';
                        }
                        return ans;
                    }
                }
                // C√† ph√™
                if (input.includes('c√† ph√™') || input.includes('coffee') || input.includes('b√≥n ph√¢n')) {
                    let ans = '';
                    if (careerData.coffee) {
                        ans += '‚òï L·ªãch b√≥n ph√¢n & chƒÉm s√≥c c√† ph√™:\n';
                        if (input.match(/(l·ªãch|l·ªãch tr√¨nh)/)) ans += careerData.coffee.detailed.schedule + '\n';
                        if (input.match(/(nh·∫Øc|nh·ªõ)/)) ans += careerData.coffee.detailed.reminder + '\n';
                        if (ans === '‚òï L·ªãch b√≥n ph√¢n & chƒÉm s√≥c c√† ph√™:\n') {
                            ans += careerData.coffee.detailed.schedule + '\n' + careerData.coffee.detailed.reminder + '\n';
                        }
                        return ans;
                    }
                }
                // Gi√° c·∫£
                if (input.includes('gi√°') || input.includes('price') || input.includes('th·ªã tr∆∞·ªùng')) {
                    let ans = '';
                    if (careerData.price) {
                        ans += 'üí∞ Gi√° n√¥ng s·∫£n m·ªõi nh·∫•t:\n';
                        if (input.match(/(l√∫a)/)) ans += careerData.price.detailed.rice + '\n';
                        if (input.match(/(tr√°i c√¢y|hoa qu·∫£)/)) ans += careerData.price.detailed.fruit + '\n';
                        if (ans === 'üí∞ Gi√° n√¥ng s·∫£n m·ªõi nh·∫•t:\n') {
                            ans += careerData.price.detailed.rice + '\n' + careerData.price.detailed.fruit + '\n';
                        }
                        return ans;
                    }
                }
                // Th·ªùi ti·∫øt
                if (input.includes('th·ªùi ti·∫øt') || input.includes('weather') || input.includes('nhi·ªát ƒë·ªô')) {
                    return careerData.weather[Math.floor(Math.random() * careerData.weather.length)];
                }
                // K·ªπ thu·∫≠t canh t√°c
                if (input.includes('canh t√°c') || input.includes('tr·ªìng tr·ªçt') || input.includes('nƒÉng su·∫•t')) {
                    return careerData.farming[Math.floor(Math.random() * careerData.farming.length)];
                }
                // S√¢u b·ªánh
                if (input.includes('s√¢u b·ªánh') || input.includes('ph√≤ng b·ªánh') || input.includes('thu·ªëc')) {
                    return careerData.pest[Math.floor(Math.random() * careerData.pest.length)];
                }
                // Di·ªát c·ªè
                if (input.includes('di·ªát c·ªè') || input.includes('c·ªè') || input.includes('weed')) {
                    let ans = '';
                    if (careerData.weed) {
                        ans += 'üåø K·ªπ thu·∫≠t di·ªát c·ªè hi·ªáu qu·∫£:\n';
                        if (input.match(/(th·ªß c√¥ng|nh·ªï|tay)/)) ans += careerData.weed.detailed.manual + '\n';
                        if (input.match(/(thu·ªëc|h√≥a h·ªçc|glyphosate)/)) ans += careerData.weed.detailed.chemical + '\n';
                        if (input.match(/(h·ªØu c∆°|t·ª± nhi√™n|mu·ªëi|gi·∫•m)/)) ans += careerData.weed.detailed.organic + '\n';
                        if (input.match(/(ph√≤ng|ng·ª´a|che ph·ªß)/)) ans += careerData.weed.detailed.prevention + '\n';
                        if (ans === 'üåø K·ªπ thu·∫≠t di·ªát c·ªè hi·ªáu qu·∫£:\n') {
                            ans += careerData.weed.detailed.manual + '\n' + careerData.weed.detailed.chemical + '\n' + careerData.weed.detailed.organic + '\n' + careerData.weed.detailed.prevention + '\n';
                        }
                        return ans;
                    }
                }
            }

            if (careerData) {
                // X·ª≠ l√Ω c√°c ng√†nh kh√°c v·ªõi d·ªØ li·ªáu chi ti·∫øt
                if (currentCareer === 'business') {
                    // T√†i ch√≠nh
                    if (input.includes('t√†i ch√≠nh') || input.includes('finance') || input.includes('qu·∫£n l√Ω ti·ªÅn')) {
                        let ans = '';
                        if (careerData.finance) {
                            ans += 'üí∞ Qu·∫£n l√Ω t√†i ch√≠nh doanh nghi·ªáp:\n';
                            if (input.match(/(k·∫ø ho·∫°ch|l·∫≠p k·∫ø ho·∫°ch)/)) ans += careerData.finance.detailed.planning + '\n';
                            if (input.match(/(chi ph√≠|cost)/)) ans += careerData.finance.detailed.cost + '\n';
                            if (input.match(/(ƒë·∫ßu t∆∞|investment)/)) ans += careerData.finance.detailed.investment + '\n';
                            if (ans === 'üí∞ Qu·∫£n l√Ω t√†i ch√≠nh doanh nghi·ªáp:\n') {
                                ans += careerData.finance.detailed.planning + '\n' + careerData.finance.detailed.cost + '\n' + careerData.finance.detailed.investment + '\n';
                            }
                            return ans;
                        }
                    }
                    // Digital Marketing
                    if (input.includes('digital') || input.includes('marketing') || input.includes('qu·∫£ng c√°o')) {
                        let ans = '';
                        if (careerData.digital) {
                            ans += 'üì± Digital Marketing:\n';
                            if (input.match(/(social|facebook|instagram|tiktok)/)) ans += careerData.digital.detailed.social + '\n';
                            if (input.match(/(content|blog|video)/)) ans += careerData.digital.detailed.content + '\n';
                            if (input.match(/(seo|sem|t·ª´ kh√≥a)/)) ans += careerData.digital.detailed.seo + '\n';
                            if (ans === 'üì± Digital Marketing:\n') {
                                ans += careerData.digital.detailed.social + '\n' + careerData.digital.detailed.content + '\n' + careerData.digital.detailed.seo + '\n';
                            }
                            return ans;
                        }
                    }
                    // Qu·∫£n l√Ω
                    if (input.includes('qu·∫£n l√Ω') || input.includes('management') || input.includes('nh√¢n s·ª±')) {
                        let ans = '';
                        if (careerData.management) {
                            ans += 'üë• Qu·∫£n l√Ω doanh nghi·ªáp:\n';
                            if (input.match(/(nh√¢n s·ª±|team|tuy·ªÉn d·ª•ng)/)) ans += careerData.management.detailed.team + '\n';
                            if (input.match(/(quy tr√¨nh|process|t·ªëi ∆∞u)/)) ans += careerData.management.detailed.process + '\n';
                            if (input.match(/(ch·∫•t l∆∞·ª£ng|quality)/)) ans += careerData.management.detailed.quality + '\n';
                            if (ans === 'üë• Qu·∫£n l√Ω doanh nghi·ªáp:\n') {
                                ans += careerData.management.detailed.team + '\n' + careerData.management.detailed.process + '\n' + careerData.management.detailed.quality + '\n';
                            }
                            return ans;
                        }
                    }
                }
                
                if (currentCareer === 'teacher') {
                    // Ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y
                    if (input.includes('ph∆∞∆°ng ph√°p') || input.includes('methodology') || input.includes('gi·∫£ng d·∫°y')) {
                        let ans = '';
                        if (careerData.methodology) {
                            ans += 'üéØ Ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y hi·ªán ƒë·∫°i:\n';
                            if (input.match(/(ch·ªß ƒë·ªông|active|project)/)) ans += careerData.methodology.detailed.active + '\n';
                            if (input.match(/(c√¥ng ngh·ªá|tech|ai)/)) ans += careerData.methodology.detailed.tech + '\n';
                            if (input.match(/(ƒë√°nh gi√°|assessment)/)) ans += careerData.methodology.detailed.assessment + '\n';
                            if (ans === 'üéØ Ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y hi·ªán ƒë·∫°i:\n') {
                                ans += careerData.methodology.detailed.active + '\n' + careerData.methodology.detailed.tech + '\n' + careerData.methodology.detailed.assessment + '\n';
                            }
                            return ans;
                        }
                    }
                    // Qu·∫£n l√Ω l·ªõp h·ªçc
                    if (input.includes('l·ªõp h·ªçc') || input.includes('classroom') || input.includes('qu·∫£n l√Ω')) {
                        let ans = '';
                        if (careerData.classroom) {
                            ans += 'üìã Qu·∫£n l√Ω l·ªõp h·ªçc hi·ªáu qu·∫£:\n';
                            if (input.match(/(quy t·∫Øc|rules)/)) ans += careerData.classroom.detailed.rules + '\n';
                            if (input.match(/(m√¥i tr∆∞·ªùng|environment)/)) ans += careerData.classroom.detailed.environment + '\n';
                            if (input.match(/(giao ti·∫øp|communication)/)) ans += careerData.classroom.detailed.communication + '\n';
                            if (ans === 'üìã Qu·∫£n l√Ω l·ªõp h·ªçc hi·ªáu qu·∫£:\n') {
                                ans += careerData.classroom.detailed.rules + '\n' + careerData.classroom.detailed.environment + '\n' + careerData.classroom.detailed.communication + '\n';
                            }
                            return ans;
                        }
                    }
                    // Ch∆∞∆°ng tr√¨nh gi·∫£ng d·∫°y
                    if (input.includes('ch∆∞∆°ng tr√¨nh') || input.includes('curriculum') || input.includes('k·∫ø ho·∫°ch')) {
                        let ans = '';
                        if (careerData.curriculum) {
                            ans += 'üìù Thi·∫øt k·∫ø ch∆∞∆°ng tr√¨nh gi·∫£ng d·∫°y:\n';
                            if (input.match(/(k·∫ø ho·∫°ch|planning)/)) ans += careerData.curriculum.detailed.planning + '\n';
                            if (input.match(/(ph√¢n h√≥a|differentiation)/)) ans += careerData.curriculum.detailed.differentiation + '\n';
                            if (input.match(/(t√≠ch h·ª£p|integration)/)) ans += careerData.curriculum.detailed.integration + '\n';
                            if (ans === 'üìù Thi·∫øt k·∫ø ch∆∞∆°ng tr√¨nh gi·∫£ng d·∫°y:\n') {
                                ans += careerData.curriculum.detailed.planning + '\n' + careerData.curriculum.detailed.differentiation + '\n' + careerData.curriculum.detailed.integration + '\n';
                            }
                            return ans;
                        }
                    }
                }
                
                if (currentCareer === 'developer') {
                    // Frontend
                    if (input.includes('frontend') || input.includes('react') || input.includes('vue') || input.includes('angular')) {
                        let ans = '';
                        if (careerData.frontend) {
                            ans += '‚öõÔ∏è Frontend Development:\n';
                            if (input.match(/(framework|react|vue|angular)/)) ans += careerData.frontend.detailed.frameworks + '\n';
                            if (input.match(/(tool|c√¥ng c·ª•|webpack)/)) ans += careerData.frontend.detailed.tools + '\n';
                            if (input.match(/(t·ªëi ∆∞u|optimization|performance)/)) ans += careerData.frontend.detailed.optimization + '\n';
                            if (ans === '‚öõÔ∏è Frontend Development:\n') {
                                ans += careerData.frontend.detailed.frameworks + '\n' + careerData.frontend.detailed.tools + '\n' + careerData.frontend.detailed.optimization + '\n';
                            }
                            return ans;
                        }
                    }
                    // Backend
                    if (input.includes('backend') || input.includes('api') || input.includes('database')) {
                        let ans = '';
                        if (careerData.backend) {
                            ans += 'üêç Backend Development:\n';
                            if (input.match(/(ng√¥n ng·ªØ|language|python|java)/)) ans += careerData.backend.detailed.languages + '\n';
                            if (input.match(/(database|sql|mongodb)/)) ans += careerData.backend.detailed.databases + '\n';
                            if (input.match(/(ki·∫øn tr√∫c|architecture|microservice)/)) ans += careerData.backend.detailed.architecture + '\n';
                            if (ans === 'üêç Backend Development:\n') {
                                ans += careerData.backend.detailed.languages + '\n' + careerData.backend.detailed.databases + '\n' + careerData.backend.detailed.architecture + '\n';
                            }
                            return ans;
                        }
                    }
                    // DevOps
                    if (input.includes('devops') || input.includes('deploy') || input.includes('cloud')) {
                        let ans = '';
                        if (careerData.devops) {
                            ans += 'üîÑ DevOps & Cloud:\n';
                            if (input.match(/(ci|cd|pipeline|jenkins)/)) ans += careerData.devops.detailed.ci_cd + '\n';
                            if (input.match(/(cloud|aws|azure|gcp)/)) ans += careerData.devops.detailed.cloud + '\n';
                            if (input.match(/(security|b·∫£o m·∫≠t|authentication)/)) ans += careerData.devops.detailed.security + '\n';
                            if (ans === 'üîÑ DevOps & Cloud:\n') {
                                ans += careerData.devops.detailed.ci_cd + '\n' + careerData.devops.detailed.cloud + '\n' + careerData.devops.detailed.security + '\n';
                            }
                            return ans;
                        }
                    }
                }

                if (currentCareer === 'office') {
                    // Email
                    if (input.includes('email') || input.includes('th∆∞ ƒëi·ªán t·ª≠') || input.includes('vi·∫øt mail')) {
                        let ans = 'üìß H∆∞·ªõng d·∫´n vi·∫øt email chuy√™n nghi·ªáp:\n';
                        if (careerData.email) {
                            if (input.match(/(ti√™u ƒë·ªÅ|subject)/)) ans += careerData.email.detailed.subject + '\n';
                            if (input.match(/(ch√†o|greeting)/)) ans += careerData.email.detailed.greeting + '\n';
                            if (input.match(/(n·ªôi dung|body)/)) ans += careerData.email.detailed.body + '\n';
                            if (input.match(/(k·∫øt|ch·ªØ k√Ω|closing|signature)/)) ans += careerData.email.detailed.closing + '\n';
                            if (ans === 'üìß H∆∞·ªõng d·∫´n vi·∫øt email chuy√™n nghi·ªáp:\n') {
                                ans += careerData.email.detailed.subject + '\n' + careerData.email.detailed.greeting + '\n' + careerData.email.detailed.body + '\n' + careerData.email.detailed.closing + '\n';
                            }
                            return ans;
                        }
                    }
                    // H·ªçp
                    if (input.includes('h·ªçp') || input.includes('meeting') || input.includes('t·ªï ch·ª©c h·ªçp')) {
                        let ans = 'üìÖ H∆∞·ªõng d·∫´n t·ªï ch·ª©c cu·ªôc h·ªçp hi·ªáu qu·∫£:\n';
                        if (careerData.meeting) {
                            if (input.match(/(tr∆∞·ªõc|chu·∫©n b·ªã|before)/)) ans += careerData.meeting.detailed.before + '\n';
                            if (input.match(/(trong|during)/)) ans += careerData.meeting.detailed.during + '\n';
                            if (input.match(/(sau|after)/)) ans += careerData.meeting.detailed.after + '\n';
                            if (ans === 'üìÖ H∆∞·ªõng d·∫´n t·ªï ch·ª©c cu·ªôc h·ªçp hi·ªáu qu·∫£:\n') {
                                ans += careerData.meeting.detailed.before + '\n' + careerData.meeting.detailed.during + '\n' + careerData.meeting.detailed.after + '\n';
                            }
                            return ans;
                        }
                    }
                    // Qu·∫£n l√Ω th·ªùi gian
                    if (input.includes('th·ªùi gian') || input.includes('time management') || input.includes('pomodoro') || input.includes('qu·∫£n l√Ω c√¥ng vi·ªác')) {
                        let ans = '‚è±Ô∏è M·∫πo qu·∫£n l√Ω th·ªùi gian hi·ªáu qu·∫£:\n';
                        if (careerData.timeManagement) {
                            if (input.match(/(eisenhower|ma tr·∫≠n)/)) ans += careerData.timeManagement.detailed.matrix + '\n';
                            if (input.match(/(pomodoro)/)) ans += careerData.timeManagement.detailed.pomodoro + '\n';
                            if (input.match(/(k·∫ø ho·∫°ch|planning|to-do)/)) ans += careerData.timeManagement.detailed.planning + '\n';
                            if (ans === '‚è±Ô∏è M·∫πo qu·∫£n l√Ω th·ªùi gian hi·ªáu qu·∫£:\n') {
                                ans += careerData.timeManagement.detailed.matrix + '\n' + careerData.timeManagement.detailed.pomodoro + '\n' + careerData.timeManagement.detailed.planning + '\n';
                            }
                            return ans;
                        }
                    }
                    // Excel
                    if (input.includes('excel') || input.includes('h√†m') || input.includes('vlookup') || input.includes('pivot')) {
                        let ans = 'üìä M·∫πo v√† h√†m Excel th√¥ng d·ª•ng:\n';
                        if (careerData.excel) {
                            if (input.match(/(h√†m|function)/)) ans += careerData.excel.detailed.functions + '\n';
                            if (input.match(/(ph√≠m t·∫Øt|shortcut)/)) ans += careerData.excel.detailed.shortcuts + '\n';
                            if (input.match(/(m·∫πo|tip)/)) ans += careerData.excel.detailed.tips + '\n';
                            if (ans === 'üìä M·∫πo v√† h√†m Excel th√¥ng d·ª•ng:\n') {
                                ans += careerData.excel.detailed.functions + '\n' + careerData.excel.detailed.shortcuts + '\n' + careerData.excel.detailed.tips + '\n';
                            }
                            return ans;
                        }
                    }
                }

                // Check for keywords in a specific order
                if (careerData.strategy && (input.includes('kinh doanh') || input.includes('chi·∫øn l∆∞·ª£c'))) {
                     return careerData.strategy[Math.floor(Math.random() * careerData.strategy.length)];
                }
                if (careerData.pest && (input.includes('s√¢u b·ªánh') || input.includes('ph√≤ng b·ªánh'))) {
                     return careerData.pest[Math.floor(Math.random() * careerData.pest.length)];
                }
                if (careerData.legal && (input.includes('lu·∫≠t') || input.includes('ph√°p l√Ω'))) {
                     return careerData.legal[Math.floor(Math.random() * careerData.legal.length)];
                }
                if (careerData.general) {
                     return careerData.general[Math.floor(Math.random() * careerData.general.length)];
                }
            }

            // Default fallback response
            return `D·∫°, c·∫£m ∆°n c√¢u h·ªèi c·ªßa ${name}. Ch√°u ƒë√£ ghi nh·∫≠n th√¥ng tin v√† s·∫Ω h·ªçc h·ªèi th√™m ƒë·ªÉ c√≥ th·ªÉ h·ªó tr·ª£ ch√∫/c√¥ t·ªët h∆°n trong t∆∞∆°ng lai ·∫°.`;
        }

        function addQuickMessage(text) {
            if (!isTyping) {
                addMessage(text, true);
                
                isTyping = true;
                addTypingIndicator();
                
                setTimeout(() => {
                    removeTypingIndicator();
                    const response = generateAIResponse(text);
                    addMessage(response, false);
                    isTyping = false;
                }, 1500);
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function showSuggestionButtons() {
            console.log('showSuggestionButtons called'); // Debug log
            
            const name = userProfile.name || (currentCareer === 'farmer' ? 'ch√∫/c√¥' : 'b·∫°n');
            const suggestions = getSuggestions(currentCareer);
            const messagesContainer = document.getElementById('messages');
            
            console.log('name:', name); // Debug log
            console.log('suggestions:', suggestions); // Debug log
            console.log('messagesContainer:', messagesContainer); // Debug log

            // Add a title message
            const titleDiv = document.createElement('div');
            titleDiv.className = 'flex justify-start';
            const titleBubble = document.createElement('div');
            titleBubble.className = 'message-bubble px-4 py-3 rounded-2xl shadow-sm bg-gray-100 border border-gray-200';
            let officeSuggestions = [
                '‚úâÔ∏è G·ª£i √Ω vi·∫øt mail chuy√™n nghi·ªáp',
                'üóÇÔ∏è C√°ch s·∫Øp x·∫øp timeline c√¥ng vi·ªác',
                'üìÖ L·∫≠p k·∫ø ho·∫°ch tu·∫ßn hi·ªáu qu·∫£',
                '‚è±Ô∏è M·∫πo qu·∫£n l√Ω th·ªùi gian',
                'üìä H√†m Excel th√¥ng d·ª•ng cho vƒÉn ph√≤ng'
            ];
            if (currentCareer === 'office') {
                titleBubble.innerHTML = `<p class="text-sm text-gray-700 font-medium">C√°c ch·ªß ƒë·ªÅ b·∫°n c√≥ th·ªÉ h·ªèi tr·ª£ l√Ω vƒÉn ph√≤ng:</p>`;
            }
            else {
            titleBubble.innerHTML = `<p class="text-sm text-gray-700 font-medium">ƒê√¢y l√† m·ªôt v√†i ƒëi·ªÅu t√¥i c√≥ th·ªÉ gi√∫p ${name}. H√£y ch·ªçn m·ªôt nh√©:</p>`;
            }
            titleDiv.appendChild(titleBubble);
            messagesContainer.appendChild(titleDiv);
            // Add suggestion buttons
            const buttonContainer = document.createElement('div');
            buttonContainer.className = 'flex flex-wrap gap-2 mt-3 justify-start';
            buttonContainer.id = 'suggestion-buttons';
            (currentCareer === 'office' ? officeSuggestions : suggestions).forEach(suggestion => {
                const button = document.createElement('button');
                button.className = 'px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 text-sm font-semibold rounded-lg transition-colors duration-200 border border-blue-200';
                button.textContent = suggestion;
                button.onclick = () => {
                    console.log('Button clicked:', suggestion); // Debug log
                    handleSuggestionClick(suggestion);
                };
                buttonContainer.appendChild(button);
            });
            messagesContainer.appendChild(buttonContainer);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            console.log('Suggestion buttons added successfully'); // Debug log
        }

        function handleSuggestionClick(suggestion) {
            console.log('Button clicked:', suggestion); // Debug log
            
            // Remove buttons
            const buttonContainer = document.getElementById('suggestion-buttons');
            if (buttonContainer) {
                buttonContainer.remove();
            }

            addMessage(suggestion, true);

            // Get AI response
            setTimeout(() => {
                console.log('Getting response for:', suggestion); // Debug log
                const response = getSuggestionResponse(suggestion);
                console.log('Response:', response); // Debug log
                addMessage(response, false);
            }, 500);
        }

        function getSuggestions(career) {
            const suggestions = {
                farmer: [
                    'üåæ Tr·ªìng l√∫a mi·ªÅn T√¢y',
                    'üå∂Ô∏è B·ªánh c√¢y ·ªõt v√†ng l√°',
                    'üêî G√† th·∫£ v∆∞·ªùn b·ªã b·ªánh',
                    'üçà K·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi',
                    'üå∏ S·∫ßu ri√™ng ra hoa b√≥n ph√¢n',
                    '‚òï Nh·∫Øc b√≥n ph√¢n c√† ph√™',
                    'üí∞ C·∫≠p nh·∫≠t gi√° n√¥ng s·∫£n',
                    'üå§Ô∏è D·ª± b√°o th·ªùi ti·∫øt n√¥ng v·ª•',
                    'üåø K·ªπ thu·∫≠t di·ªát c·ªè hi·ªáu qu·∫£'
                ],
                business: [
                    'Ph√¢n t√≠ch th·ªã tr∆∞·ªùng & ƒë·ªëi th·ªß',
                    'X√¢y d·ª±ng k·∫ø ho·∫°ch kinh doanh',
                    'T∆∞ v·∫•n marketing & b√°n h√†ng',
                    'G·ª£i √Ω t·ªëi ∆∞u chi ph√≠'
                ],
                teacher: [
                    'So·∫°n gi√°o √°n s√°ng t·∫°o',
                    'T∆∞ v·∫•n ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y',
                    'H·ªó tr·ª£ qu·∫£n l√Ω l·ªõp h·ªçc',
                    'G·ª£i √Ω c√¥ng c·ª• AI trong gi√°o d·ª•c'
                ],
                developer: [
                    'H·ªó tr·ª£ t√¨m v√† s·ª≠a l·ªói (debug)',
                    'G·ª£i √Ω t·ªëi ∆∞u h√≥a code',
                    'Gi·∫£i th√≠ch kh√°i ni·ªám & c√¥ng ngh·ªá',
                    'T∆∞ v·∫•n v·ªÅ ki·∫øn tr√∫c ph·∫ßn m·ªÅm'
                ],
                sales: [
                
                        'üìù Vi·∫øt b√†i post review s·∫£n ph·∫©m thu h√∫t',
                        'üé• Quay/ch·ª•p s·∫£n ph·∫©m h·∫•p d·∫´n',
                        'üí∞ ƒê·ªãnh gi√° s·∫£n ph·∫©m h·ª£p l√Ω',
                        'üí¨ C√°ch n√≥i chuy·ªán v·ªõi kh√°ch h√†ng',
                        'ü§ù X·ª≠ l√Ω kh√°ch h√†ng tr·∫£ gi√°'
                 
                ],
                office: [
                    'Qu·∫£n l√Ω t√†i li·ªáu: 1) S·∫Øp x·∫øp v√† ph√¢n lo·∫°i t√†i li·ªáu hi·ªáu qu·∫£, 2) S·ª≠ d·ª•ng c√°c c√¥ng c·ª• qu·∫£n l√Ω t√†i li·ªáu, 3) B·∫£o m·∫≠t th√¥ng tin quan tr·ªçng, 4) T·ªëi ∆∞u h√≥a quy tr√¨nh t√¨m ki·∫øm t√†i li·ªáu.',
                    'L·∫≠p k·∫ø ho·∫°ch c√¥ng vi·ªác: 1) Ph√¢n t√≠ch nhu c·∫ßu c√¥ng vi·ªác, 2) L·∫≠p k·∫ø ho·∫°ch chi ti·∫øt v√† th·ª±c hi·ªán, 3) ƒê√°nh gi√° ti·∫øn ƒë·ªô v√† ƒëi·ªÅu ch·ªânh, 4) T·∫°o m√¥i tr∆∞·ªùng l√†m vi·ªác hi·ªáu qu·∫£.',
                    'Giao ti·∫øp n·ªôi b·ªô: 1) L·∫Øng nghe t√≠ch c·ª±c, 2) Ph·∫£n h·ªìi k·ªãp th·ªùi, 3) T·∫°o m√¥i tr∆∞·ªùng l√†m vi·ªác th√¢n thi·ªán, 4) X√¢y d·ª±ng m·ªëi quan h·ªá l√¢u d√†i v·ªõi ƒë·ªìng nghi·ªáp.',
                    'C√¥ng c·ª• vƒÉn ph√≤ng: 1) S·ª≠ d·ª•ng c√°c ph·∫ßn m·ªÅm vƒÉn ph√≤ng hi·ªáu qu·∫£, 2) T·ªëi ∆∞u h√≥a quy tr√¨nh l√†m vi·ªác, 3) T·∫°o m√¥i tr∆∞·ªùng l√†m vi·ªác hi·ªáu qu·∫£, 4) Qu·∫£n l√Ω th√¥ng tin v√† t√†i li·ªáu.'
                ],
                other: [
                    'T√¨m ki·∫øm & t·ªïng h·ª£p th√¥ng tin',
                    'L√™n k·∫ø ho·∫°ch & qu·∫£n l√Ω c√¥ng vi·ªác',
                    'T∆∞ v·∫•n ph√°t tri·ªÉn k·ªπ nƒÉng',
                    'Brainstorm √Ω t∆∞·ªüng m·ªõi'
                ]
            };
            return suggestions[career] || suggestions.other;
        }

        function getSuggestionResponse(problem) {
            console.log('getSuggestionResponse called with:', problem); // Debug log
            console.log('currentCareer:', currentCareer); // Debug log
            
            const name = userProfile.name || 'B·∫°n';
            let response = '';
             switch(currentCareer) {
                case 'farmer':
                    console.log('Processing farmer case'); // Debug log
                    switch(problem) {
                        case 'üåæ Tr·ªìng l√∫a mi·ªÅn T√¢y':
                            response = `D·∫°, v·ªÅ tr·ªìng l√∫a ·ªü mi·ªÅn T√¢y, ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ chi ti·∫øt v·ªÅ b√≥n ph√¢n v√† chƒÉm s√≥c hi·ªáu qu·∫£ ·∫°.`;
                            break;
                        case 'üå∂Ô∏è B·ªánh c√¢y ·ªõt v√†ng l√°':
                            response = `D·∫°, v·ªÅ c√¢y ·ªõt b·ªã v√†ng l√° v√† r·ª•ng tr√°i, c√≥ th·ªÉ do n·∫•m ho·∫∑c thi·∫øu dinh d∆∞·ª°ng. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ c√°ch x·ª≠ l√Ω ·∫°.`;
                            break;
                        case 'üêî G√† th·∫£ v∆∞·ªùn b·ªã b·ªánh':
                            response = `D·∫°, v·ªÅ g√† th·∫£ v∆∞·ªùn ƒÉn √≠t v√† ti√™u ch·∫£y, c√≥ th·ªÉ do b·ªánh ho·∫∑c th·ª©c ƒÉn. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ c√°ch x·ª≠ l√Ω ·∫°.`;
                            break;
                        case 'üçà K·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi':
                            response = `D·∫°, d∆∞a l∆∞·ªõi l√† c√¢y tr·ªìng c√≥ gi√° tr·ªã kinh t·∫ø cao. Ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ k·ªπ thu·∫≠t tr·ªìng d∆∞a l∆∞·ªõi t·ª´ A-Z ƒë·ªÉ ƒë·∫°t nƒÉng su·∫•t t·ªëi ∆∞u ·∫°.`;
                            break;
                        case 'üå∏ S·∫ßu ri√™ng ra hoa b√≥n ph√¢n':
                            response = `D·∫°, v·ªÅ c√¢y s·∫ßu ri√™ng giai ƒëo·∫°n ra hoa, ch√°u s·∫Ω h∆∞·ªõng d·∫´n ch√∫/c√¥ lo·∫°i ph√¢n ph√π h·ª£p ·∫°.`;
                            break;
                        case '‚òï Nh·∫Øc b√≥n ph√¢n c√† ph√™':
                            response = `D·∫°, v·ªÅ c√¢y c√† ph√™, ch√°u s·∫Ω nh·∫Øc ch√∫/c√¥ b√≥n ph√¢n ƒë·ªãnh k·ª≥ v√†o s√°ng th·ª© B·∫£y h√†ng tu·∫ßn ·∫°.`;
                            break;
                        case 'üí∞ C·∫≠p nh·∫≠t gi√° n√¥ng s·∫£n':
                            response = `D·∫°, v·ªÅ gi√° n√¥ng s·∫£n, ch√°u s·∫Ω c·∫≠p nh·∫≠t th√¥ng tin m·ªõi nh·∫•t cho ch√∫/c√¥ ·∫°.`;
                            break;
                        case 'üå§Ô∏è D·ª± b√°o th·ªùi ti·∫øt n√¥ng v·ª•':
                            response = `ƒê·ªÉ xem d·ª± b√°o th·ªùi ti·∫øt, vui l√≤ng cho t√¥i bi·∫øt t·ªânh/th√†nh ph·ªë c·ªßa b·∫°n.\n_(L∆∞u √Ω: ƒê√¢y l√† d·ªØ li·ªáu gi·∫£ l·∫≠p. Trong phi√™n b·∫£n ch√≠nh th·ª©c s·∫Ω k·∫øt n·ªëi ngu·ªìn kh√≠ t∆∞·ª£ng th·ª±c t·∫ø)._`;
                            break;
                        case 'üåø K·ªπ thu·∫≠t di·ªát c·ªè hi·ªáu qu·∫£':
                            response = `üåø K·ªπ thu·∫≠t di·ªát c·ªè hi·ªáu qu·∫£:\n\nüë®‚Äçüåæ Di·ªát c·ªè th·ªß c√¥ng:\n‚Ä¢ Nh·ªï c·ªè b·∫±ng tay: Hi·ªáu qu·∫£, an to√†n\n‚Ä¢ C·∫Øt c·ªè b·∫±ng li·ªÅm: Nhanh, ti·∫øt ki·ªám\n‚Ä¢ L√†m c·ªè ƒë·ªãnh k·ª≥: 2-3 l·∫ßn/v·ª•\n‚Ä¢ Th·ªùi ƒëi·ªÉm: S√°ng s·ªõm ho·∫∑c chi·ªÅu m√°t\n\nüß™ Thu·ªëc di·ªát c·ªè:\n‚Ä¢ Glyphosate: Di·ªát c·ªè to√†n di·ªán\n‚Ä¢ 2,4-D: Di·ªát c·ªè l√° r·ªông\n‚Ä¢ Paraquat: Di·ªát c·ªè ti·∫øp x√∫c\n‚Ä¢ L∆∞u √Ω: ƒê·ªçc k·ªπ h∆∞·ªõng d·∫´n, b·∫£o h·ªô ƒë·∫ßy ƒë·ªß\n\nüå± Di·ªát c·ªè h·ªØu c∆°:\n‚Ä¢ Mu·ªëi: R·∫£i mu·ªëi v√†o g·ªëc c·ªè\n‚Ä¢ Gi·∫•m: Phun gi·∫•m tr·∫Øng 5%\n‚Ä¢ N∆∞·ªõc s√¥i: ƒê·ªï n∆∞·ªõc s√¥i v√†o g·ªëc\n‚Ä¢ Che ph·ªß: D√πng b·∫°t, r∆°m r·∫°\n\nüõ°Ô∏è Ph√≤ng ng·ª´a c·ªè:\n‚Ä¢ Tr·ªìng d√†y: Gi·∫£m √°nh s√°ng ƒë·∫øn ƒë·∫•t\n‚Ä¢ Che ph·ªß: R∆°m r·∫°, b·∫°t nilon\n‚Ä¢ Lu√¢n canh: Thay ƒë·ªïi c√¢y tr·ªìng\n‚Ä¢ V·ªá sinh: D·ªçn s·∫°ch c·ªè quanh v∆∞·ªùn`;
                            break;
                        default:
                            console.log('No matching case found for:', problem); // Debug log
                            response = `T√¥i s·∫µn s√†ng h·ªó tr·ª£. ${name} vui l√≤ng cho t√¥i bi·∫øt th√™m chi ti·∫øt v·ªÅ v·∫•n ƒë·ªÅ n√†y.`;
                    }
                    break;

                case 'saler':
                    console.log('Processing saler case'); // Debug log
                    switch(problem) {
                        case 'B√≠ quy·∫øt ch·ªët ƒë∆°n hi·ªáu qu·∫£':
                        esponse = `M·ªôt s·ªë b√≠ quy·∫øt gi√∫p b·∫°n ch·ªët ƒë∆°n th√†nh c√¥ng:
                                - L·∫Øng nghe k·ªπ nhu c·∫ßu v√† v·∫•n ƒë·ªÅ c·ªßa kh√°ch h√†ng
                                - T∆∞ v·∫•n ƒë√∫ng tr·ªçng t√¢m, nh·∫•n m·∫°nh l·ª£i √≠ch s·∫£n ph·∫©m ph√π h·ª£p v·ªõi kh√°ch
                                - T·∫°o c·∫£m gi√°c c·∫•p b√°ch (∆∞u ƒë√£i gi·ªõi h·∫°n, s·ªë l∆∞·ª£ng c√≥ h·∫°n...)
                                - Gi·∫£i ƒë√°p m·ªçi th·∫Øc m·∫Øc, x·ª≠ l√Ω t·ª´ ch·ªëi m·ªôt c√°ch nh·∫π nh√†ng
                                - ƒê∆∞a ra l·ªùi k√™u g·ªçi h√†nh ƒë·ªông r√µ r√†ng: "Ch·ªët ƒë∆°n ngay h√¥m nay ƒë·ªÉ nh·∫≠n ∆∞u ƒë√£i!"`;
                    break;
                    case 'ChƒÉm s√≥c kh√°ch h√†ng sau b√°n':
                    response = `ChƒÉm s√≥c kh√°ch h√†ng sau b√°n gi√∫p tƒÉng s·ª± h√†i l√≤ng v√† gi·ªØ ch√¢n kh√°ch:
                        - G·ª≠i l·ªùi c·∫£m ∆°n sau khi kh√°ch mua h√†ng
                        - H·ªèi thƒÉm tr·∫£i nghi·ªám s·ª≠ d·ª•ng s·∫£n ph·∫©m, ch·ªß ƒë·ªông h·ªó tr·ª£ n·∫øu c√≥ v·∫•n ƒë·ªÅ
                        - G·ª≠i ∆∞u ƒë√£i, th√¥ng tin s·∫£n ph·∫©m m·ªõi cho kh√°ch c≈©
                        - X√¢y d·ª±ng m·ªëi quan h·ªá th√¢n thi·∫øt, t·∫°o s·ª± tin t∆∞·ªüng l√¢u d√†i`;
                    break;
                case 'Qu·∫£n l√Ω ƒë∆°n h√†ng v√† t·ªìn kho th√¥ng minh':
                    response = `ƒê·ªÉ qu·∫£n l√Ω ƒë∆°n h√†ng v√† t·ªìn kho hi·ªáu qu·∫£:
                        - S·ª≠ d·ª•ng s·ªï s√°ch, file Excel ho·∫∑c ph·∫ßn m·ªÅm qu·∫£n l√Ω b√°n h√†ng ƒë·ªÉ theo d√µi ƒë∆°n v√† t·ªìn kho
                        - X√°c nh·∫≠n ƒë∆°n h√†ng nhanh ch√≥ng, c·∫≠p nh·∫≠t tr·∫°ng th√°i cho kh√°ch
                        - Ki·ªÉm tra t·ªìn kho ƒë·ªãnh k·ª≥, tr√°nh h·∫øt h√†ng ho·∫∑c t·ªìn kho qu√° l√¢u
                        - Ph√¢n lo·∫°i s·∫£n ph·∫©m theo nh√≥m ƒë·ªÉ d·ªÖ ki·ªÉm so√°t v√† l√™n k·∫ø ho·∫°ch nh·∫≠p h√†ng h·ª£p l√Ω`;
                    break;
                    case 'Qu·∫£n l√Ω ƒë∆°n h√†ng v√† t·ªìn kho th√¥ng minh':
                    response = `ƒê·ªÉ qu·∫£n l√Ω ƒë∆°n h√†ng v√† t·ªìn kho hi·ªáu qu·∫£:
- S·ª≠ d·ª•ng s·ªï s√°ch, file Excel ho·∫∑c ph·∫ßn m·ªÅm qu·∫£n l√Ω b√°n h√†ng ƒë·ªÉ theo d√µi ƒë∆°n v√† t·ªìn kho
- X√°c nh·∫≠n ƒë∆°n h√†ng nhanh ch√≥ng, c·∫≠p nh·∫≠t tr·∫°ng th√°i cho kh√°ch
- Ki·ªÉm tra t·ªìn kho ƒë·ªãnh k·ª≥, tr√°nh h·∫øt h√†ng ho·∫∑c t·ªìn kho qu√° l√¢u
- Ph√¢n lo·∫°i s·∫£n ph·∫©m theo nh√≥m ƒë·ªÉ d·ªÖ ki·ªÉm so√°t v√† l√™n k·∫ø ho·∫°ch nh·∫≠p h√†ng h·ª£p l√Ω`;
                    break;
                default:
                    response = `T√¥i s·∫µn s√†ng h·ªó tr·ª£. ${name} vui l√≤ng cho t√¥i bi·∫øt th√™m chi ti·∫øt v·ªÅ v·∫•n ƒë·ªÅ n√†y.`;
            }
                case 'business':
                     switch(problem) {
                        case 'Ph√¢n t√≠ch th·ªã tr∆∞·ªùng & ƒë·ªëi th·ªß':
                            response = `ƒê·ªÉ ph√¢n t√≠ch, vui l√≤ng cung c·∫•p cho t√¥i th√¥ng tin v·ªÅ ng√†nh h√†ng v√† m·ªôt v√†i ƒë·ªëi th·ªß ch√≠nh c·ªßa ${name}.`;
                            break;
                        case 'X√¢y d·ª±ng k·∫ø ho·∫°ch kinh doanh':
                            response = `X√¢y d·ª±ng k·∫ø ho·∫°ch kinh doanh l√† m·ªôt b∆∞·ªõc quan tr·ªçng. Ch√∫ng ta c√≥ th·ªÉ b·∫Øt ƒë·∫ßu b·∫±ng vi·ªác x√°c ƒë·ªãnh m·ª•c ti√™u, th·ªã tr∆∞·ªùng, s·∫£n ph·∫©m v√† chi·∫øn l∆∞·ª£c marketing. ${name} mu·ªën b·∫Øt ƒë·∫ßu v·ªõi ph·∫ßn n√†o tr∆∞·ªõc?`;
                            break;
                        case 'T∆∞ v·∫•n marketing & b√°n h√†ng':
                            response = `Ch·∫Øc ch·∫Øn r·ªìi. ${name} ƒëang quan t√¢m ƒë·∫øn marketing online (Facebook, Google), marketing t·∫°i ƒëi·ªÉm b√°n hay k√™nh n√†o kh√°c?`;
                            break;
                        case 'G·ª£i √Ω t·ªëi ∆∞u chi ph√≠':
                            response = `ƒê·ªÉ t·ªëi ∆∞u chi ph√≠, ch√∫ng ta c√≥ th·ªÉ r√† so√°t c√°c kho·∫£n chi cho v·∫≠n h√†nh, nh√¢n s·ª±, marketing... ${name} c√≥ mu·ªën xem qua m·ªôt checklist c√°c h·∫°ng m·ª•c c·∫ßn t·ªëi ∆∞u kh√¥ng?`;
                            break;
                        default:
                            response = `T√¥i s·∫µn s√†ng h·ªó tr·ª£. ${name} vui l√≤ng cho t√¥i bi·∫øt th√™m chi ti·∫øt v·ªÅ v·∫•n ƒë·ªÅ n√†y.`;
                    }
                    break;
                case 'office':
                    switch(problem) {
                        case '‚úâÔ∏è G·ª£i √Ω vi·∫øt mail chuy√™n nghi·ªáp':
                            response = `‚úâÔ∏è **G·ª£i √Ω vi·∫øt mail chuy√™n nghi·ªáp:**\n\n- Ti√™u ƒë·ªÅ r√µ r√†ng, ng·∫Øn g·ªçn (VD: [ACTION] Y√™u c·∫ßu b√°o c√°o tu·∫ßn)\n- L·ªùi ch√†o trang tr·ªçng: "K√≠nh g·ª≠i Anh/Ch·ªã..."\n- N·ªôi dung: Tr√¨nh b√†y m·∫°ch l·∫°c, chia ƒëo·∫°n, g·∫°ch ƒë·∫ßu d√≤ng\n- K·∫øt th√∫c: "Tr√¢n tr·ªçng,", "Best regards,"\n- Ch·ªØ k√Ω: H·ªç t√™n, ch·ª©c v·ª•, c√¥ng ty, s·ªë ƒëi·ªán tho·∫°i\n\n**M·∫πo:** Lu√¥n ki·ªÉm tra l·∫°i l·ªói ch√≠nh t·∫£ v√† t·ªáp ƒë√≠nh k√®m tr∆∞·ªõc khi g·ª≠i!`;
                            break;
                        case 'üóÇÔ∏è C√°ch s·∫Øp x·∫øp timeline c√¥ng vi·ªác':
                            response = `üóÇÔ∏è **C√°ch s·∫Øp x·∫øp timeline c√¥ng vi·ªác:**\n\n1. Li·ªát k√™ t·∫•t c·∫£ c√°c ƒë·∫ßu vi·ªác c·∫ßn l√†m\n2. ∆Øu ti√™n theo m·ª©c ƒë·ªô quan tr·ªçng/kh·∫©n c·∫•p (Ma tr·∫≠n Eisenhower)\n3. Chia nh·ªè c√¥ng vi·ªác l·ªõn th√†nh c√°c b∆∞·ªõc nh·ªè\n4. S·ª≠ d·ª•ng c√¥ng c·ª•: Google Calendar, Trello, Notion...\n5. ƒê·∫∑t deadline r√µ r√†ng cho t·ª´ng nhi·ªám v·ª•\n6. ƒê√°nh gi√° l·∫°i ti·∫øn ƒë·ªô m·ªói cu·ªëi ng√†y/tu·∫ßn`;
                            break;
                        case 'üìÖ L·∫≠p k·∫ø ho·∫°ch tu·∫ßn hi·ªáu qu·∫£':
                            response = `üìÖ **L·∫≠p k·∫ø ho·∫°ch tu·∫ßn hi·ªáu qu·∫£:**\n\n- ƒê·∫ßu tu·∫ßn: X√°c ƒë·ªãnh 3 m·ª•c ti√™u l·ªõn nh·∫•t\n- Chia nh·ªè m·ª•c ti√™u th√†nh c√°c task h√†ng ng√†y\n- S·∫Øp x·∫øp l·ªãch h·ªçp, deadline, c√¥ng vi·ªác c√° nh√¢n\n- ƒê·ªÉ th·ªùi gian d·ª± ph√≤ng cho vi·ªác ph√°t sinh\n- Cu·ªëi tu·∫ßn: T·ªïng k·∫øt, r√∫t kinh nghi·ªám, ƒëi·ªÅu ch·ªânh k·∫ø ho·∫°ch tu·∫ßn sau`;
                            break;
                        case '‚è±Ô∏è M·∫πo qu·∫£n l√Ω th·ªùi gian':
                            response = `‚è±Ô∏è **M·∫πo qu·∫£n l√Ω th·ªùi gian:**\n\n- K·ªπ thu·∫≠t Pomodoro: 25 ph√∫t t·∫≠p trung, 5 ph√∫t ngh·ªâ\n- Time blocking: Chia khung gi·ªù cho t·ª´ng lo·∫°i vi·ªác\n- ∆Øu ti√™n vi·ªác quan tr·ªçng tr∆∞·ªõc (Eat That Frog)\n- H·∫°n ch·∫ø ƒëa nhi·ªám, t·∫Øt th√¥ng b√°o khi l√†m vi·ªác\n- T·ªïng k·∫øt cu·ªëi ng√†y ƒë·ªÉ ƒëi·ªÅu ch·ªânh th√≥i quen`;
                            break;
                        case 'üìä H√†m Excel th√¥ng d·ª•ng cho vƒÉn ph√≤ng':
                            response = `üìä **H√†m Excel th√¥ng d·ª•ng:**\n\n- SUM, AVERAGE, COUNT: T√≠nh t·ªïng, trung b√¨nh, ƒë·∫øm\n- IF: H√†m ƒëi·ªÅu ki·ªán\n- VLOOKUP/HLOOKUP: T√¨m ki·∫øm d·ªØ li·ªáu\n- CONCATENATE: N·ªëi chu·ªói\n- PIVOTTABLE: T·ªïng h·ª£p, ph√¢n t√≠ch d·ªØ li·ªáu\n\n**Ph√≠m t·∫Øt hay:** Ctrl+T (t·∫°o b·∫£ng), Ctrl+Shift+L (l·ªçc), Alt+= (AutoSum)`;
                            break;
                    default:
                            response = `T√¥i s·∫µn s√†ng h·ªó tr·ª£. ${name} vui l√≤ng cho t√¥i bi·∫øt th√™m chi ti·∫øt v·ªÅ v·∫•n ƒë·ªÅ n√†y.`;
                    }
                    break;
// ... existing code ...
            }
            return response;
        }
    </script>
</body>
</html>
